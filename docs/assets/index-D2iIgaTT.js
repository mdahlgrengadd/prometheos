import{r as e,j as t}from"./index-CM0htoqd.js";import{Q as r,S as a,D as n,U as s}from"./MacroContext-EXPiZfro.js";import"./monaco-editor-Ch9pnC_y.js";const d=()=>{const{registerComponent:d,unregisterComponent:l}=r(),[o,i]=e.useState("0"),[c,u]=e.useState(null),[b,g]=e.useState(null),[p,x]=e.useState(!1),[m,f]=e.useState(!1),[h,j]=e.useState(!1);e.useEffect((()=>{(async()=>{try{if(await s.isPluginRegistered("calculator"))j(!0);else{let e;if(a.workerEntrypoint&&(e=`/worker/${a.workerEntrypoint}`),e){await s.registerPlugin(a.id,e)&&j(!0)}}}catch(e){}})();const e={id:a.id,type:"Calculator",name:a.name,description:a.description,path:`/api/${a.id}`,state:{enabled:!0,visible:!0},actions:[{id:"add",name:"Add",description:"Add two numbers",parameters:[{name:"a",type:"number",description:"First operand",required:!0},{name:"b",type:"number",description:"Second operand",required:!0}],available:!0}]};return d(e),n(a.id,"add",(async e=>{const t=null==e?void 0:e.a,r=null==e?void 0:e.b;if("number"!=typeof t||"number"!=typeof r)return{success:!1,error:"Invalid parameters for add"};try{return{success:!0,data:await s.calculate(t,r,"+")}}catch(a){return{success:!1,error:a instanceof Error?a.message:String(a)}}})),()=>{l(a.id)}}),[]);const C=e=>{p?(i(e),x(!1)):i("0"===o?e:o+e)},k=async e=>{const t=parseFloat(o);if(null===c)u(t);else if(b){f(!0);try{const e=await s.calculate(c,t,b);i(String(e)),u(e)}catch(r){i("Error")}finally{f(!1)}}x(!0),g(e)};return t.jsxs("div",{className:"flex flex-col p-4 calculator-root h-full",children:[t.jsx("div",{className:"flex-row bg-card p-2 mb-2 text-right text-xl h-10 overflow-hidden text-foreground border border-border",children:o}),t.jsxs("div",{className:"flex-row grid grid-cols-4 gap-1 grow",children:[t.jsx("button",{onClick:()=>{i("0"),u(null),g(null),x(!1)},className:"col-span-2 bg-red-500 text-white p-2",disabled:!h,children:"AC"}),t.jsx("button",{onClick:()=>k("/"),className:"bg-muted p-2 text-foreground",disabled:!h,children:"/"}),t.jsx("button",{onClick:()=>k("*"),className:"bg-muted p-2 text-foreground",disabled:!h,children:"Ã—"}),t.jsx("button",{onClick:()=>C("7"),className:"bg-card p-2 text-foreground",disabled:!h,children:"7"}),t.jsx("button",{onClick:()=>C("8"),className:"bg-card p-2 text-foreground",disabled:!h,children:"8"}),t.jsx("button",{onClick:()=>C("9"),className:"bg-card p-2 text-foreground",disabled:!h,children:"9"}),t.jsx("button",{onClick:()=>k("-"),className:"bg-muted p-2 text-foreground",disabled:!h,children:"-"}),t.jsx("button",{onClick:()=>C("4"),className:"bg-card p-2 text-foreground",disabled:!h,children:"4"}),t.jsx("button",{onClick:()=>C("5"),className:"bg-card p-2 text-foreground",disabled:!h,children:"5"}),t.jsx("button",{onClick:()=>C("6"),className:"bg-card p-2 text-foreground",disabled:!h,children:"6"}),t.jsx("button",{onClick:()=>k("+"),className:"bg-muted p-2 text-foreground",disabled:!h,children:"+"}),t.jsx("button",{onClick:()=>C("1"),className:"bg-card p-2 text-foreground",disabled:!h,children:"1"}),t.jsx("button",{onClick:()=>C("2"),className:"bg-card p-2 text-foreground",disabled:!h,children:"2"}),t.jsx("button",{onClick:()=>C("3"),className:"bg-card p-2 text-foreground",disabled:!h,children:"3"}),t.jsx("button",{onClick:async()=>{if(null===c||null===b)return;const e=parseFloat(o);f(!0);try{const t=await s.calculate(c,e,b);i(String(t)),u(t),g(null),x(!0)}catch(t){i("Error")}finally{f(!1)}},className:"bg-blue-500 text-white p-2 row-span-2",disabled:!h,children:"="}),t.jsx("button",{onClick:()=>C("0"),className:"bg-card p-2 col-span-2 text-foreground",disabled:!h,children:"0"}),t.jsx("button",{onClick:()=>{if(p)return i("0."),void x(!1);o.includes(".")||i(o+".")},className:"bg-card p-2 text-foreground",disabled:!h,children:"."})]})]})},l={id:a.id,manifest:a,init:async()=>{},render:()=>t.jsx(d,{})};export{l as default};
