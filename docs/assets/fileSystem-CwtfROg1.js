var v=Object.defineProperty;var g=(d,e,n)=>e in d?v(d,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[e]=n;var S=(d,e,n)=>g(d,typeof e!="symbol"?e+"":e,n);import{c as m,K as F}from"./index-DfbnWkRj.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=m("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=m("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=m("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);class w{constructor(e){S(this,"root",[]);e&&(this.root=e)}readFile(e){const n=this.findItemByPath(e);return n&&n.type==="file"?n.content:void 0}writeFile(e,n){const l=this.findItemByPath(e);l&&l.type==="file"&&(l.content=n)}listDir(e){const n=this.findItemByPath(e);return n&&n.type==="folder"&&n.children?n.children:[]}deleteFile(e){}initFromData(e){this.root=e}serialize(){return JSON.parse(JSON.stringify(this.root))}findById(e){const n=l=>{for(const t of l){if(t.id===e)return t;if(t.children){const r=n(t.children);if(r)return r}}};return n(this.root)}listChildrenById(e){const n=this.findById(e);return n&&n.type==="folder"&&n.children?n.children:[]}findItemByPath(e){if(!e||e==="/")return{type:"folder",name:"/",id:"root",children:this.root};const n=e.split("/").filter(Boolean);let l={type:"folder",name:"/",id:"root",children:this.root};for(const t of n){if(!l||l.type!=="folder"||!l.children)return;l=l.children.find(r=>r.name===t)}return l}}const M=new w;function x(d){const e={};for(const l of d){const t=l.id.split("/");let r=e,s="";for(let o=0;o<t.length;o++){const i=t[o];s=s?`${s}/${i}`:i,o===t.length-1?r[i]={...l,name:i,id:s}:(r[i]||(r[i]={id:s,name:i,type:"folder",children:{}}),r[i].children||(r[i].children={}),r=r[i].children)}}function n(l){return Object.values(l).map(t=>t.type==="folder"?{...t,children:n(t.children)}:t)}return n(e)}async function O(){try{const e=await fetch("/prometheos/shadow-manifest.json");if(!e.ok)throw new Error("Failed to load shadow-manifest.json");const n=await e.json(),l=await Promise.all(n.map(async t=>{if(t.type==="file"){const s=`/prometheos/${t.contentPath.replace(/^\//,"")}`,i=await(await fetch(s)).text();let a;return t.name.endsWith(".js")||t.name.endsWith(".jsx")?a="javascript":t.name.endsWith(".ts")||t.name.endsWith(".tsx")?a="typescript":t.name.endsWith(".css")?a="css":t.name.endsWith(".html")?a="html":t.name.endsWith(".json")&&(a="json"),{id:t.id,name:t.name,type:"file",content:i,language:a}}return{id:t.id,name:t.name,type:"folder",children:[]}}));return x(l)}catch(d){return console.error("Failed to load shadow folder:",d),[]}}const B=F(d=>({fs:{id:"root",name:"My Computer",type:"folder",children:[]},init:async()=>{const e=await O();d({fs:{id:"root",name:"My Computer",type:"folder",children:e}})},addItems:(e,n)=>d(l=>{var s;const t=JSON.parse(JSON.stringify(l.fs));let r=t;for(let o=1;o<e.length;o++){const i=(s=r.children)==null?void 0:s.find(a=>a.id===e[o]);if(!i)return{fs:t};r=i}return r.children=[...r.children||[],...n],{fs:t}}),renameItem:(e,n,l)=>d(t=>{var i,a;const r=JSON.parse(JSON.stringify(t.fs));let s=r;for(let c=1;c<e.length;c++){const h=(i=s.children)==null?void 0:i.find(u=>u.id===e[c]);if(!h)return{fs:r};s=h}const o=(a=s.children)==null?void 0:a.find(c=>c.id===n);return o&&(o.name=l),{fs:r}}),deleteItem:(e,n)=>d(l=>{var s,o;const t=JSON.parse(JSON.stringify(l.fs));let r=t;for(let i=1;i<e.length;i++){const a=(s=r.children)==null?void 0:s.find(c=>c.id===e[i]);if(!a)return{fs:t};r=a}return r.children=(o=r.children)==null?void 0:o.filter(i=>i.id!==n),{fs:t}}),moveItem:(e,n,l)=>d(t=>{var a,c,h,u;const r=JSON.parse(JSON.stringify(t.fs));let s=r;for(let f=1;f<e.length;f++){const y=(a=s.children)==null?void 0:a.find(p=>p.id===e[f]);if(!y)return{fs:r};s=y}const o=(c=s.children)==null?void 0:c.find(f=>f.id===n);if(!o)return{fs:r};s.children=(h=s.children)==null?void 0:h.filter(f=>f.id!==n);let i=r;for(let f=1;f<l.length;f++){const y=(u=i.children)==null?void 0:u.find(p=>p.id===l[f]);if(!y)return{fs:r};i=y}return i.children=[...i.children||[],o],{fs:r}}),updateFileContent:(e,n,l)=>d(t=>{var i,a;const r=JSON.parse(JSON.stringify(t.fs));let s=r;for(let c=1;c<e.length;c++){const h=(i=s.children)==null?void 0:i.find(u=>u.id===e[c]);if(!h)return{fs:r};s=h}const o=(a=s.children)==null?void 0:a.find(c=>c.id===n);return o&&o.type==="file"&&(o.content=l),{fs:r}})}));export{k as F,j as S,w as V,N as a,B as u,M as v};
