var Oe=Object.defineProperty;var Te=(t,n,r)=>n in t?Oe(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var U=(t,n,r)=>Te(t,typeof n!="symbol"?n+"":n,r);import{n as ne,r as u,w as H,j as e,s as re,l as P,v as oe,x as _e,o as ae,m as ke,R as w,q as Le,f as B,g as Me}from"./index-4Gnpq0JH.js";import{h as De,b as Ve,i as q,I as T,j as $e,k as Ue,l as Fe,n as He,T as ie,o as le,p as k,q as L,B as ce,r as Y}from"./MacroContext-CEG8-rAs.js";import{B as _}from"./badge-BnZR-Z2u.js";import{S as Q}from"./scroll-area-BQQT-J7O.js";import{L as Be}from"./label-Bw_L-Mxr.js";import{T as qe}from"./textarea-CPBYkLcI.js";import{S as Ge}from"./index-BS2iND8T.js";import{R as Je}from"./refresh-cw-BqeUnBYi.js";import"./monaco-editor-Dq6WuQlL.js";import"./index-C3OecuDI.js";var D="Collapsible",[ze,de]=ne(D),[Ke,G]=ze(D),ue=u.forwardRef((t,n)=>{const{__scopeCollapsible:r,open:a,defaultOpen:i,disabled:l,onOpenChange:s,...c}=t,[d,p]=H({prop:a,defaultProp:i??!1,onChange:s,caller:D});return e.jsx(Ke,{scope:r,disabled:l,contentId:re(),open:d,onOpenToggle:u.useCallback(()=>p(x=>!x),[p]),children:e.jsx(P.div,{"data-state":z(d),"data-disabled":l?"":void 0,...c,ref:n})})});ue.displayName=D;var pe="CollapsibleTrigger",he=u.forwardRef((t,n)=>{const{__scopeCollapsible:r,...a}=t,i=G(pe,r);return e.jsx(P.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":z(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...a,ref:n,onClick:oe(t.onClick,i.onOpenToggle)})});he.displayName=pe;var J="CollapsibleContent",me=u.forwardRef((t,n)=>{const{forceMount:r,...a}=t,i=G(J,t.__scopeCollapsible);return e.jsx(_e,{present:r||i.open,children:({present:l})=>e.jsx(Xe,{...a,ref:n,present:l})})});me.displayName=J;var Xe=u.forwardRef((t,n)=>{const{__scopeCollapsible:r,present:a,children:i,...l}=t,s=G(J,r),[c,d]=u.useState(a),p=u.useRef(null),x=ae(n,p),j=u.useRef(0),A=j.current,y=u.useRef(0),E=y.current,C=s.open||c,S=u.useRef(C),I=u.useRef(void 0);return u.useEffect(()=>{const f=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(f)},[]),ke(()=>{const f=p.current;if(f){I.current=I.current||{transitionDuration:f.style.transitionDuration,animationName:f.style.animationName},f.style.transitionDuration="0s",f.style.animationName="none";const o=f.getBoundingClientRect();j.current=o.height,y.current=o.width,S.current||(f.style.transitionDuration=I.current.transitionDuration,f.style.animationName=I.current.animationName),d(a)}},[s.open,a]),e.jsx(P.div,{"data-state":z(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!C,...l,ref:x,style:{"--radix-collapsible-content-height":A?`${A}px`:void 0,"--radix-collapsible-content-width":E?`${E}px`:void 0,...t.style},children:C&&i})});function z(t){return t?"open":"closed"}var We=ue,Ye=he,Qe=me,N="Accordion",Ze=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[K,et,tt]=Le(N),[V,Tt]=ne(N,[tt,de]),X=de(),fe=w.forwardRef((t,n)=>{const{type:r,...a}=t,i=a,l=a;return e.jsx(K.Provider,{scope:t.__scopeAccordion,children:r==="multiple"?e.jsx(ot,{...l,ref:n}):e.jsx(rt,{...i,ref:n})})});fe.displayName=N;var[xe,st]=V(N),[ge,nt]=V(N,{collapsible:!1}),rt=w.forwardRef((t,n)=>{const{value:r,defaultValue:a,onValueChange:i=()=>{},collapsible:l=!1,...s}=t,[c,d]=H({prop:r,defaultProp:a??"",onChange:i,caller:N});return e.jsx(xe,{scope:t.__scopeAccordion,value:w.useMemo(()=>c?[c]:[],[c]),onItemOpen:d,onItemClose:w.useCallback(()=>l&&d(""),[l,d]),children:e.jsx(ge,{scope:t.__scopeAccordion,collapsible:l,children:e.jsx(be,{...s,ref:n})})})}),ot=w.forwardRef((t,n)=>{const{value:r,defaultValue:a,onValueChange:i=()=>{},...l}=t,[s,c]=H({prop:r,defaultProp:a??[],onChange:i,caller:N}),d=w.useCallback(x=>c((j=[])=>[...j,x]),[c]),p=w.useCallback(x=>c((j=[])=>j.filter(A=>A!==x)),[c]);return e.jsx(xe,{scope:t.__scopeAccordion,value:s,onItemOpen:d,onItemClose:p,children:e.jsx(ge,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(be,{...l,ref:n})})})}),[at,$]=V(N),be=w.forwardRef((t,n)=>{const{__scopeAccordion:r,disabled:a,dir:i,orientation:l="vertical",...s}=t,c=w.useRef(null),d=ae(c,n),p=et(r),j=De(i)==="ltr",A=oe(t.onKeyDown,y=>{var v;if(!Ze.includes(y.key))return;const E=y.target,C=p().filter(R=>{var O;return!((O=R.ref.current)!=null&&O.disabled)}),S=C.findIndex(R=>R.ref.current===E),I=C.length;if(S===-1)return;y.preventDefault();let f=S;const o=0,m=I-1,b=()=>{f=S+1,f>m&&(f=o)},g=()=>{f=S-1,f<o&&(f=m)};switch(y.key){case"Home":f=o;break;case"End":f=m;break;case"ArrowRight":l==="horizontal"&&(j?b():g());break;case"ArrowDown":l==="vertical"&&b();break;case"ArrowLeft":l==="horizontal"&&(j?g():b());break;case"ArrowUp":l==="vertical"&&g();break}const h=f%I;(v=C[h].ref.current)==null||v.focus()});return e.jsx(at,{scope:r,disabled:a,direction:i,orientation:l,children:e.jsx(K.Slot,{scope:r,children:e.jsx(P.div,{...s,"data-orientation":l,ref:d,onKeyDown:a?void 0:A})})})}),M="AccordionItem",[it,W]=V(M),ve=w.forwardRef((t,n)=>{const{__scopeAccordion:r,value:a,...i}=t,l=$(M,r),s=st(M,r),c=X(r),d=re(),p=a&&s.value.includes(a)||!1,x=l.disabled||t.disabled;return e.jsx(it,{scope:r,open:p,disabled:x,triggerId:d,children:e.jsx(We,{"data-orientation":l.orientation,"data-state":Ae(p),...c,...i,ref:n,disabled:x,open:p,onOpenChange:j=>{j?s.onItemOpen(a):s.onItemClose(a)}})})});ve.displayName=M;var je="AccordionHeader",we=w.forwardRef((t,n)=>{const{__scopeAccordion:r,...a}=t,i=$(N,r),l=W(je,r);return e.jsx(P.h3,{"data-orientation":i.orientation,"data-state":Ae(l.open),"data-disabled":l.disabled?"":void 0,...a,ref:n})});we.displayName=je;var F="AccordionTrigger",ye=w.forwardRef((t,n)=>{const{__scopeAccordion:r,...a}=t,i=$(N,r),l=W(F,r),s=nt(F,r),c=X(r);return e.jsx(K.ItemSlot,{scope:r,children:e.jsx(Ye,{"aria-disabled":l.open&&!s.collapsible||void 0,"data-orientation":i.orientation,id:l.triggerId,...c,...a,ref:n})})});ye.displayName=F;var Ne="AccordionContent",Ce=w.forwardRef((t,n)=>{const{__scopeAccordion:r,...a}=t,i=$(N,r),l=W(Ne,r),s=X(r);return e.jsx(Qe,{role:"region","aria-labelledby":l.triggerId,"data-orientation":i.orientation,...s,...a,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Ce.displayName=Ne;function Ae(t){return t?"open":"closed"}var lt=fe,ct=ve,dt=we,Se=ye,Ie=Ce;const ut=lt,Ee=u.forwardRef(({className:t,...n},r)=>e.jsx(ct,{ref:r,className:B("border-b",t),...n}));Ee.displayName="AccordionItem";const Re=u.forwardRef(({className:t,children:n,...r},a)=>e.jsx(dt,{className:"flex",children:e.jsxs(Se,{ref:a,className:B("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...r,children:[n,e.jsx(Ve,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Re.displayName=Se.displayName;const Pe=u.forwardRef(({className:t,children:n,...r},a)=>e.jsx(Ie,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:e.jsx("div",{className:B("pb-4 pt-0",t),children:n})}));Pe.displayName=Ie.displayName;const pt=()=>e.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Getting Started with API Explorer"}),e.jsx("p",{className:"mb-4 text-gray-700",children:"The API Explorer allows you to browse and interact with available API components and their actions."}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Launching Apps"}),e.jsxs("p",{className:"mb-4 text-gray-700",children:["To view API components, ensure an application that exposes an API is running. You can start an app manually from the desktop, or programmatically using the Launch App API. For example: ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:'launchApp("notepad")'})," will start Notepad and its APIs will appear here."]}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"How to use"}),e.jsxs("ol",{className:"list-decimal list-inside mb-4 space-y-2 text-gray-700",children:[e.jsx("li",{children:"Use the search bar on the left to find a component by name, type, or path."}),e.jsx("li",{children:"Click on a component to view its available actions."}),e.jsx("li",{children:"Fill in required parameters for the action in the form fields."}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:"Execute"})," to perform the action and see the response below."]}),e.jsx("li",{children:"View code examples in JavaScript or React to integrate API calls into your application."})]}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Swagger UI"}),e.jsxs("p",{className:"text-gray-700 mb-4",children:["Switch to the ",e.jsx("strong",{children:"Swagger UI"}),' tab to see FastAPI-style documentation with interactive "Try it out" functionality.']}),e.jsxs("p",{className:"text-gray-700",children:["Use the ",e.jsx("strong",{children:"Refresh"})," button to reload the OpenAPI specification if the API changes."]})]}),ht=t=>{switch(t.type){case"number":return 1234;case"string":return"<replace this string>";case"text":return"<replace this text>";case"boolean":return!1;default:return"<replace this value>"}},mt=({parameter:t,value:n,onChange:r})=>{const a=s=>r(t.name,l(s.target.value)),i=s=>r(t.name,l(s.target.value)),l=s=>{if(t.enum)return s;switch(t.type){case"number":return s===""?"":Number(s);case"boolean":return s==="true";default:return s}};return e.jsxs("div",{className:"mb-4",children:[e.jsxs(Be,{htmlFor:t.name,className:"flex items-center gap-2",children:[t.name,t.required&&e.jsx(_,{variant:"outline",className:"text-xs",children:"Required"})]}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:t.description||""}),t.enum?e.jsxs("select",{id:t.name,value:n!=null?n.toString():"",onChange:i,className:"mt-1 border rounded px-2 py-1",children:[e.jsx("option",{value:"",children:"Select"}),t.enum.map(s=>e.jsx("option",{value:s,children:s},s))]}):t.type==="number"?e.jsx(T,{id:t.name,type:"number",value:n!=null?n.toString():"",onChange:a,placeholder:"1234",className:"mt-1"}):t.type==="boolean"?e.jsxs("select",{id:t.name,value:n!=null?n.toString():"",onChange:i,className:"mt-1 border rounded px-2 py-1",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"true",children:"True"}),e.jsx("option",{value:"false",children:"False"})]}):t.type==="text"?e.jsx(qe,{id:t.name,value:n!=null?n.toString():"",onChange:s=>r(t.name,s.target.value),placeholder:"<replace this text>",className:"mt-1"}):t.type==="string"?e.jsx(T,{id:t.name,type:"text",value:n!=null?n.toString():"",onChange:a,placeholder:"<replace this string>",className:"mt-1"}):e.jsx(T,{id:t.name,type:"text",value:n!=null?n.toString():"",onChange:a,placeholder:`Enter ${t.name}`,className:"mt-1"})]})},ft=()=>{const{getComponents:t,executeAction:n}=q(),[r,a]=u.useState([]),[i,l]=u.useState(""),[s,c]=u.useState(null),[d,p]=u.useState({}),[x,j]=u.useState({}),[A,y]=u.useState({}),[E,C]=u.useState({});u.useEffect(()=>{const o=()=>{const b=t().filter(g=>g.actions&&g.actions.length>0);if(b.forEach(g=>{if(g.id==="onEvent"){const h=g.actions.find(v=>v.id==="waitForEvent");if(h!=null&&h.parameters){const v=h.parameters.find(R=>R.name==="eventId");v&&(v.enum=Me.getEventNames())}}}),a(b),s){const g=b.find(h=>h.id===s.id);g&&c(g)}};o();const m=setInterval(o,2e3);return()=>clearInterval(m)},[t,s]);const S=(o,m)=>{p(b=>({...b,[o]:m}))},I=async o=>{y(m=>({...m,[o.id]:!0})),j(m=>({...m,[o.id]:null}));try{const m=Object.entries(d).filter(([g,h])=>h!==void 0&&h!=="").reduce((g,[h,v])=>({...g,[h]:v}),{}),b=await n(s.id,o.id,m);j(g=>({...g,[o.id]:b}))}catch(m){j(b=>({...b,[o.id]:{success:!1,error:m instanceof Error?m.message:String(m)}}))}finally{y(m=>({...m,[o.id]:!1}))}},f=r.filter(o=>{const m=i.toLowerCase();return[o.id,o.name,o.type,o.path].filter(Boolean).some(b=>b.toLowerCase().includes(m))});return e.jsxs("div",{className:"h-full flex bg-background text-foreground",children:[e.jsxs("div",{className:"w-1/3 border-r p-4 flex flex-col",children:[e.jsx(T,{placeholder:"Search components...",value:i,onChange:o=>l(o.target.value),className:"mb-4"}),e.jsxs(Q,{className:"flex-1",children:[f.map(o=>e.jsx($e,{className:`mb-2 cursor-pointer hover:bg-gray-50 ${s&&s.id===o.id?"border-primary":""}`,onClick:()=>{c(o),p({}),j({}),y({}),C({})},children:e.jsxs(Ue,{className:"py-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Fe,{className:"text-sm",children:o.name||o.id}),e.jsxs(_,{variant:"outline",className:"text-xs",children:[o.actions.length," actions"]})]}),e.jsx(He,{className:"text-xs text-gray-500",children:o.type})]})},o.id)),f.length===0&&e.jsx("div",{className:"text-center text-gray-500",children:"No components found"})]})]}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col",children:[!s&&e.jsx(pt,{}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:s.name||s.id}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(_,{children:s.type}),e.jsx(_,{variant:"outline",children:s.path})]}),s.description&&e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:s.description})]}),e.jsx(Q,{className:"flex-1",children:e.jsx(ut,{type:"multiple",className:"space-y-2",children:s.actions.map(o=>{var g;const m=((g=o.parameters)==null?void 0:g.reduce((h,v)=>{const O=d[v.name]!==void 0&&d[v.name]!==""?d[v.name]:ht(v);return{...h,[v.name]:O}},{}))||{},b=E[o.id]||"js";return e.jsxs(Ee,{value:o.id,className:"border rounded-md",children:[e.jsx(Re,{className:"flex justify-between items-center p-4",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:o.name}),e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:o.id})]})}),e.jsxs(Pe,{className:"p-4 border-t flex flex-col",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(ie,{value:b,onValueChange:h=>C(v=>({...v,[o.id]:h})),children:[e.jsxs(le,{className:"flex justify-end space-x-2",children:[e.jsx(k,{value:"js",children:"JavaScript"}),e.jsx(k,{value:"react",children:"React"})]}),e.jsx(L,{value:"js",children:e.jsx("pre",{className:"language-js bg-gray-100 p-2 rounded overflow-auto text-left whitespace-pre",children:e.jsx("code",{children:`// JavaScript example
const result = await executeAction('${s.id}', '${o.id}', ${JSON.stringify(m,null,2)});
console.log(result);`})})}),e.jsx(L,{value:"react",children:e.jsx("pre",{className:"language-tsx bg-gray-100 p-2 rounded overflow-auto text-left whitespace-pre",children:e.jsx("code",{children:`// React example
import React from 'react';
import { useApi } from '@/api/hooks/useApi';

function MyComponent() {
  const { executeAction } = useApi();

  React.useEffect(() => {
    (async () => {
      const result = await executeAction('${s.id}', '${o.id}', ${JSON.stringify(m,null,2)});
      console.log(result);
    })();
  }, [executeAction]);

  return null;
}`})})})]})}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:o.description}),o.parameters&&o.parameters.length>0&&e.jsx("div",{className:"mb-4",children:o.parameters.map(h=>e.jsx(mt,{parameter:h,value:d[h.name],onChange:S},h.name))}),e.jsx(ce,{onClick:()=>I(o),disabled:A[o.id]||o.parameters&&o.parameters.some(h=>h.required&&(d[h.name]===void 0||d[h.name]==="")),children:A[o.id]?"Executing...":"Execute"}),x[o.id]!=null&&e.jsxs("div",{className:`mt-4 p-4 rounded-md ${x[o.id].success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"} text-left`,children:[e.jsx("div",{className:"font-medium",children:x[o.id].success?"Success":"Error"}),x[o.id].error&&e.jsx("div",{className:"text-red-600 mt-1",children:x[o.id].error}),e.jsx("pre",{className:"mt-3 text-xs bg-gray-100 p-2 rounded overflow-auto text-left whitespace-pre",children:JSON.stringify(x[o.id],null,2)})]})]})]},o.id)})})})]})]})]})},xt=()=>{const t=q(),[n,r]=u.useState(null),a=()=>{if(t){const i=t.getOpenApiSpec();r(i)}};return u.useEffect(()=>{a()},[t]),{spec:n,refreshSpec:a}},Z=()=>{document.querySelectorAll(".swagger-ui .parameters-col_description").forEach(n=>{const r=n.querySelector("input, select, textarea");if(!r)return;const a=n.closest(".opblock");if(!a)return;const i=a.getAttribute("data-tag")||"",l=r.getAttribute("name")||"";if(i&&l){const s=`param-${i}-${l}`;r.setAttribute("id",s),n.querySelectorAll("label").forEach(d=>{d.setAttribute("for",s)})}})},ee=()=>{document.querySelectorAll('.swagger-ui a[href^="#"]').forEach(n=>{n.addEventListener("click",r=>{const a=n.getAttribute("href");if(a&&a.startsWith("#")){r.preventDefault();const i=a.substring(1),l=document.getElementById(i);l&&l.scrollIntoView({behavior:"smooth"})}})})},gt=`
  /* Make ALL Swagger UI response preview text terminal green for JSON */
  .swagger-ui .microlight,
  .swagger-ui .microlight *,
  .swagger-ui pre.microlight,
  .swagger-ui pre.microlight *,
  .swagger-ui .response .microlight,
  .swagger-ui .response .microlight *,
  .swagger-ui .response .microlight code,
  .swagger-ui .response .microlight code *,
  .swagger-ui .highlight-code pre,
  .swagger-ui .highlight-code pre *,
  .swagger-ui .highlight-code code,
  .swagger-ui .highlight-code code * {
    color: #00ff00 !important; /* Terminal green */
    background: #222 !important;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    font-size: 14px;
  }
  /* Prevent input field resets by fixing the id attributes */
  .swagger-ui input[id^="parameter"] {
    font-family: ui-monospace, monospace;
  }

  /* Better consistency in button styling */
  .swagger-ui .btn {
    font-family: inherit;
  }

  /* Improve readability */
  .swagger-ui .opblock .opblock-summary-description {
    text-align: right;
    padding-right: 10px;
  }

  /* Fix code block styling */
  .swagger-ui .highlight-code pre {
    font-size: 13px;
  }

  /* Fix response styling */
  .swagger-ui .responses-table .response-col_status {
    font-family: ui-monospace, monospace;
  }
  
  /* Preserve input values by preventing hidden inputs */
  .swagger-ui .parameters-container .parameters {
    display: block !important;
  }
`;let te=!1;function bt(t){if(te)return;te=!0;const n=window.fetch,r=window.XMLHttpRequest;window.fetch=async function(i,l){const s=i instanceof Request?i.url:String(i);return s.includes("/api/")?se(s,l,t()):n.apply(window,[i,l])};class a extends r{constructor(){super(...arguments);U(this,"_url","");U(this,"_method","")}open(s,c,d,p,x){return this._url=c.toString(),this._method=s,super.open(s,c,d,p,x)}send(s){if(this._url.includes("/api/")){se(this._url,{method:this._method,body:s},t()).then(c=>c.text()).then(c=>{Object.defineProperty(this,"status",{value:200,writable:!1}),Object.defineProperty(this,"statusText",{value:"OK",writable:!1}),Object.defineProperty(this,"responseText",{value:c,writable:!1}),Object.defineProperty(this,"response",{value:c,writable:!1}),Object.defineProperty(this,"readyState",{value:4,writable:!1});const d=new ProgressEvent("load",{lengthComputable:!0,loaded:c.length,total:c.length});this.onload&&this.onload.call(this,d),this.onreadystatechange&&this.onreadystatechange.call(this,d)}).catch(c=>{const d=JSON.stringify({error:c.message});Object.defineProperty(this,"status",{value:400,writable:!1}),Object.defineProperty(this,"statusText",{value:"Bad Request",writable:!1}),Object.defineProperty(this,"responseText",{value:d,writable:!1}),Object.defineProperty(this,"response",{value:d,writable:!1}),Object.defineProperty(this,"readyState",{value:4,writable:!1});const p=new ProgressEvent("error",{lengthComputable:!0,loaded:0,total:0});this.onerror&&this.onerror.call(this,p),this.onreadystatechange&&this.onreadystatechange.call(this,p)});return}return super.send(s)}}window.XMLHttpRequest=a}async function se(t,n,r){let a;const i=t.indexOf("/api/");if(i!==-1)a=t.substring(i+4);else return fetch(t,n);const l=a.split("/").filter(Boolean);if(l.length>=2){const s=l[0],c=l[1];let d={};if(n&&n.body)try{d=JSON.parse(n.body.toString())}catch{}try{const p=await r(s,c,d);return new Response(JSON.stringify(p),{status:200,headers:{"Content-Type":"application/json"}})}catch(p){return new Response(JSON.stringify({success:!1,error:p instanceof Error?p.message:String(p)}),{status:400,headers:{"Content-Type":"application/json"}})}}return fetch(t,n)}const vt=()=>{const{spec:t,refreshSpec:n}=xt(),{executeAction:r}=q(),a=u.useMemo(()=>t,[t]);u.useEffect(()=>{const s=document.createElement("style");return s.textContent=gt,document.head.appendChild(s),()=>{document.head.removeChild(s)}},[]);const i=w.useRef(null);u.useEffect(()=>{if(!i.current)return;const s=new MutationObserver(c=>{c.some(p=>p.addedNodes.length>0)&&(Z(),ee())});return s.observe(i.current,{childList:!0,subtree:!0}),()=>s.disconnect()},[]),u.useEffect(()=>{bt(()=>r)},[r]),u.useEffect(()=>{const s=c=>{if(c.newURL.includes("/#/")){if(c.preventDefault(),c.stopPropagation(),window.history.replaceState){const d=window.location.href.split("#")[0];window.history.replaceState(null,"",d)}return!1}};return window.addEventListener("hashchange",s),()=>{window.removeEventListener("hashchange",s)}},[]);const l={docExpansion:"list",defaultModelsExpandDepth:1,deepLinking:!1,showExtensions:!0,showCommonExtensions:!0,displayRequestDuration:!0,tryItOutEnabled:!0,persistAuthorization:!0};return u.useEffect(()=>{if(t){const s=setTimeout(()=>{Z(),ee()},500);return()=>clearTimeout(s)}},[t]),t?e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"API Documentation"}),e.jsxs(ce,{variant:"outline",size:"sm",onClick:n,title:"Refresh API documentation",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsxs("div",{className:"flex-1 overflow-auto",id:"swagger-ui-container",ref:i,children:[" ",e.jsx(Ge,{spec:a,...l,supportedSubmitMethods:["get","post","put","delete"],requestInterceptor:s=>(console.log("ðŸ” SWAGGER UI REQUEST INTERCEPTOR:",s),console.log("  - URL:",s.url),console.log("  - Method:",s.method),console.log("  - Body:",s.body),console.log("  - Headers:",s.headers),s),responseInterceptor:s=>(console.log("ðŸ“¨ SWAGGER UI RESPONSE INTERCEPTOR:",s),console.log("  - Status:",s.status),console.log("  - URL:",s.url),console.log("  - Body:",s.body),s)})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{children:"Loading API documentation..."})})},jt=()=>{const[t,n]=u.useState("frontend");return e.jsx("div",{className:"h-full flex flex-col api-explorer-isolated",children:e.jsxs(ie,{value:t,onValueChange:r=>n(r),className:"flex-1 flex flex-col",children:[e.jsxs(le,{className:"w-full justify-start mb-4",children:[e.jsx(k,{value:"frontend",children:"Frontend Explorer"}),e.jsx(k,{value:"swagger",children:"Swagger UI (FastAPI Style)"})]}),e.jsx(L,{value:"swagger",className:"flex-1",children:e.jsx(vt,{})}),e.jsx(L,{value:"frontend",className:"flex-1",children:e.jsx(ft,{})})]})})},_t={id:Y.id,manifest:Y,init:async()=>{console.log("API Explorer plugin initialized")},render:()=>e.jsx(jt,{})};export{_t as default};
