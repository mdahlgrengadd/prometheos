import{j as e,r as p}from"./index-083NKF3F.js";import{F as L,k as f,l as v,n as y,o as E,G as j,I as u,B as m,S as z}from"./MacroContext-CKQQxsFu.js";import{L as x}from"./label-CxE3Ev0W.js";import{T as B}from"./textarea-66eCpzJw.js";import"./monaco-editor-Dq6WuQlL.js";class M{async execute(h,i,N){var r,o;if(typeof globalThis<"u"&&"desktop"in globalThis){const g=globalThis;if((o=(r=g.desktop)==null?void 0:r.api)!=null&&o.execute)return g.desktop.api.execute(h,i,N)}throw new Error("Desktop API bridge not available")}}const c=new M,d={async open(n){return c.execute("services","open",n)},async kill(n){return c.execute("services","kill",n)},async restart(n){return c.execute("services","restart",n)},async notify(n){return c.execute("services","notify",n)},async openDialog(n){return c.execute("services","openDialog",n)},async waitForEvent(n){return c.execute("services","waitForEvent",n)},async listEvents(n={}){return c.execute("services","listEvents",n)},async emitEvent(n){return c.execute("services","emitEvent",n)}};c.execute.bind(c);const H=()=>{const[n,h]=p.useState([]),[i,N]=p.useState("notepad"),[r,o]=p.useState("Hello from PrometheOS Test!"),[g,I]=p.useState("Test Dialog"),[w,k]=p.useState("This is a test dialog from PrometheOS Test App"),[S,A]=p.useState(""),[D,$]=p.useState(5e3),[a,C]=p.useState({}),s=t=>{const T=new Date().toLocaleTimeString();h(b=>[...b,`[${T}] ${t}`])},l=(t,T)=>{C(b=>({...b,[t]:T}))},O=async()=>{if(!i.trim()){s("❌ Error: App ID cannot be empty");return}l("launch",!0);try{s(`🚀 Launching app: ${i}`);const t=await d.open({appId:i.trim()});s(`✅ Launch result: ${JSON.stringify(t)}`)}catch(t){s(`❌ Launch error: ${t instanceof Error?t.message:String(t)}`)}finally{l("launch",!1)}},P=async()=>{if(!i.trim()){s("❌ Error: App ID cannot be empty");return}l("kill",!0);try{s(`🔴 Killing app: ${i}`);const t=await d.kill({appId:i.trim()});s(`✅ Kill result: ${JSON.stringify(t)}`)}catch(t){s(`❌ Kill error: ${t instanceof Error?t.message:String(t)}`)}finally{l("kill",!1)}},R=async()=>{if(!i.trim()){s("❌ Error: App ID cannot be empty");return}l("restart",!0);try{s(`🔄 Restarting app: ${i}`);const t=await d.restart({appId:i.trim()});s(`✅ Restart result: ${JSON.stringify(t)}`)}catch(t){s(`❌ Restart error: ${t instanceof Error?t.message:String(t)}`)}finally{l("restart",!1)}},F=async()=>{if(!r.trim()){s("❌ Error: Notification message cannot be empty");return}l("notify",!0);try{s(`📱 Sending notification: ${r}`);const t=await d.notify({message:r.trim(),type:"radix"});s(`✅ Notification result: ${JSON.stringify(t)}`)}catch(t){s(`❌ Notification error: ${t instanceof Error?t.message:String(t)}`)}finally{l("notify",!1)}},J=async()=>{if(!g.trim()){s("❌ Error: Dialog title cannot be empty");return}l("dialog",!0);try{s(`🔔 Opening dialog: ${g}`);const t=await d.openDialog({title:g.trim(),description:w.trim()||void 0,confirmLabel:"Yes",cancelLabel:"No"});s(`✅ Dialog result: ${JSON.stringify(t)}`)}catch(t){s(`❌ Dialog error: ${t instanceof Error?t.message:String(t)}`)}finally{l("dialog",!1)}},U=async()=>{l("listEvents",!0);try{s("📋 Listing available events...");const t=await d.listEvents();s(`✅ Events result: ${JSON.stringify(t)}`)}catch(t){s(`❌ List events error: ${t instanceof Error?t.message:String(t)}`)}finally{l("listEvents",!1)}},W=async()=>{if(!S.trim()){s("❌ Error: Event ID cannot be empty");return}l("waitEvent",!0);try{s(`⏳ Waiting for event: ${S} (timeout: ${D}ms)`);const t=await d.waitForEvent({eventId:S.trim(),timeout:D});s(`✅ Event wait result: ${JSON.stringify(t)}`)}catch(t){s(`❌ Wait for event error: ${t instanceof Error?t.message:String(t)}`)}finally{l("waitEvent",!1)}},K=()=>{h([])};return e.jsxs("div",{className:"p-4 h-full flex flex-col gap-4 overflow-hidden",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-purple-600",children:"PrometheOS Test App"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Test the prometheos-client library functionality"})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(f,{children:[e.jsxs(v,{children:[e.jsx(y,{className:"text-lg",children:"🚀 App Launcher"}),e.jsx(E,{children:"Launch and kill applications"})]}),e.jsxs(j,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"appId",children:"App ID"}),e.jsx(u,{id:"appId",value:i,onChange:t=>N(t.target.value),placeholder:"e.g., notepad, calculator, browser"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{onClick:O,disabled:a.launch,className:"flex-1",children:a.launch?"Launching...":"Launch App"}),e.jsx(m,{onClick:P,disabled:a.kill,variant:"destructive",className:"flex-1",children:a.kill?"Killing...":"Kill App"}),e.jsx(m,{onClick:R,disabled:a.restart,variant:"outline",className:"flex-1",children:a.restart?"Restarting...":"Restart App"})]})]})]}),e.jsxs(f,{children:[e.jsxs(v,{children:[e.jsx(y,{className:"text-lg",children:"📱 Notifications"}),e.jsx(E,{children:"Send notification messages"})]}),e.jsxs(j,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"message",children:"Message"}),e.jsx(u,{id:"message",value:r,onChange:t=>o(t.target.value),placeholder:"Enter notification message"})]}),e.jsx(m,{onClick:F,disabled:a.notify,className:"w-full",children:a.notify?"Sending...":"Send Notification"})]})]}),e.jsxs(f,{children:[e.jsxs(v,{children:[e.jsx(y,{className:"text-lg",children:"🔔 Dialog"}),e.jsx(E,{children:"Open confirmation dialogs"})]}),e.jsxs(j,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"dialogTitle",children:"Title"}),e.jsx(u,{id:"dialogTitle",value:g,onChange:t=>I(t.target.value),placeholder:"Dialog title"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"dialogDescription",children:"Description"}),e.jsx(u,{id:"dialogDescription",value:w,onChange:t=>k(t.target.value),placeholder:"Dialog description (optional)"})]}),e.jsx(m,{onClick:J,disabled:a.dialog,className:"w-full",children:a.dialog?"Opening...":"Open Dialog"})]})]}),e.jsxs(f,{children:[e.jsxs(v,{children:[e.jsx(y,{className:"text-lg",children:"⏳ Events"}),e.jsx(E,{children:"List and wait for events"})]}),e.jsxs(j,{className:"space-y-3",children:[e.jsx(m,{onClick:U,disabled:a.listEvents,className:"w-full",variant:"outline",children:a.listEvents?"Loading...":"List Available Events"}),e.jsx(z,{}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"eventId",children:"Event ID"}),e.jsx(u,{id:"eventId",value:S,onChange:t=>A(t.target.value),placeholder:"e.g., plugin:openWindow"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"timeout",children:"Timeout (ms)"}),e.jsx(u,{id:"timeout",type:"number",value:D,onChange:t=>$(Number(t.target.value)),placeholder:"5000"})]}),e.jsx(m,{onClick:W,disabled:a.waitEvent,className:"w-full",children:a.waitEvent?"Waiting...":"Wait for Event"})]})]})]})}),e.jsxs(f,{className:"flex-shrink-0",children:[e.jsx(v,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-lg",children:"📋 Activity Logs"}),e.jsx(m,{onClick:K,variant:"outline",size:"sm",children:"Clear Logs"})]})}),e.jsx(j,{children:e.jsx(B,{value:n.join(`
`),readOnly:!0,className:"h-32 font-mono text-sm resize-none",placeholder:"Activity logs will appear here..."})})]})]})},G=()=>{const[n,h]=p.useState([]),i=r=>{h(o=>[...o,`[${new Date().toLocaleTimeString()}] ${r}`])},N=async()=>{i("🚀 Starting Unified API Demo from TypeScript");try{i("📱 Testing services.notify()..."),await d.notify({message:"TypeScript Unified Client Test!",type:"radix"}),i("✅ Launcher notification sent successfully"),i("💬 Testing services.openDialog()...");const r=await d.openDialog({title:"TypeScript Unified API Test",description:"This demonstrates the TypeScript side of the unified API",confirmLabel:"Awesome!",cancelLabel:"Close"});i(`✅ Dialog result: ${JSON.stringify(r)}`),i("📋 Testing services.listEvents()...");const o=await d.listEvents();i(`✅ Events retrieved: ${JSON.stringify(o)}`),i("🎉 TypeScript Unified API Demo completed successfully!")}catch(r){i(`❌ Error: ${r instanceof Error?r.message:String(r)}`)}};return e.jsxs(f,{className:"mb-4",children:[e.jsxs(v,{children:[e.jsx(y,{children:"🔗 Unified API Demo"}),e.jsx(E,{children:"Demonstrates the unified PrometheOS client working in TypeScript"})]}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{onClick:N,className:"w-full",children:"🚀 Run TypeScript Unified API Demo"}),n.length>0&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Test Results:"}),e.jsx("div",{className:"space-y-1 text-sm font-mono",children:n.map((r,o)=>e.jsx("div",{className:"text-xs",children:r},o))})]})]})})]})},Z={id:L.id,manifest:L,init:async()=>{console.log("PrometheOS Test plugin initialized")},render:()=>e.jsxs("div",{children:[e.jsx(H,{}),e.jsx(G,{})]})};export{Z as default};
