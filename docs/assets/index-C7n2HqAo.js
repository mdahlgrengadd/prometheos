import{j as e,r as c}from"./index-44x_W5Rw.js";import{F as A,k as x,l as f,n as v,o as N,G as j,I as g,B as d,S as B}from"./MacroContext-B_6FUGbE.js";import{L as m}from"./label-DxrZtnVq.js";import{T as M}from"./textarea-c6MHBxRr.js";import"./monaco-editor-Dq6WuQlL.js";class H{async execute(u,i,y){var a,o;if(typeof globalThis<"u"&&"desktop"in globalThis){const h=globalThis;if((o=(a=h.desktop)==null?void 0:a.api)!=null&&o.execute)return h.desktop.api.execute(u,i,y)}throw new Error("Desktop API bridge not available")}}const p=new H,S={async launchApp(n){return p.execute("launcher","launchApp",n)},async killApp(n){return p.execute("launcher","killApp",n)},async notify(n){return p.execute("launcher","notify",n)}},L={async openDialog(n){return p.execute("dialog","openDialog",n)}},G={async waitForEvent(n){return p.execute("onEvent","waitForEvent",n)}},I={async listEvents(n={}){return p.execute("event","listEvents",n)}};p.execute.bind(p);const Y=()=>{const[n,u]=c.useState([]),[i,y]=c.useState("notepad"),[a,o]=c.useState("Hello from PrometheOS Test!"),[h,k]=c.useState("Test Dialog"),[w,C]=c.useState("This is a test dialog from PrometheOS Test App"),[E,$]=c.useState(""),[D,O]=c.useState(5e3),[l,P]=c.useState({}),s=t=>{const T=new Date().toLocaleTimeString();u(b=>[...b,`[${T}] ${t}`])},r=(t,T)=>{P(b=>({...b,[t]:T}))},F=async()=>{if(!i.trim()){s("❌ Error: App ID cannot be empty");return}r("launch",!0);try{s(`🚀 Launching app: ${i}`);const t=await S.launchApp({appId:i.trim()});s(`✅ Launch result: ${JSON.stringify(t)}`)}catch(t){s(`❌ Launch error: ${t instanceof Error?t.message:String(t)}`)}finally{r("launch",!1)}},J=async()=>{if(!i.trim()){s("❌ Error: App ID cannot be empty");return}r("kill",!0);try{s(`🔴 Killing app: ${i}`);const t=await S.killApp({appId:i.trim()});s(`✅ Kill result: ${JSON.stringify(t)}`)}catch(t){s(`❌ Kill error: ${t instanceof Error?t.message:String(t)}`)}finally{r("kill",!1)}},U=async()=>{if(!a.trim()){s("❌ Error: Notification message cannot be empty");return}r("notify",!0);try{s(`📱 Sending notification: ${a}`);const t=await S.notify({message:a.trim(),type:"radix"});s(`✅ Notification result: ${JSON.stringify(t)}`)}catch(t){s(`❌ Notification error: ${t instanceof Error?t.message:String(t)}`)}finally{r("notify",!1)}},R=async()=>{if(!h.trim()){s("❌ Error: Dialog title cannot be empty");return}r("dialog",!0);try{s(`🔔 Opening dialog: ${h}`);const t=await L.openDialog({title:h.trim(),description:w.trim()||void 0,confirmLabel:"Yes",cancelLabel:"No"});s(`✅ Dialog result: ${JSON.stringify(t)}`)}catch(t){s(`❌ Dialog error: ${t instanceof Error?t.message:String(t)}`)}finally{r("dialog",!1)}},W=async()=>{r("listEvents",!0);try{s("📋 Listing available events...");const t=await I.listEvents();s(`✅ Events result: ${JSON.stringify(t)}`)}catch(t){s(`❌ List events error: ${t instanceof Error?t.message:String(t)}`)}finally{r("listEvents",!1)}},K=async()=>{if(!E.trim()){s("❌ Error: Event ID cannot be empty");return}r("waitEvent",!0);try{s(`⏳ Waiting for event: ${E} (timeout: ${D}ms)`);const t=await G.waitForEvent({eventId:E.trim(),timeout:D});s(`✅ Event wait result: ${JSON.stringify(t)}`)}catch(t){s(`❌ Wait for event error: ${t instanceof Error?t.message:String(t)}`)}finally{r("waitEvent",!1)}},z=()=>{u([])};return e.jsxs("div",{className:"p-4 h-full flex flex-col gap-4 overflow-hidden",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-purple-600",children:"PrometheOS Test App"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Test the prometheos-client library functionality"})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsx(v,{className:"text-lg",children:"🚀 App Launcher"}),e.jsx(N,{children:"Launch and kill applications"})]}),e.jsxs(j,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"appId",children:"App ID"}),e.jsx(g,{id:"appId",value:i,onChange:t=>y(t.target.value),placeholder:"e.g., notepad, calculator, browser"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{onClick:F,disabled:l.launch,className:"flex-1",children:l.launch?"Launching...":"Launch App"}),e.jsx(d,{onClick:J,disabled:l.kill,variant:"destructive",className:"flex-1",children:l.kill?"Killing...":"Kill App"})]})]})]}),e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsx(v,{className:"text-lg",children:"📱 Notifications"}),e.jsx(N,{children:"Send notification messages"})]}),e.jsxs(j,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"message",children:"Message"}),e.jsx(g,{id:"message",value:a,onChange:t=>o(t.target.value),placeholder:"Enter notification message"})]}),e.jsx(d,{onClick:U,disabled:l.notify,className:"w-full",children:l.notify?"Sending...":"Send Notification"})]})]}),e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsx(v,{className:"text-lg",children:"🔔 Dialog"}),e.jsx(N,{children:"Open confirmation dialogs"})]}),e.jsxs(j,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"dialogTitle",children:"Title"}),e.jsx(g,{id:"dialogTitle",value:h,onChange:t=>k(t.target.value),placeholder:"Dialog title"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"dialogDescription",children:"Description"}),e.jsx(g,{id:"dialogDescription",value:w,onChange:t=>C(t.target.value),placeholder:"Dialog description (optional)"})]}),e.jsx(d,{onClick:R,disabled:l.dialog,className:"w-full",children:l.dialog?"Opening...":"Open Dialog"})]})]}),e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsx(v,{className:"text-lg",children:"⏳ Events"}),e.jsx(N,{children:"List and wait for events"})]}),e.jsxs(j,{className:"space-y-3",children:[e.jsx(d,{onClick:W,disabled:l.listEvents,className:"w-full",variant:"outline",children:l.listEvents?"Loading...":"List Available Events"}),e.jsx(B,{}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"eventId",children:"Event ID"}),e.jsx(g,{id:"eventId",value:E,onChange:t=>$(t.target.value),placeholder:"e.g., plugin:openWindow"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"timeout",children:"Timeout (ms)"}),e.jsx(g,{id:"timeout",type:"number",value:D,onChange:t=>O(Number(t.target.value)),placeholder:"5000"})]}),e.jsx(d,{onClick:K,disabled:l.waitEvent,className:"w-full",children:l.waitEvent?"Waiting...":"Wait for Event"})]})]})]})}),e.jsxs(x,{className:"flex-shrink-0",children:[e.jsx(f,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v,{className:"text-lg",children:"📋 Activity Logs"}),e.jsx(d,{onClick:z,variant:"outline",size:"sm",children:"Clear Logs"})]})}),e.jsx(j,{children:e.jsx(M,{value:n.join(`
`),readOnly:!0,className:"h-32 font-mono text-sm resize-none",placeholder:"Activity logs will appear here..."})})]})]})},q=()=>{const[n,u]=c.useState([]),i=a=>{u(o=>[...o,`[${new Date().toLocaleTimeString()}] ${a}`])},y=async()=>{i("🚀 Starting Unified API Demo from TypeScript");try{i("📱 Testing launcher.notify()..."),await S.notify({message:"TypeScript Unified Client Test!",type:"radix"}),i("✅ Launcher notification sent successfully"),i("💬 Testing dialog.openDialog()...");const a=await L.openDialog({title:"TypeScript Unified API Test",description:"This demonstrates the TypeScript side of the unified API",confirmLabel:"Awesome!",cancelLabel:"Close"});i(`✅ Dialog result: ${JSON.stringify(a)}`),i("📋 Testing event.listEvents()...");const o=await I.listEvents();i(`✅ Events retrieved: ${JSON.stringify(o)}`),i("🎉 TypeScript Unified API Demo completed successfully!")}catch(a){i(`❌ Error: ${a instanceof Error?a.message:String(a)}`)}};return e.jsxs(x,{className:"mb-4",children:[e.jsxs(f,{children:[e.jsx(v,{children:"🔗 Unified API Demo"}),e.jsx(N,{children:"Demonstrates the unified PrometheOS client working in TypeScript"})]}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{onClick:y,className:"w-full",children:"🚀 Run TypeScript Unified API Demo"}),n.length>0&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Test Results:"}),e.jsx("div",{className:"space-y-1 text-sm font-mono",children:n.map((a,o)=>e.jsx("div",{className:"text-xs",children:a},o))})]})]})})]})},ee={id:A.id,manifest:A,init:async()=>{console.log("PrometheOS Test plugin initialized")},render:()=>e.jsxs("div",{children:[e.jsx(Y,{}),e.jsx(q,{})]})};export{ee as default};
