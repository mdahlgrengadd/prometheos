import{c as A,j as e,i as Oe,r as l,R as ee,J as Te}from"./index-CpAo7Lf-.js";import{F as te,S as Ae,a as Le}from"./settings-D0MUxPKr.js";import{a8 as Fe,a9 as Be,aa as $e,C as se,f as Ue,ab as he}from"./MacroContext-C3L8apHs.js";import{R as Ve}from"./refresh-cw-BmO8UDdH.js";import{H as ge}from"./house-DgUQ31p9.js";import"./monaco-editor-Dq6WuQlL.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=A("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=A("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=A("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=A("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=A("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=A("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=A("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=A("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=A("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Ze={id:"root",name:"My Computer",type:"folder",children:[{id:"desktop",name:"Desktop",type:"folder",children:[{id:"readme",name:"README.txt",type:"file",size:1024},{id:"image1",name:"vacation.jpg",type:"file",size:2048e3},{id:"screenshot",name:"screenshot.png",type:"file",size:512e3},{id:"notes",name:"notes.txt",type:"file",size:256}]},{id:"documents",name:"Documents",type:"folder",children:[{id:"report",name:"Annual Report.docx",type:"file",size:512e3},{id:"presentation",name:"Presentation.pdf",type:"file",size:1024e3},{id:"projects",name:"Projects",type:"folder",children:[{id:"website-project",name:"Website",type:"folder",children:[{id:"index-html",name:"index.html",type:"file",size:4096},{id:"style-css",name:"style.css",type:"file",size:2048},{id:"app-js",name:"app.js",type:"file",size:8192}]},{id:"python-script",name:"script.py",type:"file",size:1536}]}]},{id:"downloads",name:"Downloads",type:"folder",children:[{id:"installer",name:"installer.exe",type:"file",size:104857600},{id:"song",name:"favorite-song.mp3",type:"file",size:5242880},{id:"video",name:"tutorial.mp4",type:"file",size:52428800},{id:"archive",name:"backup.zip",type:"file",size:10485760}]}]},ye=s=>{var a;if(s.type==="folder")return e.jsx(te,{className:"w-4 h-4 text-blue-500"});switch((a=s.name.split(".").pop())==null?void 0:a.toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"webp":return e.jsx($e,{className:"w-4 h-4 text-green-500"});case"txt":case"doc":case"docx":case"pdf":case"rtf":return e.jsx(Le,{className:"w-4 h-4 text-red-500"});case"mp3":case"wav":case"flac":case"ogg":return e.jsx(Be,{className:"w-4 h-4 text-purple-500"});case"mp4":case"avi":case"mkv":case"mov":case"wmv":return e.jsx(Ye,{className:"w-4 h-4 text-orange-500"});case"zip":case"rar":case"7z":case"tar":case"gz":return e.jsx(Ie,{className:"w-4 h-4 text-yellow-500"});case"js":case"ts":case"html":case"css":case"py":case"java":case"cpp":case"c":case"php":return e.jsx(Fe,{className:"w-4 h-4 text-cyan-500"});case"exe":case"msi":case"dmg":return e.jsx(Ae,{className:"w-4 h-4 text-indigo-500"});default:return e.jsx(Je,{className:"w-4 h-4 text-gray-500"})}},Qe=s=>{if(s===0)return"0 Bytes";const n=1024,a=["Bytes","KB","MB","GB","TB"],i=Math.floor(Math.log(s)/Math.log(n));return parseFloat((s/Math.pow(n,i)).toFixed(2))+" "+a[i]},ae=(s,n,a=["root"])=>{if(s.id===n)return a;if(s.children)for(const i of s.children){const p=ae(i,n,[...a,i.id]);if(p)return p}return null};var Q={boxFlex:!0,boxFlexGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0};function et(s,n){return s+n.charAt(0).toUpperCase()+n.substring(1)}var tt=["Webkit","ms","Moz","O"];Object.keys(Q).forEach(function(s){tt.forEach(function(n){Q[et(n,s)]=Q[s]})});var nt={isUnitlessNumber:Q},rt=nt,st=/^ms-/,at=/([A-Z])/g;function ot(s){return s.replace(at,"-$1").toLowerCase()}function lt(s){return ot(s).replace(st,"-ms-")}var it=lt,ct=rt.isUnitlessNumber,dt=it,ut=Array.isArray,fe=Object.keys,pt=/^(normal|none|(\b(url\([^)]*\)|chapter_counter|attr\([^)]*\)|(no-)?(open|close)-quote|inherit)((\b\s*)|$|\s+))+)$/;function me(s,n){return!ct[s]&&typeof n=="number"?n=""+n+"px":s==="content"&&!pt.test(n)&&(n="'"+n.replace(/'/g,"\\'")+"'"),dt(s)+": "+n+";  "}function ht(s){var n="";if(!s||fe(s).length===0)return n;for(var a=fe(s),i=0,p=a.length;i<p;i++){var c=a[i],x=s[c];if(ut(x))for(var d=0,u=x.length;d<u;d++)n+=me(c,x[d]);else n+=me(c,x)}return n}var ft=ht;const xe=Oe(ft);function W(){return W=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(s[i]=a[i])}return s},W.apply(this,arguments)}const mt=["style"],xt=l.forwardRef((s,n)=>{let{style:a={}}=s,i=function(d,u){if(d==null)return{};var S,R,t={},h=Object.keys(d);for(R=0;R<h.length;R++)u.indexOf(S=h[R])>=0||(t[S]=d[S]);return t}(s,mt);const p=l.useRef(null),c=l.useRef(null),[,x]=l.useState(0);return l.useImperativeHandle(n,()=>({getBoundingClientRect:()=>{var d;return(d=p.current)==null?void 0:d.getBoundingClientRect()},getParentBoundingClientRect:()=>{var d,u;return p==null||(d=p.current)==null||(u=d.parentElement)==null?void 0:u.getBoundingClientRect()},drawSelectionBox:d=>{requestAnimationFrame(()=>{if(c.current){const u=W({border:"1px solid #4C85D8",background:"rgba(155, 193, 239, 0.4)",position:"absolute",pointerEvents:"none"},a,{top:d.top,left:d.left,width:d.width,height:d.height});c.current.style.cssText=xe(u)}})},clearSelectionBox:()=>{requestAnimationFrame(()=>{c.current&&(c.current.style.cssText=xe({top:0,left:0,width:0,height:0}))})}})),l.useEffect(()=>{x(d=>d+1)},[]),ee.createElement("div",{ref:p},p.current?Te.createPortal(ee.createElement("div",W({ref:c},i)),p.current):null)});function gt(s){return(n=>n.width*n.height)(s)>10}function yt(s){const{onSelectionChange:n,onSelectionEnd:a,onSelectionStart:i,isEnabled:p=!0,selectionProps:c={},eventsElement:x,shouldStartSelecting:d,isValidSelectionStart:u}=s||{},S=l.useRef(null),{cancelCurrentSelection:R}=function({containerRef:t,onSelectionChange:h,onSelectionStart:v,onSelectionEnd:L,isEnabled:k=!0,eventsElement:j,shouldStartSelecting:w,isValidSelectionStart:F=gt}){const E=l.useRef(null),$=l.useRef(null),U=l.useRef(!1),P=l.useRef(h),I=l.useRef(v),X=l.useRef(L),J=l.useRef(),ne=l.useRef(k);P.current=l.useCallback(m=>{J.current=h?requestAnimationFrame(()=>{h(m)}):void 0},[h]),I.current=v,X.current=L,ne.current=k;const V=l.useCallback(()=>{var m;E.current=null,$.current=null,U.current=!1,(m=t.current)==null||m.clearSelectionBox(),typeof J.current=="number"&&cancelAnimationFrame(J.current)},[t]),G=l.useCallback((m,b)=>{var z,O,H;return b||(b=(H=t.current)==null?void 0:H.getParentBoundingClientRect()),{x:m.clientX-(typeof((z=b)==null?void 0:z.left)=="number"?b.left:0),y:m.clientY-(typeof((O=b)==null?void 0:O.top)=="number"?b.top:0)}},[t]),_=l.useCallback((m,b)=>{if(E.current&&$.current){if(!b)return;const O=(({startPoint:q,endPoint:K})=>({left:Math.min(q.x,K.x),top:Math.min(q.y,K.y),width:Math.abs(q.x-K.x),height:Math.abs(q.y-K.y)}))({startPoint:E.current,endPoint:$.current}),H=W({},O,{top:O.top+((b==null?void 0:b.top)||0),left:O.left+((b==null?void 0:b.left)||0)});var z;F(O)?(U.current||(I!=null&&I.current&&I.current(m),U.current=!0),(z=t.current)==null||z.drawSelectionBox(O),P.current==null||P.current(H)):U.current&&(P.current==null||P.current(H))}else V()},[V,t]),B=l.useCallback(m=>{var b;if(!E.current)return;const z=(b=t.current)==null?void 0:b.getParentBoundingClientRect();$.current=G(m,z),_(m,z)},[_,G,t]),D=l.useCallback(m=>{var b;m.button===0&&($.current&&(X.current==null||X.current(m)),V(),document.body.style.removeProperty("user-select"),document.body.style.removeProperty("-webkit-user-select"),(j||document.body).removeEventListener("mousemove",B),(b=window)==null||b.removeEventListener("mouseup",D))},[j,V,B]),Y=l.useCallback(m=>{if(m.button===0&&ne.current){var b;if(typeof w=="function"&&!w(m.target))return;document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",E.current=G(m),(j||document.body).addEventListener("mousemove",B),(b=window)==null||b.addEventListener("mouseup",D)}},[j,G,B,D]);return l.useEffect(()=>((j||document.body).addEventListener("mousedown",Y),()=>{(j||document.body).removeEventListener("mousedown",Y),(j||document.body).removeEventListener("mousemove",B),window.removeEventListener("mouseup",D)}),[j,Y,B,D]),{cancelCurrentSelection:V}}({containerRef:S,onSelectionEnd:a,onSelectionStart:i,onSelectionChange:n,isEnabled:p,eventsElement:x,shouldStartSelecting:d,isValidSelectionStart:u});return{cancelCurrentSelection:R,DragSelection:l.useCallback(()=>ee.createElement(xt,W({ref:S},c)),[])}}const bt=({isAuthenticated:s,user:n,handleGithubAuth:a,handleLogout:i})=>e.jsxs("div",{className:"h-8 bg-gray-900 text-white flex items-center justify-between px-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"File Explorer"})]}),e.jsx("div",{className:"flex items-center gap-2",children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:n==null?void 0:n.avatar_url,alt:"Avatar",className:"w-5 h-5 rounded-full border border-gray-600"}),e.jsx("span",{className:"text-xs font-medium",children:n==null?void 0:n.name}),e.jsx("button",{onClick:i,className:"p-1 hover:bg-gray-700 rounded transition-colors",title:"Sign out",children:e.jsx(_e,{className:"w-3 h-3"})})]}):e.jsxs("button",{onClick:a,className:"flex items-center gap-1 px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded text-xs transition-colors",children:[e.jsx(Ge,{className:"w-3 h-3"}),"Sign in with GitHub"]})})]}),vt=({currentPath:s,breadcrumbs:n,navigateUp:a,navigateToPathLevel:i,showNewItemDialog:p,fileInputRef:c,isAuthenticated:x,handleGithubAuth:d})=>e.jsxs("div",{className:"h-12 bg-gray-50 border-b border-gray-200 flex items-center px-4 gap-2",children:[e.jsx("button",{onClick:a,disabled:s.length<=1,className:"p-2 hover:bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Go up",children:e.jsx(se,{className:"w-4 h-4 rotate-180"})}),e.jsx("button",{className:"p-2 hover:bg-gray-200 rounded transition-colors",title:"Refresh",children:e.jsx(Ve,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex-1 mx-4",children:e.jsxs("div",{className:"flex items-center bg-white border border-gray-300 rounded px-3 py-1.5",children:[e.jsx(ge,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("button",{onClick:()=>i(0),className:"text-sm hover:text-blue-600 transition-colors",children:"This PC"}),n.map((u,S)=>e.jsxs("span",{className:"flex items-center",children:[e.jsx(se,{className:"w-3 h-3 text-gray-400 mx-1"}),e.jsx("button",{onClick:()=>i(S+1),className:"text-sm text-gray-600 hover:text-blue-600 transition-colors",children:u.name})]},u.id))]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("button",{onClick:()=>x?p():d(),className:"flex items-center gap-1 px-3 py-1.5 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm transition-colors disabled:opacity-50",title:x?"Create new item":"Sign in to create items",children:[e.jsx(Ke,{className:"w-4 h-4"}),"New"]}),e.jsx("button",{onClick:()=>{var u;return x?(u=c.current)==null?void 0:u.click():d()},className:"p-2 hover:bg-gray-200 rounded transition-colors",title:x?"Upload files":"Sign in to upload files",children:e.jsx(Xe,{className:"w-4 h-4"})})]})]}),wt=({fileSystem:s,expandedFolders:n,selectedItems:a,navigateToQuickAccess:i,toggleFolder:p,setSelectedItems:c,handleFolderDragOver:x,handleFolderDragLeave:d,handleFolderDrop:u,dragOverFolder:S})=>{const R=(t,h=0)=>{const v=n.has(t.id),L=a.has(t.id),k=t.type==="folder"&&t.children&&t.children.length>0,j=S===t.id;return e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center gap-2 py-1 px-2 hover:bg-gray-100 cursor-pointer transition-colors ${L?"bg-blue-100 text-blue-700":""} ${j?"bg-blue-100 border-blue-400":""}`,style:{paddingLeft:`${h*16+8}px`},onClick:()=>{t.type==="folder"&&(p(t.id),c(new Set([t.id])))},onDoubleClick:()=>{t.type==="folder"&&i(t.id)},onDragOver:w=>t.type==="folder"&&x&&x(t.id,w),onDragLeave:()=>t.type==="folder"&&d&&d(),onDrop:w=>t.type==="folder"&&u&&u(t.id,w),children:[t.type==="folder"&&e.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:k?v?e.jsx(Ue,{className:"w-3 h-3 text-gray-500"}):e.jsx(se,{className:"w-3 h-3 text-gray-500"}):e.jsx("div",{className:"w-3 h-3"})}),ye(t),e.jsx("span",{className:"text-sm truncate flex-1",children:t.name})]}),t.type==="folder"&&v&&t.children&&e.jsx("div",{children:t.children.map(w=>R(w,h+1))})]},t.id)};return e.jsxs("div",{className:"w-64 bg-gray-50 border-r border-gray-200 overflow-y-auto",children:[e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-3",children:"Quick Access"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>i("desktop"),className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm hover:bg-gray-200 rounded text-left transition-colors",onDragOver:t=>x&&x("desktop",t),onDragLeave:()=>d&&d(),onDrop:t=>u&&u("desktop",t),children:[e.jsx(ge,{className:"w-4 h-4 text-blue-500"}),"Desktop"]}),e.jsxs("button",{onClick:()=>i("documents"),className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm hover:bg-gray-200 rounded text-left transition-colors",onDragOver:t=>x&&x("documents",t),onDragLeave:()=>d&&d(),onDrop:t=>u&&u("documents",t),children:[e.jsx(te,{className:"w-4 h-4 text-blue-500"}),"Documents"]}),e.jsxs("button",{onClick:()=>i("downloads"),className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm hover:bg-gray-200 rounded text-left transition-colors",onDragOver:t=>x&&x("downloads",t),onDragLeave:()=>d&&d(),onDrop:t=>u&&u("downloads",t),children:[e.jsx(He,{className:"w-4 h-4 text-blue-500"}),"Downloads"]})]})]}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-3",children:"This PC"}),e.jsx("div",{className:"text-sm",children:R(s)})]})]})},jt=({items:s,selectedItems:n,setSelectedItems:a,navigateToFolder:i,setShowContextMenu:p,handleDragStart:c,handleFolderDragOver:x,handleFolderDragLeave:d,handleFolderDrop:u,dragOverFolder:S,selectionBox:R})=>e.jsx("div",{className:"mb-8",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"1rem",alignItems:"start"},children:s.map(t=>e.jsx("div",{"data-item-id":t.id,className:`p-3 border rounded-lg cursor-pointer hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 ${n.has(t.id)?"bg-blue-50 border-blue-300 shadow-sm":"border-gray-200"} ${S===t.id?"bg-blue-100 border-blue-400":""}`,onClick:h=>{if(h.stopPropagation(),h.ctrlKey||h.metaKey){const v=new Set(n);v.has(t.id)?v.delete(t.id):v.add(t.id),a(v)}else if(h.shiftKey&&n.size>0){const v=s.map(w=>w.id),L=Array.from(n).pop(),k=v.indexOf(L||""),j=v.indexOf(t.id);if(k>=0){const w=Math.min(k,j),F=Math.max(k,j),E=v.slice(w,F+1);a(new Set(E))}}else a(new Set([t.id]))},onDoubleClick:h=>{h.stopPropagation(),t.type==="folder"&&i(t.id)},onContextMenu:h=>{h.preventDefault(),h.stopPropagation(),n.has(t.id)||a(new Set([t.id])),p({x:h.clientX,y:h.clientY,itemId:t.id})},draggable:!0,onDragStart:h=>c&&c(t.id,h),onDragOver:h=>t.type==="folder"&&x&&x(t.id,h),onDragLeave:()=>t.type==="folder"&&d&&d(),onDrop:h=>t.type==="folder"&&u&&u(t.id,h),children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center mb-2",children:ee.cloneElement(ye(t),{className:`w-8 h-8 ${n.has(t.id)?"drop-shadow-sm":""}`})}),e.jsx("span",{className:"text-sm truncate w-full font-medium",title:t.name,children:t.name}),t.type==="file"&&t.size!==void 0&&e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:Qe(t.size)})]})},t.id))}),St=({position:s,itemId:n,onRename:a,onDelete:i,setShowContextMenu:p})=>e.jsxs("div",{className:"fixed bg-white border border-gray-200 rounded-lg shadow-xl py-2 z-50 min-w-48",style:{left:s.x,top:s.y},children:[e.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-3 transition-colors",onClick:c=>{c.stopPropagation(),a(n),p(null)},children:[e.jsx(qe,{className:"w-4 h-4"}),"Rename"]}),e.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-3 text-red-600 hover:bg-red-50 transition-colors",onClick:c=>{c.stopPropagation(),i(n)},children:[e.jsx(We,{className:"w-4 h-4"}),"Delete"]})]}),be=({title:s,inputValue:n,onInputChange:a,onCancel:i,onKeyDown:p,children:c})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s}),e.jsx("input",{type:"text",value:n,onChange:a,onKeyDown:p,placeholder:"Enter name...",className:"w-full px-3 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),c]})]})}),Nt=({newItemName:s,setNewItemName:n,setShowNewItemDialog:a,createNewItem:i,handleKeyDown:p})=>e.jsxs(be,{title:"Create New Item",inputValue:s,onInputChange:c=>n(c.target.value),onCancel:()=>{a(!1),n("")},onKeyDown:p,children:[e.jsx("button",{onClick:()=>i("folder"),disabled:!s.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Create Folder"}),e.jsx("button",{onClick:()=>i("file"),disabled:!s.trim(),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Create File"})]}),Ct=({newItemName:s,setNewItemName:n,setShowRenameDialog:a,renameItem:i,showRenameDialog:p})=>e.jsx(be,{title:"Rename Item",inputValue:s,onInputChange:c=>n(c.target.value),onCancel:()=>{a(null),n("")},onKeyDown:c=>{c.key==="Enter"&&s.trim()?i(p,s):c.key==="Escape"&&(a(null),n(""))},children:e.jsx("button",{onClick:()=>i(p,s),disabled:!s.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Rename"})}),kt=()=>{var ue,pe;const[s,n]=l.useState(Ze),[a,i]=l.useState(["root"]),[p,c]=l.useState(new Set),[x,d]=l.useState(new Set(["root","desktop","documents"])),[u,S]=l.useState(!1),[R,t]=l.useState(null),[h,v]=l.useState(null),[L,k]=l.useState(!1),[j,w]=l.useState(null),[F,E]=l.useState(""),[$,U]=l.useState(null),[P,I]=l.useState(null),[X,J]=l.useState(null),[ne,V]=l.useState(!1),[G,_]=l.useState(!1),B=l.useRef(null),D=l.useRef(null),{DragSelection:Y}=yt({onSelectionChange:K,isEnabled:G,shouldStartSelecting:r=>{if(r instanceof HTMLElement){let o=r;for(;o&&o!==D.current;){if(o.hasAttribute("data-item-id"))return!1;o=o.parentElement}return!0}return!1},selectionProps:{style:{border:"2px solid #3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",position:"absolute",zIndex:1e3}}}),m=l.useCallback(r=>{var f;let o=s;for(let g=1;g<r.length;g++){const y=(f=o.children)==null?void 0:f.find(N=>N.id===r[g]);if(!y)return null;o=y}return o},[s]),b=l.useCallback(()=>m(a),[m,a]),z=l.useCallback(r=>{const o=[...a,r];i(o),c(new Set),d(f=>new Set([...f,r]))},[a]),O=l.useCallback(()=>{a.length>1&&(i(a.slice(0,-1)),c(new Set))},[a]),H=l.useCallback(r=>{const o=a.slice(0,r+1);i(o),c(new Set)},[a]),q=l.useCallback(r=>{d(o=>{const f=new Set(o);return f.has(r)?f.delete(r):f.add(r),f})},[]);function K(r){if(!D.current||!r.width||!r.height)return;J(r);const o=D.current.querySelectorAll("[data-item-id]"),f=new Set;o.forEach(g=>{const y=g.getBoundingClientRect(),N=g.getAttribute("data-item-id");if(!N)return;const C=D.current.getBoundingClientRect(),M={left:y.left-C.left,top:y.top-C.top,right:y.right-C.left,bottom:y.bottom-C.top};!(M.right<r.left||M.left>r.left+r.width||M.bottom<r.top||M.top>r.top+r.height)&&f.add(N)}),c(f)}const ve=r=>{r.preventDefault(),r.dataTransfer.dropEffect="copy",r.currentTarget.classList.add("bg-blue-50","border-blue-300")},we=r=>{r.currentTarget.classList.remove("bg-blue-50","border-blue-300")},je=async r=>{r.preventDefault(),r.currentTarget.classList.remove("bg-blue-50","border-blue-300");const f=Array.from(r.dataTransfer.files);if(f.length>0&&u){const g=b();if(g&&g.children){const y=f.map(N=>({id:`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:N.name,type:"file",size:N.size}));n(N=>{const C=JSON.parse(JSON.stringify(N)),M=m(a);return M&&M.children&&(M.children=[...M.children,...y]),C})}}},oe=r=>{if(!F.trim()||!u)return;const o={id:`${r}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:F.trim(),type:r,...r==="folder"?{children:[]}:{size:0}};n(f=>{const g=JSON.parse(JSON.stringify(f)),y=m(a);return y&&y.children&&y.children.push(o),g}),E(""),k(!1)},Se=(r,o)=>{!o.trim()||!u||(n(f=>{const g=JSON.parse(JSON.stringify(f)),y=m(a);if(y&&y.children){const N=y.children.find(C=>C.id===r);N&&(N.name=o.trim())}return g}),w(null),E(""))},Ne=r=>{u&&(n(o=>{const f=JSON.parse(JSON.stringify(o)),g=m(a);return g&&g.children&&(g.children=g.children.filter(y=>y.id!==r)),f}),c(new Set),v(null))},le=()=>{S(!0),t({login:"developer-user",avatar_url:"https://github.com/github.png",name:"Developer User"})},Ce=()=>{S(!1),t(null),c(new Set)},ke=r=>{const o=ae(s,r);o&&(i(o),c(new Set))},Ee=r=>{r.key==="Enter"&&L&&F.trim()?oe("folder"):r.key==="Escape"&&(k(!1),w(null),v(null))},De=()=>{v(null)},Re=(r,o)=>{o.stopPropagation(),u&&(I(r),o.dataTransfer.setData("text/plain",r),o.dataTransfer.effectAllowed="move",p.has(r)||c(new Set([r])))},ie=(r,o)=>{o.preventDefault(),o.stopPropagation(),P&&P!==r&&(U(r),o.dataTransfer.dropEffect="move")},ce=()=>{U(null)},de=(r,o)=>{if(o.preventDefault(),o.stopPropagation(),U(null),!P||!u||P===r)return;let f=ae(s,r);if(!f)return;const g=Array.from(p);n(y=>{const N=JSON.parse(JSON.stringify(y)),C=m(a);if(!C||!C.children)return y;const M=C.children.filter(re=>g.includes(re.id));C.children=C.children.filter(re=>!g.includes(re.id));const Z=m(f);return!Z||!Z.children?y:(Z.children=[...Z.children,...M],N)}),I(null)},Me=r=>{if(r.target===D.current||r.target===r.currentTarget)_(!0);else{let o=r.target,f=!1;for(;o&&o!==D.current;){if(o.hasAttribute("data-item-id")){f=!0;break}o=o.parentElement}f||_(!0)}V(!0)},Pe=()=>{V(!1),_(!1),J(null)},T=b(),ze=a.slice(1).reduce((r,o,f)=>{const g=a.slice(0,f+2),y=m(g);return y&&r.push({id:o,name:y.name,path:g}),r},[]);return e.jsxs("div",{className:"h-screen flex flex-col bg-white",onClick:De,children:[e.jsx(bt,{isAuthenticated:u,user:R,handleGithubAuth:le,handleLogout:Ce}),e.jsx(vt,{currentPath:a,breadcrumbs:ze,navigateUp:O,navigateToPathLevel:H,showNewItemDialog:()=>k(!0),fileInputRef:B,isAuthenticated:u,handleGithubAuth:le}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx(wt,{fileSystem:s,expandedFolders:x,selectedItems:p,navigateToQuickAccess:ke,toggleFolder:q,setSelectedItems:c,handleFolderDragOver:ie,handleFolderDragLeave:ce,handleFolderDrop:de,dragOverFolder:$}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto bg-white transition-colors duration-200 relative",onDragOver:ve,onDragLeave:we,onDrop:je,onMouseDown:Me,onMouseUp:Pe,ref:D,children:[e.jsx(Y,{}),T&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-1",children:T.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[((ue=T.children)==null?void 0:ue.length)||0," item",(((pe=T.children)==null?void 0:pe.length)||0)!==1?"s":""]})]}),T.children&&T.children.length>0?e.jsx(jt,{items:T.children,selectedItems:p,setSelectedItems:c,navigateToFolder:z,setShowContextMenu:v,handleDragStart:Re,handleFolderDragOver:ie,handleFolderDragLeave:ce,handleFolderDrop:de,dragOverFolder:$,selectionBox:X}):e.jsxs("div",{className:"text-center text-gray-500 mb-8",children:[e.jsx(te,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"This folder is empty"})]})]})]})]}),e.jsx("input",{type:"file",ref:B,multiple:!0,className:"hidden",onChange:r=>{const o=Array.from(r.target.files||[]);console.log("Files selected for upload:",o)}}),h&&e.jsx(St,{position:{x:h.x,y:h.y},itemId:h.itemId,onRename:r=>{var f;const o=(f=T==null?void 0:T.children)==null?void 0:f.find(g=>g.id===r);o&&(E(o.name),w(r))},onDelete:Ne,setShowContextMenu:v}),L&&e.jsx(Nt,{newItemName:F,setNewItemName:E,setShowNewItemDialog:k,createNewItem:oe,handleKeyDown:Ee}),j&&e.jsx(Ct,{newItemName:F,setNewItemName:E,setShowRenameDialog:w,renameItem:Se,showRenameDialog:j})]})},Ot={id:he.id,manifest:he,init:async()=>{},render:()=>e.jsx(kt,{}),onOpen:()=>{},onClose:()=>{}};export{Ot as default};
