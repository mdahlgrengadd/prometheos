var e=Object.defineProperty,t=(t,n,o)=>((t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o)(t,"symbol"!=typeof n?n+"":n,o);import{r as n,i as o,R as i,j as r,g as a}from"./index-CM0htoqd.js";import{u as s,s as l,z as c}from"./MacroContext-EXPiZfro.js";import"./monaco-editor-Ch9pnC_y.js";function d(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,o=0;o<e.length;o++)""!==(n=d(e[o]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var u={value:()=>{}};function p(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new h(o)}function h(e){this._=e}function f(e,t){for(var n,o=0,i=e.length;o<i;++o)if((n=e[o]).name===t)return n.value}function g(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=u,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}h.prototype=p.prototype={constructor:h,on:function(e,t){var n,o,i=this._,r=(o=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,s=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=r[a]).type)i[n]=g(i[n],e.name,t);else if(null==t)for(n in i)i[n]=g(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=r[a]).type)&&(n=f(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new h(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,i=new Array(n),r=0;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=0,n=(o=this._[e]).length;r<n;++r)o[r].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};var m="http://www.w3.org/1999/xhtml";const x={svg:"http://www.w3.org/2000/svg",xhtml:m,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function y(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),x.hasOwnProperty(t)?{space:x[t],local:e}:e}function v(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===m&&t.documentElement.namespaceURI===m?t.createElement(e):t.createElementNS(n,e)}}function b(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function w(e){var t=y(e);return(t.local?b:v)(t)}function S(){}function N(e){return null==e?S:function(){return this.querySelector(e)}}function C(){return[]}function E(e){return null==e?C:function(){return this.querySelectorAll(e)}}function k(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function M(e){return function(){return this.matches(e)}}function _(e){return function(t){return t.matches(e)}}var P=Array.prototype.find;function j(){return this.firstElementChild}var A=Array.prototype.filter;function I(){return Array.from(this.children)}function D(e){return new Array(e.length)}function O(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function z(e,t,n,o,i,r){for(var a,s=0,l=t.length,c=r.length;s<c;++s)(a=t[s])?(a.__data__=r[s],o[s]=a):n[s]=new O(e,r[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function $(e,t,n,o,i,r,a){var s,l,c,d=new Map,u=t.length,p=r.length,h=new Array(u);for(s=0;s<u;++s)(l=t[s])&&(h[s]=c=a.call(l,l.__data__,s,t)+"",d.has(c)?i[s]=l:d.set(c,l));for(s=0;s<p;++s)c=a.call(e,r[s],s,r)+"",(l=d.get(c))?(o[s]=l,l.__data__=r[s],d.delete(c)):n[s]=new O(e,r[s]);for(s=0;s<u;++s)(l=t[s])&&d.get(h[s])===l&&(i[s]=l)}function R(e){return e.__data__}function V(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function T(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function B(e){return function(){this.removeAttribute(e)}}function L(e){return function(){this.removeAttributeNS(e.space,e.local)}}function H(e,t){return function(){this.setAttribute(e,t)}}function Z(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function X(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Y(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function W(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function F(e){return function(){this.style.removeProperty(e)}}function K(e,t,n){return function(){this.style.setProperty(e,t,n)}}function G(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function q(e,t){return e.style.getPropertyValue(t)||W(e).getComputedStyle(e,null).getPropertyValue(t)}function U(e){return function(){delete this[e]}}function Q(e,t){return function(){this[e]=t}}function J(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ee(e){return e.trim().split(/^|\s+/)}function te(e){return e.classList||new ne(e)}function ne(e){this._node=e,this._names=ee(e.getAttribute("class")||"")}function oe(e,t){for(var n=te(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function ie(e,t){for(var n=te(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function re(e){return function(){oe(this,e)}}function ae(e){return function(){ie(this,e)}}function se(e,t){return function(){(t.apply(this,arguments)?oe:ie)(this,e)}}function le(){this.textContent=""}function ce(e){return function(){this.textContent=e}}function de(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ue(){this.innerHTML=""}function pe(e){return function(){this.innerHTML=e}}function he(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function fe(){this.nextSibling&&this.parentNode.appendChild(this)}function ge(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function me(){return null}function xe(){var e=this.parentNode;e&&e.removeChild(this)}function ye(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ve(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function be(e){return function(){var t=this.__on;if(t){for(var n,o=0,i=-1,r=t.length;o<r;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function we(e,t,n){return function(){var o,i=this.__on,r=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((o=i[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),void(o.value=t);this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(o):this.__on=[o]}}function Se(e,t,n){var o=W(e),i=o.CustomEvent;"function"==typeof i?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ne(e,t){return function(){return Se(this,e,t)}}function Ce(e,t){return function(){return Se(this,e,t.apply(this,arguments))}}O.prototype={constructor:O,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},ne.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Ee=[null];function ke(e,t){this._groups=e,this._parents=t}function Me(){return new ke([[document.documentElement]],Ee)}function _e(e){return"string"==typeof e?new ke([[document.querySelector(e)]],[document.documentElement]):new ke([[e]],Ee)}function Pe(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}ke.prototype=Me.prototype={constructor:ke,select:function(e){"function"!=typeof e&&(e=N(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a,s=t[i],l=s.length,c=o[i]=new Array(l),d=0;d<l;++d)(r=s[d])&&(a=e.call(r,r.__data__,d,s))&&("__data__"in r&&(a.__data__=r.__data__),c[d]=a);return new ke(o,this._parents)},selectAll:function(e){e="function"==typeof e?k(e):E(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var a,s=t[r],l=s.length,c=0;c<l;++c)(a=s[c])&&(o.push(e.call(a,a.__data__,c,s)),i.push(a));return new ke(o,i)},selectChild:function(e){return this.select(null==e?j:function(e){return function(){return P.call(this.children,e)}}("function"==typeof e?e:_(e)))},selectChildren:function(e){return this.selectAll(null==e?I:function(e){return function(){return A.call(this.children,e)}}("function"==typeof e?e:_(e)))},filter:function(e){"function"!=typeof e&&(e=M(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a=t[i],s=a.length,l=o[i]=[],c=0;c<s;++c)(r=a[c])&&e.call(r,r.__data__,c,a)&&l.push(r);return new ke(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,R);var n,o=t?$:z,i=this._parents,r=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=r.length,s=new Array(a),l=new Array(a),c=new Array(a),d=0;d<a;++d){var u=i[d],p=r[d],h=p.length,f=V(e.call(u,u&&u.__data__,d,i)),g=f.length,m=l[d]=new Array(g),x=s[d]=new Array(g);o(u,p,m,x,c[d]=new Array(h),f,t);for(var y,v,b=0,w=0;b<g;++b)if(y=m[b]){for(b>=w&&(w=b+1);!(v=x[w])&&++w<g;);y._next=v||null}}return(s=new ke(s,i))._enter=l,s._exit=c,s},enter:function(){return new ke(this._enter||this._groups.map(D),this._parents)},exit:function(){return new ke(this._exit||this._groups.map(D),this._parents)},join:function(e,t,n){var o=this.enter(),i=this,r=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?r.remove():n(r),o&&i?o.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,a=Math.min(i,r),s=new Array(i),l=0;l<a;++l)for(var c,d=n[l],u=o[l],p=d.length,h=s[l]=new Array(p),f=0;f<p;++f)(c=d[f]||u[f])&&(h[f]=c);for(;l<i;++l)s[l]=n[l];return new ke(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,i=e[t],r=i.length-1,a=i[r];--r>=0;)(o=i[r])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=T);for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var a,s=n[r],l=s.length,c=i[r]=new Array(l),d=0;d<l;++d)(a=s[d])&&(c[d]=a);c.sort(t)}return new ke(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i,r=t[n],a=0,s=r.length;a<s;++a)(i=r[a])&&e.call(i,i.__data__,a,r);return this},attr:function(e,t){var n=y(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?L:B:"function"==typeof t?n.local?Y:X:n.local?Z:H)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?F:"function"==typeof t?G:K)(e,t,null==n?"":n)):q(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?U:"function"==typeof t?J:Q)(e,t)):this.node()[e]},classed:function(e,t){var n=ee(e+"");if(arguments.length<2){for(var o=te(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?se:t?re:ae)(n,t))},text:function(e){return arguments.length?this.each(null==e?le:("function"==typeof e?de:ce)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ue:("function"==typeof e?he:pe)(e)):this.node().innerHTML},raise:function(){return this.each(fe)},lower:function(){return this.each(ge)},append:function(e){var t="function"==typeof e?e:w(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:w(e),o=null==t?me:"function"==typeof t?t:N(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(xe)},clone:function(e){return this.select(e?ve:ye)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,i,r=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=r.length;if(!(arguments.length<2)){for(s=t?we:be,o=0;o<a;++o)this.each(s(r[o],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,d=s.length;c<d;++c)for(o=0,l=s[c];o<a;++o)if((i=r[o]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?Ce:Ne)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,i=e[t],r=0,a=i.length;r<a;++r)(o=i[r])&&(yield o)}};const je={passive:!1},Ae={capture:!0,passive:!1};function Ie(e){e.stopImmediatePropagation()}function De(e){e.preventDefault(),e.stopImmediatePropagation()}function Oe(e){var t=e.document.documentElement,n=_e(e).on("dragstart.drag",De,Ae);"onselectstart"in t?n.on("selectstart.drag",De,Ae):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ze(e,t){var n=e.document.documentElement,o=_e(e).on("dragstart.drag",null);t&&(o.on("click.drag",De,Ae),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const $e=e=>()=>e;function Re(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:a,y:s,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function Ve(e){return!e.ctrlKey&&!e.button}function Te(){return this.parentNode}function Be(e,t){return null==t?{x:e.x,y:e.y}:t}function Le(){return navigator.maxTouchPoints||"ontouchstart"in this}function He(){var e,t,n,o,i=Ve,r=Te,a=Be,s=Le,l={},c=p("start","drag","end"),d=0,u=0;function h(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",x).on("touchmove.drag",y,je).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,s){if(!o&&i.call(this,a,s)){var l=b(this,r.call(this,a,s),a,s,"mouse");l&&(_e(a.view).on("mousemove.drag",g,Ae).on("mouseup.drag",m,Ae),Oe(a.view),Ie(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function g(o){if(De(o),!n){var i=o.clientX-e,r=o.clientY-t;n=i*i+r*r>u}l.mouse("drag",o)}function m(e){_e(e.view).on("mousemove.drag mouseup.drag",null),ze(e.view,n),De(e),l.mouse("end",e)}function x(e,t){if(i.call(this,e,t)){var n,o,a=e.changedTouches,s=r.call(this,e,t),l=a.length;for(n=0;n<l;++n)(o=b(this,s,e,t,a[n].identifier,a[n]))&&(Ie(e),o("start",e,a[n]))}}function y(e){var t,n,o=e.changedTouches,i=o.length;for(t=0;t<i;++t)(n=l[o[t].identifier])&&(De(e),n("drag",e,o[t]))}function v(e){var t,n,i=e.changedTouches,r=i.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<r;++t)(n=l[i[t].identifier])&&(Ie(e),n("end",e,i[t]))}function b(e,t,n,o,i,r){var s,u,p,f=c.copy(),g=Pe(r||n,t);if(null!=(p=a.call(e,new Re("beforestart",{sourceEvent:n,target:h,identifier:i,active:d,x:g[0],y:g[1],dx:0,dy:0,dispatch:f}),o)))return s=p.x-g[0]||0,u=p.y-g[1]||0,function n(r,a,c){var m,x=g;switch(r){case"start":l[i]=n,m=d++;break;case"end":delete l[i],--d;case"drag":g=Pe(c||a,t),m=d}f.call(r,e,new Re(r,{sourceEvent:a,subject:p,target:h,identifier:i,active:m,x:g[0]+s,y:g[1]+u,dx:g[0]-x[0],dy:g[1]-x[1],dispatch:f}),o)}}return h.filter=function(e){return arguments.length?(i="function"==typeof e?e:$e(!!e),h):i},h.container=function(e){return arguments.length?(r="function"==typeof e?e:$e(e),h):r},h.subject=function(e){return arguments.length?(a="function"==typeof e?e:$e(e),h):a},h.touchable=function(e){return arguments.length?(s="function"==typeof e?e:$e(!!e),h):s},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(u=(e=+e)*e,h):Math.sqrt(u)},h}function Ze(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Xe(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Ye(){}Re.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var We=.7,Fe=1/We,Ke="\\s*([+-]?\\d+)\\s*",Ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ue=/^#([0-9a-f]{3,8})$/,Qe=new RegExp(`^rgb\\(${Ke},${Ke},${Ke}\\)$`),Je=new RegExp(`^rgb\\(${qe},${qe},${qe}\\)$`),et=new RegExp(`^rgba\\(${Ke},${Ke},${Ke},${Ge}\\)$`),tt=new RegExp(`^rgba\\(${qe},${qe},${qe},${Ge}\\)$`),nt=new RegExp(`^hsl\\(${Ge},${qe},${qe}\\)$`),ot=new RegExp(`^hsla\\(${Ge},${qe},${qe},${Ge}\\)$`),it={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function rt(){return this.rgb().formatHex()}function at(){return this.rgb().formatRgb()}function st(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ue.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?lt(t):3===n?new ut(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ct(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ct(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Qe.exec(e))?new ut(t[1],t[2],t[3],1):(t=Je.exec(e))?new ut(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=et.exec(e))?ct(t[1],t[2],t[3],t[4]):(t=tt.exec(e))?ct(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=nt.exec(e))?xt(t[1],t[2]/100,t[3]/100,1):(t=ot.exec(e))?xt(t[1],t[2]/100,t[3]/100,t[4]):it.hasOwnProperty(e)?lt(it[e]):"transparent"===e?new ut(NaN,NaN,NaN,0):null}function lt(e){return new ut(e>>16&255,e>>8&255,255&e,1)}function ct(e,t,n,o){return o<=0&&(e=t=n=NaN),new ut(e,t,n,o)}function dt(e,t,n,o){return 1===arguments.length?((i=e)instanceof Ye||(i=st(i)),i?new ut((i=i.rgb()).r,i.g,i.b,i.opacity):new ut):new ut(e,t,n,null==o?1:o);var i}function ut(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function pt(){return`#${mt(this.r)}${mt(this.g)}${mt(this.b)}`}function ht(){const e=ft(this.opacity);return`${1===e?"rgb(":"rgba("}${gt(this.r)}, ${gt(this.g)}, ${gt(this.b)}${1===e?")":`, ${e})`}`}function ft(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mt(e){return((e=gt(e))<16?"0":"")+e.toString(16)}function xt(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vt(e,t,n,o)}function yt(e){if(e instanceof vt)return new vt(e.h,e.s,e.l,e.opacity);if(e instanceof Ye||(e=st(e)),!e)return new vt;if(e instanceof vt)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),a=NaN,s=r-i,l=(r+i)/2;return s?(a=t===r?(n-o)/s+6*(n<o):n===r?(o-t)/s+2:(t-n)/s+4,s/=l<.5?r+i:2-r-i,a*=60):s=l>0&&l<1?0:a,new vt(a,s,l,e.opacity)}function vt(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function bt(e){return(e=(e||0)%360)<0?e+360:e}function wt(e){return Math.max(0,Math.min(1,e||0))}function St(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Ze(Ye,st,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rt,formatHex:rt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return yt(this).formatHsl()},formatRgb:at,toString:at}),Ze(ut,dt,Xe(Ye,{brighter(e){return e=null==e?Fe:Math.pow(Fe,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?We:Math.pow(We,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ut(gt(this.r),gt(this.g),gt(this.b),ft(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pt,formatHex:pt,formatHex8:function(){return`#${mt(this.r)}${mt(this.g)}${mt(this.b)}${mt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:ht,toString:ht})),Ze(vt,(function(e,t,n,o){return 1===arguments.length?yt(e):new vt(e,t,n,null==o?1:o)}),Xe(Ye,{brighter(e){return e=null==e?Fe:Math.pow(Fe,e),new vt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?We:Math.pow(We,e),new vt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new ut(St(e>=240?e-240:e+120,i,o),St(e,i,o),St(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new vt(bt(this.h),wt(this.s),wt(this.l),ft(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ft(this.opacity);return`${1===e?"hsl(":"hsla("}${bt(this.h)}, ${100*wt(this.s)}%, ${100*wt(this.l)}%${1===e?")":`, ${e})`}`}}));const Nt=e=>()=>e;function Ct(e){return 1===(e=+e)?Et:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):Nt(isNaN(t)?n:t)}}function Et(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Nt(isNaN(e)?t:e)}const kt=function e(t){var n=Ct(t);function o(e,t){var o=n((e=dt(e)).r,(t=dt(t)).r),i=n(e.g,t.g),r=n(e.b,t.b),a=Et(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=i(t),e.b=r(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function Mt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var _t=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pt=new RegExp(_t.source,"g");function jt(e,t){var n,o,i,r=_t.lastIndex=Pt.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=_t.exec(e))&&(o=Pt.exec(t));)(i=o.index)>r&&(i=t.slice(r,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,l.push({i:a,x:Mt(n,o)})),r=Pt.lastIndex;return r<t.length&&(i=t.slice(r),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,o=0;o<t;++o)s[(n=l[o]).i]=n.x(e);return s.join("")})}var At,It=180/Math.PI,Dt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ot(e,t,n,o,i,r){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*It,skewX:Math.atan(l)*It,scaleX:a,scaleY:s}}function zt(e,t,n,o){function i(e){return e.length?e.pop()+" ":""}return function(r,a){var s=[],l=[];return r=e(r),a=e(a),function(e,o,i,r,a,s){if(e!==i||o!==r){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:Mt(e,i)},{i:l-2,x:Mt(o,r)})}else(i||r)&&a.push("translate("+i+t+r+n)}(r.translateX,r.translateY,a.translateX,a.translateY,s,l),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(i(n)+"rotate(",null,o)-2,x:Mt(e,t)})):t&&n.push(i(n)+"rotate("+t+o)}(r.rotate,a.rotate,s,l),function(e,t,n,r){e!==t?r.push({i:n.push(i(n)+"skewX(",null,o)-2,x:Mt(e,t)}):t&&n.push(i(n)+"skewX("+t+o)}(r.skewX,a.skewX,s,l),function(e,t,n,o,r,a){if(e!==n||t!==o){var s=r.push(i(r)+"scale(",null,",",null,")");a.push({i:s-4,x:Mt(e,n)},{i:s-2,x:Mt(t,o)})}else 1===n&&1===o||r.push(i(r)+"scale("+n+","+o+")")}(r.scaleX,r.scaleY,a.scaleX,a.scaleY,s,l),r=a=null,function(e){for(var t,n=-1,o=l.length;++n<o;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var $t=zt((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Dt:Ot(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Rt=zt((function(e){return null==e?Dt:(At||(At=document.createElementNS("http://www.w3.org/2000/svg","g")),At.setAttribute("transform",e),(e=At.transform.baseVal.consolidate())?Ot((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Dt)}),", ",")",")");function Vt(e){return((e=Math.exp(e))+1/e)/2}const Tt=function e(t,n,o){function i(e,i){var r,a,s=e[0],l=e[1],c=e[2],d=i[0],u=i[1],p=i[2],h=d-s,f=u-l,g=h*h+f*f;if(g<1e-12)a=Math.log(p/c)/t,r=function(e){return[s+e*h,l+e*f,c*Math.exp(t*e*a)]};else{var m=Math.sqrt(g),x=(p*p-c*c+o*g)/(2*c*n*m),y=(p*p-c*c-o*g)/(2*p*n*m),v=Math.log(Math.sqrt(x*x+1)-x),b=Math.log(Math.sqrt(y*y+1)-y);a=(b-v)/t,r=function(e){var o,i=e*a,r=Vt(v),d=c/(n*m)*(r*(o=t*i+v,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[s+d*h,l+d*f,c*r/Vt(t*i+v)]}}return r.duration=1e3*a*t/Math.SQRT2,r}return i.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},i}(Math.SQRT2,2,4);var Bt,Lt,Ht=0,Zt=0,Xt=0,Yt=0,Wt=0,Ft=0,Kt="object"==typeof performance&&performance.now?performance:Date,Gt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qt(){return Wt||(Gt(Ut),Wt=Kt.now()+Ft)}function Ut(){Wt=0}function Qt(){this._call=this._time=this._next=null}function Jt(e,t,n){var o=new Qt;return o.restart(e,t,n),o}function en(){Wt=(Yt=Kt.now())+Ft,Ht=Zt=0;try{!function(){qt(),++Ht;for(var e,t=Bt;t;)(e=Wt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ht}()}finally{Ht=0,function(){var e,t,n=Bt,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Bt=t);Lt=e,nn(o)}(),Wt=0}}function tn(){var e=Kt.now(),t=e-Yt;t>1e3&&(Ft-=t,Yt=e)}function nn(e){Ht||(Zt&&(Zt=clearTimeout(Zt)),e-Wt>24?(e<1/0&&(Zt=setTimeout(en,e-Kt.now()-Ft)),Xt&&(Xt=clearInterval(Xt))):(Xt||(Yt=Kt.now(),Xt=setInterval(tn,1e3)),Ht=1,Gt(en)))}function on(e,t,n){var o=new Qt;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}Qt.prototype=Jt.prototype={constructor:Qt,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?qt():+n)+(null==t?0:+t),this._next||Lt===this||(Lt?Lt._next=this:Bt=this,Lt=this),this._call=e,this._time=n,nn()},stop:function(){this._call&&(this._call=null,this._time=1/0,nn())}};var rn=p("start","end","cancel","interrupt"),an=[];function sn(e,t,n,o,i,r){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,i=e.__transition;function r(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(r){var c,d,u,p;if(1!==n.state)return l();for(c in i)if((p=i[c]).name===n.name){if(3===p.state)return on(a);4===p.state?(p.state=6,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[c]):+c<t&&(p.state=6,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[c])}if(on((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(r))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,o=new Array(u=n.tween.length),c=0,d=-1;c<u;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=p);o.length=d+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),r=-1,a=o.length;++r<a;)o[r].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var o in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Jt(r,0,n.time)}(e,n,{name:t,index:o,group:i,on:rn,tween:an,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:0})}function ln(e,t){var n=dn(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function cn(e,t){var n=dn(e,t);if(n.state>3)throw new Error("too late; already running");return n}function dn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function un(e,t){var n,o,i,r=e.__transition,a=!0;if(r){for(i in t=null==t?null:t+"",r)(n=r[i]).name===t?(o=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]):a=!1;a&&delete e.__transition}}function pn(e,t){var n,o;return function(){var i=cn(this,e),r=i.tween;if(r!==n)for(var a=0,s=(o=n=r).length;a<s;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}i.tween=o}}function hn(e,t,n){var o,i;if("function"!=typeof n)throw new Error;return function(){var r=cn(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}r.tween=i}}function fn(e,t,n){var o=e._id;return e.each((function(){var e=cn(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return dn(e,o).value[t]}}function gn(e,t){var n;return("number"==typeof t?Mt:t instanceof st?kt:(n=st(t))?(t=n,kt):jt)(e,t)}function mn(e){return function(){this.removeAttribute(e)}}function xn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yn(e,t,n){var o,i,r=n+"";return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function vn(e,t,n){var o,i,r=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function bn(e,t,n){var o,i,r;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===o&&s===i?r:(i=s,r=t(o=a,l));this.removeAttribute(e)}}function wn(e,t,n){var o,i,r;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===o&&s===i?r:(i=s,r=t(o=a,l));this.removeAttributeNS(e.space,e.local)}}function Sn(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Nn(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Cn(e,t){return function(){ln(this,e).delay=+t.apply(this,arguments)}}function En(e,t){return t=+t,function(){ln(this,e).delay=t}}function kn(e,t){return function(){cn(this,e).duration=+t.apply(this,arguments)}}function Mn(e,t){return t=+t,function(){cn(this,e).duration=t}}var _n=Me.prototype.constructor;function Pn(e){return function(){this.style.removeProperty(e)}}var jn=0;function An(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function In(){return++jn}var Dn=Me.prototype;An.prototype={constructor:An,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=N(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var s,l,c=o[a],d=c.length,u=r[a]=new Array(d),p=0;p<d;++p)(s=c[p])&&(l=e.call(s,s.__data__,p,c))&&("__data__"in s&&(l.__data__=s.__data__),u[p]=l,sn(u[p],t,n,p,u,dn(s,n)));return new An(r,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=E(e));for(var o=this._groups,i=o.length,r=[],a=[],s=0;s<i;++s)for(var l,c=o[s],d=c.length,u=0;u<d;++u)if(l=c[u]){for(var p,h=e.call(l,l.__data__,u,c),f=dn(l,n),g=0,m=h.length;g<m;++g)(p=h[g])&&sn(p,t,n,g,h,f);r.push(h),a.push(l)}return new An(r,a,t,n)},selectChild:Dn.selectChild,selectChildren:Dn.selectChildren,filter:function(e){"function"!=typeof e&&(e=M(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a=t[i],s=a.length,l=o[i]=[],c=0;c<s;++c)(r=a[c])&&e.call(r,r.__data__,c,a)&&l.push(r);return new An(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),a=new Array(o),s=0;s<r;++s)for(var l,c=t[s],d=n[s],u=c.length,p=a[s]=new Array(u),h=0;h<u;++h)(l=c[h]||d[h])&&(p[h]=l);for(;s<o;++s)a[s]=t[s];return new An(a,this._parents,this._name,this._id)},selection:function(){return new _n(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=In(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a,s=o[r],l=s.length,c=0;c<l;++c)if(a=s[c]){var d=dn(a,t);sn(a,e,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new An(o,this._parents,e,n)},call:Dn.call,nodes:Dn.nodes,node:Dn.node,size:Dn.size,empty:Dn.empty,each:Dn.each,on:function(e,t){var n=this._id;return arguments.length<2?dn(this.node(),n).on.on(e):this.each(function(e,t,n){var o,i,r=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?ln:cn;return function(){var a=r(this,e),s=a.on;s!==o&&(i=(o=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=y(e),o="transform"===n?Rt:gn;return this.attrTween(e,"function"==typeof t?(n.local?wn:bn)(n,o,fn(this,"attr."+e,t)):null==t?(n.local?xn:mn)(n):(n.local?vn:yn)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=y(e);return this.tween(n,(o.local?Sn:Nn)(o,t))},style:function(e,t,n){var o="transform"==(e+="")?$t:gn;return null==t?this.styleTween(e,function(e,t){var n,o,i;return function(){var r=q(this,e),a=(this.style.removeProperty(e),q(this,e));return r===a?null:r===n&&a===o?i:i=t(n=r,o=a)}}(e,o)).on("end.style."+e,Pn(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,i,r;return function(){var a=q(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=q(this,e)),a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s))}}(e,o,fn(this,"style."+e,t))).each(function(e,t){var n,o,i,r,a="style."+t,s="end."+a;return function(){var l=cn(this,e),c=l.on,d=null==l.value[a]?r||(r=Pn(t)):void 0;c===n&&i===d||(o=(n=c).copy()).on(s,i=d),l.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,i,r=n+"";return function(){var a=q(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,i;function r(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,r,n)),o}return r._value=t,r}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(fn(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,i=dn(this.node(),n).tween,r=0,a=i.length;r<a;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((null==t?pn:hn)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Cn:En)(t,e)):dn(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?kn:Mn)(t,e)):dn(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){cn(this,e).ease=t}}(t,e)):dn(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;cn(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,i=n.size();return new Promise((function(r,a){var s={value:a},l={value:function(){0===--i&&r()}};n.each((function(){var n=cn(this,o),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===i&&r()}))},[Symbol.iterator]:Dn[Symbol.iterator]};var On={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function zn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Me.prototype.interrupt=function(e){return this.each((function(){un(this,e)}))},Me.prototype.transition=function(e){var t,n;e instanceof An?(t=e._id,e=e._name):(t=In(),(n=On).time=qt(),e=null==e?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a,s=o[r],l=s.length,c=0;c<l;++c)(a=s[c])&&sn(a,e,t,c,s,n||zn(a,t));return new An(o,this._parents,e,t)};const $n=e=>()=>e;function Rn(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Vn(e,t,n){this.k=e,this.x=t,this.y=n}Vn.prototype={constructor:Vn,scale:function(e){return 1===e?this:new Vn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Vn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Tn=new Vn(1,0,0);function Bn(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Tn;return e.__zoom}function Ln(e){e.stopImmediatePropagation()}function Hn(e){e.preventDefault(),e.stopImmediatePropagation()}function Zn(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Xn(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Yn(){return this.__zoom||Tn}function Wn(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Fn(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kn(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a))}function Gn(){var e,t,n,o=Zn,i=Xn,r=Kn,a=Wn,s=Fn,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,u=Tt,h=p("start","zoom","end"),f=0,g=10;function m(e){e.property("__zoom",Yn).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",E).filter(s).on("touchstart.zoom",k).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",_).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Vn(t,e.x,e.y)}function y(e,t,n){var o=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return o===e.x&&i===e.y?e:new Vn(e.k,o,i)}function v(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,o){e.on("start.zoom",(function(){w(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,r=arguments,a=w(e,r).event(o),s=i.apply(e,r),l=null==n?v(s):"function"==typeof n?n.apply(e,r):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),d=e.__zoom,p="function"==typeof t?t.apply(e,r):t,h=u(d.invert(l).concat(c/d.k),p.invert(l).concat(c/p.k));return function(e){if(1===e)e=p;else{var t=h(e),n=c/t[2];e=new Vn(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}}))}function w(e,t,n){return!n&&e.__zooming||new S(e,t)}function S(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function N(e,...t){if(o.apply(this,arguments)){var n=w(this,t).event(e),i=this.__zoom,s=Math.max(l[0],Math.min(l[1],i.k*Math.pow(2,a.apply(this,arguments)))),d=Pe(e);if(n.wheel)n.mouse[0][0]===d[0]&&n.mouse[0][1]===d[1]||(n.mouse[1]=i.invert(n.mouse[0]=d)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[d,i.invert(d)],un(this),n.start()}Hn(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",r(y(x(i,s),n.mouse[0],n.mouse[1]),n.extent,c))}}function C(e,...t){if(!n&&o.apply(this,arguments)){var i=e.currentTarget,a=w(this,t,!0).event(e),s=_e(e.view).on("mousemove.zoom",(function(e){if(Hn(e),!a.moved){var t=e.clientX-d,n=e.clientY-u;a.moved=t*t+n*n>f}a.event(e).zoom("mouse",r(y(a.that.__zoom,a.mouse[0]=Pe(e,i),a.mouse[1]),a.extent,c))}),!0).on("mouseup.zoom",(function(e){s.on("mousemove.zoom mouseup.zoom",null),ze(e.view,a.moved),Hn(e),a.event(e).end()}),!0),l=Pe(e,i),d=e.clientX,u=e.clientY;Oe(e.view),Ln(e),a.mouse=[l,this.__zoom.invert(l)],un(this),a.start()}}function E(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,a=Pe(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(a),l=n.k*(e.shiftKey?.5:2),u=r(y(x(n,l),a,s),i.apply(this,t),c);Hn(e),d>0?_e(this).transition().duration(d).call(b,u,a,e):_e(this).call(m.transform,u,a,e)}}function k(n,...i){if(o.apply(this,arguments)){var r,a,s,l,c=n.touches,d=c.length,u=w(this,i,n.changedTouches.length===d).event(n);for(Ln(n),a=0;a<d;++a)l=[l=Pe(s=c[a],this),this.__zoom.invert(l),s.identifier],u.touch0?u.touch1||u.touch0[2]===l[2]||(u.touch1=l,u.taps=0):(u.touch0=l,r=!0,u.taps=1+!!e);e&&(e=clearTimeout(e)),r&&(u.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),500)),un(this),u.start())}}function M(e,...t){if(this.__zooming){var n,o,i,a,s=w(this,t).event(e),l=e.changedTouches,d=l.length;for(Hn(e),n=0;n<d;++n)i=Pe(o=l[n],this),s.touch0&&s.touch0[2]===o.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===o.identifier&&(s.touch1[0]=i);if(o=s.that.__zoom,s.touch1){var u=s.touch0[0],p=s.touch0[1],h=s.touch1[0],f=s.touch1[1],g=(g=h[0]-u[0])*g+(g=h[1]-u[1])*g,m=(m=f[0]-p[0])*m+(m=f[1]-p[1])*m;o=x(o,Math.sqrt(g/m)),i=[(u[0]+h[0])/2,(u[1]+h[1])/2],a=[(p[0]+f[0])/2,(p[1]+f[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],a=s.touch0[1]}s.zoom("touch",r(y(o,i,a),s.extent,c))}}function _(e,...o){if(this.__zooming){var i,r,a=w(this,o).event(e),s=e.changedTouches,l=s.length;for(Ln(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),i=0;i<l;++i)r=s[i],a.touch0&&a.touch0[2]===r.identifier?delete a.touch0:a.touch1&&a.touch1[2]===r.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(r=Pe(r,this),Math.hypot(t[0]-r[0],t[1]-r[1])<g)){var c=_e(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return m.transform=function(e,t,n,o){var i=e.selection?e.selection():e;i.property("__zoom",Yn),e!==i?b(e,t,n,o):i.interrupt().each((function(){w(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},m.scaleBy=function(e,t,n,o){m.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,o)},m.scaleTo=function(e,t,n,o){m.transform(e,(function(){var e=i.apply(this,arguments),o=this.__zoom,a=null==n?v(e):"function"==typeof n?n.apply(this,arguments):n,s=o.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return r(y(x(o,l),a,s),e,c)}),n,o)},m.translateBy=function(e,t,n,o){m.transform(e,(function(){return r(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,o)},m.translateTo=function(e,t,n,o,a){m.transform(e,(function(){var e=i.apply(this,arguments),a=this.__zoom,s=null==o?v(e):"function"==typeof o?o.apply(this,arguments):o;return r(Tn.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),o,a)},S.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=_e(this.that).datum();h.call(e,this.that,new Rn(e,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:h}),t)}},m.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:$n(+e),m):a},m.filter=function(e){return arguments.length?(o="function"==typeof e?e:$n(!!e),m):o},m.touchable=function(e){return arguments.length?(s="function"==typeof e?e:$n(!!e),m):s},m.extent=function(e){return arguments.length?(i="function"==typeof e?e:$n([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):i},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(e){return arguments.length?(r=e,m):r},m.duration=function(e){return arguments.length?(d=+e,m):d},m.interpolate=function(e){return arguments.length?(u=e,m):u},m.on=function(){var e=h.on.apply(h,arguments);return e===h?m:e},m.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,m):Math.sqrt(f)},m.tapDistance=function(e){return arguments.length?(g=+e,m):g},m}Bn.prototype=Vn.prototype;const qn=()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",Un=e=>`Node type "${e}" not found. Using fallback type "default".`,Qn=()=>"The React Flow parent container needs a width and a height to render the graph.",Jn=()=>"Only child nodes can use a parent extent.",eo=e=>`Marker type "${e}" doesn't exist.`,to=(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:o}", edge id: ${t}.`,no=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",oo=e=>`Edge type "${e}" not found. Using fallback type "default".`,io=e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,ro=()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.",ao=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],so=["Enter"," ","Escape"];var lo,co,uo,po,ho,fo;(co=lo||(lo={})).Strict="strict",co.Loose="loose",(po=uo||(uo={})).Free="free",po.Vertical="vertical",po.Horizontal="horizontal",(fo=ho||(ho={})).Partial="partial",fo.Full="full";const go={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var mo,xo,yo,vo,bo,wo;(xo=mo||(mo={})).Bezier="default",xo.Straight="straight",xo.Step="step",xo.SmoothStep="smoothstep",xo.SimpleBezier="simplebezier",(vo=yo||(yo={})).Arrow="arrow",vo.ArrowClosed="arrowclosed",(wo=bo||(bo={})).Left="left",wo.Top="top",wo.Right="right",wo.Bottom="bottom";const So={[bo.Left]:bo.Right,[bo.Right]:bo.Left,[bo.Top]:bo.Bottom,[bo.Bottom]:bo.Top};function No(e){return null===e?null:e?"valid":"invalid"}const Co=e=>"id"in e&&"source"in e&&"target"in e,Eo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ko=(e,t=[0,0])=>{const{width:n,height:o}=ei(e),i=e.origin??t,r=n*i[0],a=o*i[1];return{x:e.position.x-r,y:e.position.y-a}},Mo=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach((e=>{if(void 0===t.filter||t.filter(e)){const t=Lo(e);n=Ro(n,t)}})),To(n)},_o=(e,t,[n,o,i]=[0,0,1],r=!1,a=!1)=>{const s={...Ko(t,[n,o,i]),width:t.width/i,height:t.height/i},l=[];for(const c of e.values()){const{measured:e,selectable:t=!0,hidden:n=!1}=c;if(a&&!t||n)continue;const o=e.width??c.width??c.initialWidth??null,i=e.height??c.height??c.initialHeight??null,d=Zo(s,Bo(c)),u=(o??0)*(i??0),p=r&&d>0;(!c.internals.handleBounds||p||d>=u||c.dragging)&&l.push(c)}return l};async function Po({nodes:e,width:t,height:n,panZoom:o,minZoom:i,maxZoom:r},a){if(0===e.size)return Promise.resolve(!0);const s=function(e,t){const n=new Map,o=(null==t?void 0:t.nodes)?new Set(t.nodes.map((e=>e.id))):null;return e.forEach((e=>{!e.measured.width||!e.measured.height||!(null==t?void 0:t.includeHiddenNodes)&&e.hidden||o&&!o.has(e.id)||n.set(e.id,e)})),n}(e,a),l=Mo(s),c=Uo(l,t,n,(null==a?void 0:a.minZoom)??i,(null==a?void 0:a.maxZoom)??r,(null==a?void 0:a.padding)??.1);return await o.setViewport(c,{duration:null==a?void 0:a.duration}),Promise.resolve(!0)}function jo({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:i,onError:r}){const a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:l,y:c}=s?s.internals.positionAbsolute:{x:0,y:0},d=a.origin??o;let u=i;if("parent"!==a.extent||a.expandParent)s&&Jo(a.extent)&&(u=[[a.extent[0][0]+l,a.extent[0][1]+c],[a.extent[1][0]+l,a.extent[1][1]+c]]);else if(s){const e=s.measured.width,t=s.measured.height;e&&t&&(u=[[l,c],[l+e,c+t]])}else null==r||r("005",Jn());const p=Jo(u)?Do(t,u,a.measured):t;return void 0!==a.measured.width&&void 0!==a.measured.height||null==r||r("015",ro()),{position:{x:p.x-l+(a.measured.width??0)*d[0],y:p.y-c+(a.measured.height??0)*d[1]},positionAbsolute:p}}async function Ao({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:i}){const r=new Set(e.map((e=>e.id))),a=[];for(const p of n){if(!1===p.deletable)continue;const e=r.has(p.id),t=!e&&p.parentId&&a.find((e=>e.id===p.parentId));(e||t)&&a.push(p)}const s=new Set(t.map((e=>e.id))),l=o.filter((e=>!1!==e.deletable)),c=((e,t)=>{const n=new Set;return e.forEach((e=>{n.add(e.id)})),t.filter((e=>n.has(e.source)||n.has(e.target)))})(a,l),d=c;for(const p of l){s.has(p.id)&&!d.find((e=>e.id===p.id))&&d.push(p)}if(!i)return{edges:d,nodes:a};const u=await i({nodes:a,edges:d});return"boolean"==typeof u?u?{edges:d,nodes:a}:{edges:[],nodes:[]}:u}const Io=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Do=(e={x:0,y:0},t,n)=>({x:Io(e.x,t[0][0],t[1][0]-((null==n?void 0:n.width)??0)),y:Io(e.y,t[0][1],t[1][1]-((null==n?void 0:n.height)??0))});function Oo(e,t,n){const{width:o,height:i}=ei(n),{x:r,y:a}=n.internals.positionAbsolute;return Do(e,[[r,a],[r+o,a+i]],t)}const zo=(e,t,n)=>e<t?Io(Math.abs(e-t),1,t)/t:e>n?-Io(Math.abs(e-n),1,t)/t:0,$o=(e,t,n=15,o=40)=>[zo(e.x,o,t.width-o)*n,zo(e.y,o,t.height-o)*n],Ro=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Vo=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),To=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Bo=(e,t=[0,0])=>{var n,o;const{x:i,y:r}=Eo(e)?e.internals.positionAbsolute:ko(e,t);return{x:i,y:r,width:(null==(n=e.measured)?void 0:n.width)??e.width??e.initialWidth??0,height:(null==(o=e.measured)?void 0:o.height)??e.height??e.initialHeight??0}},Lo=(e,t=[0,0])=>{var n,o;const{x:i,y:r}=Eo(e)?e.internals.positionAbsolute:ko(e,t);return{x:i,y:r,x2:i+((null==(n=e.measured)?void 0:n.width)??e.width??e.initialWidth??0),y2:r+((null==(o=e.measured)?void 0:o.height)??e.height??e.initialHeight??0)}},Ho=(e,t)=>To(Ro(Vo(e),Vo(t))),Zo=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Xo=e=>Yo(e.width)&&Yo(e.height)&&Yo(e.x)&&Yo(e.y),Yo=e=>!isNaN(e)&&isFinite(e),Wo=(e,t)=>{},Fo=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Ko=({x:e,y:t},[n,o,i],r=!1,a=[1,1])=>{const s={x:(e-n)/i,y:(t-o)/i};return r?Fo(s,a):s},Go=({x:e,y:t},[n,o,i])=>({x:e*i+n,y:t*i+o});function qo(e,t){if("number"==typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"==typeof e&&e.endsWith("px")){const t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return 0}const Uo=(e,t,n,o,i,r)=>{const a=function(e,t,n){if("string"==typeof e||"number"==typeof e){const o=qo(e,n),i=qo(e,t);return{top:o,right:i,bottom:o,left:i,x:2*i,y:2*o}}if("object"==typeof e){const o=qo(e.top??e.y??0,n),i=qo(e.bottom??e.y??0,n),r=qo(e.left??e.x??0,t),a=qo(e.right??e.x??0,t);return{top:o,right:a,bottom:i,left:r,x:r+a,y:o+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(r,t,n),s=(t-a.x)/e.width,l=(n-a.y)/e.height,c=Math.min(s,l),d=Io(c,o,i),u=t/2-(e.x+e.width/2)*d,p=n/2-(e.y+e.height/2)*d,h=function(e,t,n,o,i,r){const{x:a,y:s}=Go(e,[t,n,o]),{x:l,y:c}=Go({x:e.x+e.width,y:e.y+e.height},[t,n,o]),d=i-l,u=r-c;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(d),bottom:Math.floor(u)}}(e,u,p,d,t,n),f=Math.min(h.left-a.left,0),g=Math.min(h.top-a.top,0);return{x:u-f+Math.min(h.right-a.right,0),y:p-g+Math.min(h.bottom-a.bottom,0),zoom:d}},Qo=()=>{var e;return"undefined"!=typeof navigator&&(null==(e=null==navigator?void 0:navigator.userAgent)?void 0:e.indexOf("Mac"))>=0};function Jo(e){return void 0!==e&&"parent"!==e}function ei(e){var t,n;return{width:(null==(t=e.measured)?void 0:t.width)??e.width??e.initialWidth??0,height:(null==(n=e.measured)?void 0:n.height)??e.height??e.initialHeight??0}}function ti(e){var t,n;return void 0!==((null==(t=e.measured)?void 0:t.width)??e.width??e.initialWidth)&&void 0!==((null==(n=e.measured)?void 0:n.height)??e.height??e.initialHeight)}function ni(e,t={width:0,height:0},n,o,i){const r={...e},a=o.get(n);if(a){const e=a.origin||i;r.x+=a.internals.positionAbsolute.x-(t.width??0)*e[0],r.y+=a.internals.positionAbsolute.y-(t.height??0)*e[1]}return r}function oi(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ii(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:i}){const{x:r,y:a}=di(e),s=Ko({x:r-((null==i?void 0:i.left)??0),y:a-((null==i?void 0:i.top)??0)},o),{x:l,y:c}=n?Fo(s,t):s;return{xSnapped:l,ySnapped:c,...s}}const ri=e=>({width:e.offsetWidth,height:e.offsetHeight}),ai=e=>{var t;return(null==(t=null==e?void 0:e.getRootNode)?void 0:t.call(e))||(null==window?void 0:window.document)},si=["INPUT","SELECT","TEXTAREA"];function li(e){var t,n;const o=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target;if(1!==(null==o?void 0:o.nodeType))return!1;return si.includes(o.nodeName)||o.hasAttribute("contenteditable")||!!o.closest(".nokey")}const ci=e=>"clientX"in e,di=(e,t)=>{var n,o;const i=ci(e),r=i?e.clientX:null==(n=e.touches)?void 0:n[0].clientX,a=i?e.clientY:null==(o=e.touches)?void 0:o[0].clientY;return{x:r-((null==t?void 0:t.left)??0),y:a-((null==t?void 0:t.top)??0)}},ui=(e,t,n,o,i)=>{const r=t.querySelectorAll(`.${e}`);return r&&r.length?Array.from(r).map((t=>{const r=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:i,position:t.getAttribute("data-handlepos"),x:(r.left-n.left)/o,y:(r.top-n.top)/o,...ri(t)}})):null};function pi({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:a,targetControlY:s}){const l=.125*e+.375*i+.375*a+.125*n,c=.125*t+.375*r+.375*s+.125*o;return[l,c,Math.abs(l-e),Math.abs(c-t)]}function hi(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function fi({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){switch(e){case bo.Left:return[t-hi(t-o,r),n];case bo.Right:return[t+hi(o-t,r),n];case bo.Top:return[t,n-hi(n-i,r)];case bo.Bottom:return[t,n+hi(i-n,r)]}}function gi({sourceX:e,sourceY:t,sourcePosition:n=bo.Bottom,targetX:o,targetY:i,targetPosition:r=bo.Top,curvature:a=.25}){const[s,l]=fi({pos:n,x1:e,y1:t,x2:o,y2:i,c:a}),[c,d]=fi({pos:r,x1:o,y1:i,x2:e,y2:t,c:a}),[u,p,h,f]=pi({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${s},${l} ${c},${d} ${o},${i}`,u,p,h,f]}function mi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,a=Math.abs(o-t)/2;return[r,o<t?o+a:o-a,i,a]}function xi({sourceNode:e,targetNode:t,width:n,height:o,transform:i}){const r=Ro(Lo(e),Lo(t));r.x===r.x2&&(r.x2+=1),r.y===r.y2&&(r.y2+=1);const a={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:o/i[2]};return Zo(a,To(r))>0}const yi=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,vi=(e,t)=>{if(!e.source||!e.target)return t;let n;return n=Co(e)?{...e}:{...e,id:yi(e)},((e,t)=>t.some((t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle)))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))};function bi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[i,r,a,s]=mi({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,i,r,a,s]}const wi={[bo.Left]:{x:-1,y:0},[bo.Right]:{x:1,y:0},[bo.Top]:{x:0,y:-1},[bo.Bottom]:{x:0,y:1}},Si=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Ni({source:e,sourcePosition:t=bo.Bottom,target:n,targetPosition:o=bo.Top,center:i,offset:r}){const a=wi[t],s=wi[o],l={x:e.x+a.x*r,y:e.y+a.y*r},c={x:n.x+s.x*r,y:n.y+s.y*r},d=(({source:e,sourcePosition:t=bo.Bottom,target:n})=>t===bo.Left||t===bo.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:l,sourcePosition:t,target:c}),u=0!==d.x?"x":"y",p=d[u];let h,f,g=[];const m={x:0,y:0},x={x:0,y:0},[y,v,b,w]=mi({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[u]*s[u]===-1){h=i.x??y,f=i.y??v;const e=[{x:h,y:l.y},{x:h,y:c.y}],t=[{x:l.x,y:f},{x:c.x,y:f}];g=a[u]===p?"x"===u?e:t:"x"===u?t:e}else{const i=[{x:l.x,y:c.y}],d=[{x:c.x,y:l.y}];if(g="x"===u?a.x===p?d:i:a.y===p?i:d,t===o){const t=Math.abs(e[u]-n[u]);if(t<=r){const o=Math.min(r-1,r-t);a[u]===p?m[u]=(l[u]>e[u]?-1:1)*o:x[u]=(c[u]>n[u]?-1:1)*o}}if(t!==o){const e="x"===u?"y":"x",t=a[u]===s[e],n=l[e]>c[e],o=l[e]<c[e];(1===a[u]&&(!t&&n||t&&o)||1!==a[u]&&(!t&&o||t&&n))&&(g="x"===u?i:d)}const y={x:l.x+m.x,y:l.y+m.y},v={x:c.x+x.x,y:c.y+x.y};Math.max(Math.abs(y.x-g[0].x),Math.abs(v.x-g[0].x))>=Math.max(Math.abs(y.y-g[0].y),Math.abs(v.y-g[0].y))?(h=(y.x+v.x)/2,f=g[0].y):(h=g[0].x,f=(y.y+v.y)/2)}return[[e,{x:l.x+m.x,y:l.y+m.y},...g,{x:c.x+x.x,y:c.y+x.y},n],h,f,b,w]}function Ci({sourceX:e,sourceY:t,sourcePosition:n=bo.Bottom,targetX:o,targetY:i,targetPosition:r=bo.Top,borderRadius:a=5,centerX:s,centerY:l,offset:c=20}){const[d,u,p,h,f]=Ni({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:r,center:{x:s,y:l},offset:c});return[d.reduce(((e,t,n)=>{let o="";return o=n>0&&n<d.length-1?function(e,t,n,o){const i=Math.min(Si(e,t)/2,Si(t,n)/2,o),{x:r,y:a}=t;if(e.x===r&&r===n.x||e.y===a&&a===n.y)return`L${r} ${a}`;if(e.y===a)return`L ${r+i*(e.x<n.x?-1:1)},${a}Q ${r},${a} ${r},${a+i*(e.y<n.y?1:-1)}`;const s=e.x<n.x?1:-1;return`L ${r},${a+i*(e.y<n.y?-1:1)}Q ${r},${a} ${r+i*s},${a}`}(d[n-1],t,d[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o}),""),u,p,h,f]}function Ei(e){var t;return e&&!(!e.internals.handleBounds&&!(null==(t=e.handles)?void 0:t.length))&&!!(e.measured.width||e.width||e.initialWidth)}function ki(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,"source"===o.type?t.push(o):"target"===o.type&&n.push(o);return{source:t,target:n}}function Mi(e,t,n=bo.Left,o=!1){const i=((null==t?void 0:t.x)??0)+e.internals.positionAbsolute.x,r=((null==t?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??ei(e);if(o)return{x:i+a/2,y:r+s/2};switch((null==t?void 0:t.position)??n){case bo.Top:return{x:i+a/2,y:r};case bo.Right:return{x:i+a,y:r+s/2};case bo.Bottom:return{x:i+a/2,y:r+s};case bo.Left:return{x:i,y:r+s/2}}}function _i(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function Pi(e,t){if(!e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`}const ji={nodeOrigin:[0,0],nodeExtent:ao,elevateNodesOnSelect:!0,defaults:{}},Ai={...ji,checkEquality:!0};function Ii(e,t){const n={...e};for(const o in t)void 0!==t[o]&&(n[o]=t[o]);return n}function Di(e,t,n,o){var i,r;const a=Ii(Ai,o);let s=e.length>0;const l=new Map(t),c=(null==a?void 0:a.elevateNodesOnSelect)?1e3:0;t.clear(),n.clear();for(const d of e){let e=l.get(d.id);if(a.checkEquality&&d===(null==e?void 0:e.internals.userNode))t.set(d.id,e);else{const n=ko(d,a.nodeOrigin),o=Jo(d.extent)?d.extent:a.nodeExtent,s=Do(n,o,ei(d));e={...a.defaults,...d,measured:{width:null==(i=d.measured)?void 0:i.width,height:null==(r=d.measured)?void 0:r.height},internals:{positionAbsolute:s,handleBounds:d.measured?null==e?void 0:e.internals.handleBounds:void 0,z:zi(d,c),userNode:d}},t.set(d.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(s=!1),d.parentId&&Oi(e,t,n,o)}return s}function Oi(e,t,n,o){const{elevateNodesOnSelect:i,nodeOrigin:r,nodeExtent:a}=Ii(ji,o),s=e.parentId,l=t.get(s);if(!l)return;!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const c=i?1e3:0,{x:d,y:u,z:p}=function(e,t,n,o,i){const{x:r,y:a}=t.internals.positionAbsolute,s=ei(e),l=ko(e,n),c=Jo(e.extent)?Do(l,e.extent,s):l;let d=Do({x:r+c.x,y:a+c.y},o,s);"parent"===e.extent&&(d=Oo(d,s,t));const u=zi(e,i),p=t.internals.z??0;return{x:d.x,y:d.y,z:p>u?p:u}}(e,l,r,a,c),{positionAbsolute:h}=e.internals,f=d!==h.x||u!==h.y;(f||p!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:f?{x:d,y:u}:h,z:p}})}function zi(e,t){return(Yo(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function $i(e,t,n,o=[0,0]){var i;const r=[],a=new Map;for(const s of e){const e=t.get(s.parentId);if(!e)continue;const n=(null==(i=a.get(s.parentId))?void 0:i.expandedRect)??Bo(e),o=Ho(n,s.rect);a.set(s.parentId,{expandedRect:o,parent:e})}return a.size>0&&a.forEach((({expandedRect:t,parent:i},a)=>{var s;const l=i.internals.positionAbsolute,c=ei(i),d=i.origin??o,u=t.x<l.x?Math.round(Math.abs(l.x-t.x)):0,p=t.y<l.y?Math.round(Math.abs(l.y-t.y)):0,h=Math.max(c.width,Math.round(t.width)),f=Math.max(c.height,Math.round(t.height)),g=(h-c.width)*d[0],m=(f-c.height)*d[1];(u>0||p>0||g||m)&&(r.push({id:a,type:"position",position:{x:i.position.x-u+g,y:i.position.y-p+m}}),null==(s=n.get(a))||s.forEach((t=>{e.some((e=>e.id===t.id))||r.push({id:t.id,type:"position",position:{x:t.position.x+u,y:t.position.y+p}})}))),(c.width<t.width||c.height<t.height||u||p)&&r.push({id:a,type:"dimensions",setAttributes:!0,dimensions:{width:h+(u?d[0]*u-g:0),height:f+(p?d[1]*p-m:0)}})})),r}function Ri(e,t,n,o,i,r){let a=i;const s=o.get(a)||new Map;o.set(a,s.set(n,t)),a=`${i}-${e}`;const l=o.get(a)||new Map;if(o.set(a,l.set(n,t)),r){a=`${i}-${e}-${r}`;const s=o.get(a)||new Map;o.set(a,s.set(n,t))}}function Vi(e,t,n){e.clear(),t.clear();for(const o of n){const{source:n,target:i,sourceHandle:r=null,targetHandle:a=null}=o,s={edgeId:o.id,source:n,target:i,sourceHandle:r,targetHandle:a},l=`${n}-${r}--${i}-${a}`;Ri("source",s,`${i}-${a}--${n}-${r}`,e,n,r),Ri("target",s,l,e,i,a),t.set(o.id,o)}}function Ti(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Ti(n,t))}function Bi(e,t,n){var o;let i=e;do{if(null==(o=null==i?void 0:i.matches)?void 0:o.call(i,t))return!0;if(i===n)return!1;i=null==i?void 0:i.parentElement}while(i);return!1}function Li({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){var i,r,a;const s=[];for(const[c,d]of t){const e=null==(i=n.get(c))?void 0:i.internals.userNode;e&&s.push({...e,position:d.position,dragging:o})}if(!e)return[s[0],s];const l=null==(r=n.get(e))?void 0:r.internals.userNode;return[l?{...l,position:(null==(a=t.get(e))?void 0:a.position)||l.position,dragging:o}:s[0],s]}function Hi({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:i}){let r={x:null,y:null},a=0,s=new Map,l=!1,c={x:0,y:0},d=null,u=!1,p=null,h=!1;return{update:function({noDragClassName:f,handleSelector:g,domNode:m,isSelectable:x,nodeId:y,nodeClickDistance:v=0}){function b({x:e,y:n},i){const{nodeLookup:a,nodeExtent:l,snapGrid:c,snapToGrid:d,nodeOrigin:u,onNodeDrag:p,onSelectionDrag:h,onError:f,updateNodePositions:g}=t();r={x:e,y:n};let m=!1,x={x:0,y:0,x2:0,y2:0};if(s.size>1&&l){const e=Mo(s);x=Vo(e)}for(const[t,o]of s){if(!a.has(t))continue;let i={x:e-o.distance.x,y:n-o.distance.y};d&&(i=Fo(i,c));let r=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];if(s.size>1&&l&&!o.extent){const{positionAbsolute:e}=o.internals,t=e.x-x.x+l[0][0],n=e.x+o.measured.width-x.x2+l[1][0];r=[[t,e.y-x.y+l[0][1]],[n,e.y+o.measured.height-x.y2+l[1][1]]]}const{position:p,positionAbsolute:h}=jo({nodeId:t,nextPosition:i,nodeLookup:a,nodeExtent:r,nodeOrigin:u,onError:f});m=m||o.position.x!==p.x||o.position.y!==p.y,o.position=p,o.internals.positionAbsolute=h}if(m&&(g(s,!0),i&&(o||p||!y&&h))){const[e,t]=Li({nodeId:y,dragItems:s,nodeLookup:a});null==o||o(i,s,e,t),null==p||p(i,e,t),y||null==h||h(i,t)}}async function w(){if(!d)return;const{transform:e,panBy:n,autoPanSpeed:o,autoPanOnNodeDrag:i}=t();if(!i)return l=!1,void cancelAnimationFrame(a);const[s,u]=$o(c,d,o);0===s&&0===u||(r.x=(r.x??0)-s/e[2],r.y=(r.y??0)-u/e[2],await n({x:s,y:u})&&b(r,null)),a=requestAnimationFrame(w)}function S(o){var i;const{nodeLookup:a,multiSelectionActive:l,nodesDraggable:c,transform:p,snapGrid:h,snapToGrid:f,selectNodesOnDrag:g,onNodeDragStart:m,onSelectionDragStart:v,unselectNodesAndEdges:b}=t();u=!0,g&&x||l||!y||(null==(i=a.get(y))?void 0:i.selected)||b(),x&&g&&y&&(null==e||e(y));const w=ii(o.sourceEvent,{transform:p,snapGrid:h,snapToGrid:f,containerBounds:d});if(r=w,s=function(e,t,n,o){const i=new Map;for(const[r,a]of e)if((a.selected||a.id===o)&&(!a.parentId||!Ti(a,e))&&(a.draggable||t&&void 0===a.draggable)){const t=e.get(r);t&&i.set(r,{id:r,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return i}(a,c,w,y),s.size>0&&(n||m||!y&&v)){const[e,t]=Li({nodeId:y,dragItems:s,nodeLookup:a});null==n||n(o.sourceEvent,s,e,t),null==m||m(o.sourceEvent,e,t),y||null==v||v(o.sourceEvent,t)}}p=_e(m);const N=He().clickDistance(v).on("start",(e=>{const{domNode:n,nodeDragThreshold:o,transform:i,snapGrid:a,snapToGrid:s}=t();d=(null==n?void 0:n.getBoundingClientRect())||null,h=!1,0===o&&S(e);const l=ii(e.sourceEvent,{transform:i,snapGrid:a,snapToGrid:s,containerBounds:d});r=l,c=di(e.sourceEvent,d)})).on("drag",(e=>{const{autoPanOnNodeDrag:n,transform:o,snapGrid:i,snapToGrid:a,nodeDragThreshold:p,nodeLookup:f}=t(),g=ii(e.sourceEvent,{transform:o,snapGrid:i,snapToGrid:a,containerBounds:d});if(("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||y&&!f.has(y))&&(h=!0),!h){if(!l&&n&&u&&(l=!0,w()),!u){const t=g.xSnapped-(r.x??0),n=g.ySnapped-(r.y??0);Math.sqrt(t*t+n*n)>p&&S(e)}(r.x!==g.xSnapped||r.y!==g.ySnapped)&&s&&u&&(c=di(e.sourceEvent,d),b(g,e.sourceEvent))}})).on("end",(e=>{if(u&&!h&&(l=!1,u=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:n,updateNodePositions:o,onNodeDragStop:r,onSelectionDragStop:a}=t();if(o(s,!1),i||r||!y&&a){const[t,o]=Li({nodeId:y,dragItems:s,nodeLookup:n,dragging:!1});null==i||i(e.sourceEvent,s,t,o),null==r||r(e.sourceEvent,t,o),y||null==a||a(e.sourceEvent,o)}}})).filter((e=>{const t=e.target;return!e.button&&(!f||!Bi(t,`.${f}`,m))&&(!g||Bi(t,g,m))}));p.call(N)},destroy:function(){null==p||p.on(".drag",null)}}}function Zi(e,t,n,o){var i,r;let a=[],s=1/0;const l=function(e,t,n){const o=[],i={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const r of t.values())Zo(i,Bo(r))>0&&o.push(r);return o}(e,n,t+250);for(const c of l){const n=[...(null==(i=c.internals.handleBounds)?void 0:i.source)??[],...(null==(r=c.internals.handleBounds)?void 0:r.target)??[]];for(const i of n){if(o.nodeId===i.nodeId&&o.type===i.type&&o.id===i.id)continue;const{x:n,y:r}=Mi(c,i,i.position,!0),l=Math.sqrt(Math.pow(n-e.x,2)+Math.pow(r-e.y,2));l>t||(l<s?(a=[{...i,x:n,y:r}],s=l):l===s&&a.push({...i,x:n,y:r}))}}if(!a.length)return null;if(a.length>1){const e="source"===o.type?"target":"source";return a.find((t=>t.type===e))??a[0]}return a[0]}function Xi(e,t,n,o,i,r=!1){var a,s,l;const c=o.get(e);if(!c)return null;const d="strict"===i?null==(a=c.internals.handleBounds)?void 0:a[t]:[...(null==(s=c.internals.handleBounds)?void 0:s.source)??[],...(null==(l=c.internals.handleBounds)?void 0:l.target)??[]],u=(n?null==d?void 0:d.find((e=>e.id===n)):null==d?void 0:d[0])??null;return u&&r?{...u,...Mi(c,u,u.position,!0)}:u}function Yi(e,t){return e||((null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null)}const Wi=()=>!0;function Fi(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:r,doc:a,lib:s,flowId:l,isValidConnection:c=Wi,nodeLookup:d}){const u="target"===r,p=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${null==t?void 0:t.nodeId}-${null==t?void 0:t.id}-${null==t?void 0:t.type}"]`):null,{x:h,y:f}=di(e),g=a.elementFromPoint(h,f),m=(null==g?void 0:g.classList.contains(`${s}-flow__handle`))?g:p,x={handleDomNode:m,isValid:!1,connection:null,toHandle:null};if(m){const e=Yi(void 0,m),t=m.getAttribute("data-nodeid"),r=m.getAttribute("data-handleid"),a=m.classList.contains("connectable"),s=m.classList.contains("connectableend");if(!t||!e)return x;const l={source:u?t:o,sourceHandle:u?r:i,target:u?o:t,targetHandle:u?i:r};x.connection=l;const p=a&&s&&(n===lo.Strict?u&&"source"===e||!u&&"target"===e:t!==o||r!==i);x.isValid=p&&c(l),x.toHandle=Xi(t,e,r,d,n,!1)}return x}const Ki={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:i,edgeUpdaterType:r,isTarget:a,domNode:s,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:u,panBy:p,cancelConnection:h,onConnectStart:f,onConnect:g,onConnectEnd:m,isValidConnection:x=Wi,onReconnectEnd:y,updateConnection:v,getTransform:b,getFromHandle:w,autoPanSpeed:S}){const N=ai(e.target);let C,E=0;const{x:k,y:M}=di(e),_=null==N?void 0:N.elementFromPoint(k,M),P=Yi(r,_),j=null==s?void 0:s.getBoundingClientRect();if(!j||!P)return;const A=Xi(i,P,o,l,t);if(!A)return;let I=di(e,j),D=!1,O=null,z=!1,$=null;function R(){if(!d||!j)return;const[e,t]=$o(I,j,S);p({x:e,y:t}),E=requestAnimationFrame(R)}const V={...A,nodeId:i,type:P,position:A.position},T=l.get(i),B={inProgress:!0,isValid:null,from:Mi(T,V,bo.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:T,to:I,toHandle:null,toPosition:So[V.position],toNode:null};v(B);let L=B;function H(e){if(!w()||!V)return void Z(e);const r=b();I=di(e,j),C=Zi(Ko(I,r,!1,[1,1]),n,l,V),D||(R(),D=!0);const s=Fi(e,{handle:C,connectionMode:t,fromNodeId:i,fromHandleId:o,fromType:a?"target":"source",isValidConnection:x,doc:N,lib:c,flowId:u,nodeLookup:l});$=s.handleDomNode,O=s.connection,z=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!C,s.isValid);const d={...L,isValid:z,to:C&&z?Go({x:C.x,y:C.y},r):I,toHandle:s.toHandle,toPosition:z&&s.toHandle?s.toHandle.position:So[V.position],toNode:s.toHandle?l.get(s.toHandle.nodeId):null};z&&C&&L.toHandle&&d.toHandle&&L.toHandle.type===d.toHandle.type&&L.toHandle.nodeId===d.toHandle.nodeId&&L.toHandle.id===d.toHandle.id&&L.to.x===d.to.x&&L.to.y===d.to.y||(v(d),L=d)}function Z(e){(C||$)&&O&&z&&(null==g||g(O));const{inProgress:t,...n}=L,o={...n,toPosition:L.toHandle?L.toPosition:null};null==m||m(e,o),r&&(null==y||y(e,o)),h(),cancelAnimationFrame(E),D=!1,z=!1,O=null,$=null,N.removeEventListener("mousemove",H),N.removeEventListener("mouseup",Z),N.removeEventListener("touchmove",H),N.removeEventListener("touchend",Z)}null==f||f(e,{nodeId:i,handleId:o,handleType:P}),N.addEventListener("mousemove",H),N.addEventListener("mouseup",Z),N.addEventListener("touchmove",H),N.addEventListener("touchend",Z)},isValid:Fi};const Gi=e=>({x:e.x,y:e.y,zoom:e.k}),qi=({x:e,y:t,zoom:n})=>Tn.translate(e,t).scale(n),Ui=(e,t)=>e.target.closest(`.${t}`),Qi=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),Ji=(e,t=0,n=()=>{})=>{const o="number"==typeof t&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},er=e=>{const t=e.ctrlKey&&Qo()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function tr({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:i,viewport:r,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:c}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=e.getBoundingClientRect(),p=Gn().clickDistance(!Yo(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(i),h=_e(e).call(p);y({x:r.x,y:r.y,zoom:Io(r.zoom,t,n)},[[0,0],[u.width,u.height]],i);const f=h.on("wheel.zoom"),g=h.on("dblclick.zoom");function m(e,t){return h?new Promise((n=>{null==p||p.transform(Ji(h,null==t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)}function x(){p.on("zoom",null)}async function y(e,t,n){const o=qi(e),i=null==p?void 0:p.constrain()(o,t,n);return i&&await m(i),new Promise((e=>e(i)))}return p.wheelDelta(er),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:o,panOnScroll:i,panOnDrag:r,panOnScrollMode:u,panOnScrollSpeed:m,preventScrolling:y,zoomOnPinch:v,zoomOnScroll:b,zoomOnDoubleClick:w,zoomActivationKeyPressed:S,lib:N,onTransformChange:C}){o&&!d.isZoomingOrPanning&&x();const E=i&&!S&&!o?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:i,panOnScrollSpeed:r,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:c}){return d=>{if(Ui(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const u=n.property("__zoom").k||1;if(d.ctrlKey&&a){const e=Pe(d),t=er(d),i=u*Math.pow(2,t);return void o.scaleTo(n,i,e,d)}const p=1===d.deltaMode?20:1;let h=i===uo.Vertical?0:d.deltaX*p,f=i===uo.Horizontal?0:d.deltaY*p;!Qo()&&d.shiftKey&&i!==uo.Vertical&&(h=d.deltaY*p,f=0),o.translateBy(n,-h/u*r,-f/u*r,{internal:!0});const g=Gi(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,null==s||s(d,g)),e.isPanScrolling&&(null==l||l(d,g),e.panScrollTimeout=setTimeout((()=>{null==c||c(d,g),e.isPanScrolling=!1}),150))}}({zoomPanValues:d,noWheelClassName:e,d3Selection:h,d3Zoom:p,panOnScrollMode:u,panOnScrollSpeed:m,zoomOnPinch:v,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:l}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,i){const r="wheel"===o.type,a=!t&&r&&!o.ctrlKey,s=Ui(o,e);if(o.ctrlKey&&r&&s&&o.preventDefault(),a||s)return null;o.preventDefault(),n.call(this,o,i)}}({noWheelClassName:e,preventScrolling:y,d3ZoomHandler:f});if(h.on("wheel.zoom",E,{passive:!1}),!o){const e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{var i,r,a;if(null==(i=o.sourceEvent)?void 0:i.internal)return;const s=Gi(o.transform);e.mouseButton=(null==(r=o.sourceEvent)?void 0:r.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,"mousedown"===(null==(a=o.sourceEvent)?void 0:a.type)&&t(!0),n&&(null==n||n(o.sourceEvent,s))}}({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:s});p.on("start",e);const t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:i}){return r=>{var a,s;e.usedRightMouseButton=!(!n||!Qi(t,e.mouseButton??0)),(null==(a=r.sourceEvent)?void 0:a.sync)||o([r.transform.x,r.transform.y,r.transform.k]),i&&!(null==(s=r.sourceEvent)?void 0:s.internal)&&(null==i||i(r.sourceEvent,Gi(r.transform)))}}({zoomPanValues:d,panOnDrag:r,onPaneContextMenu:!!n,onPanZoom:a,onTransformChange:C});p.on("zoom",t);const o=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:i,onPaneContextMenu:r}){return a=>{var s,l,c;if(!(null==(s=a.sourceEvent)?void 0:s.internal)&&(e.isZoomingOrPanning=!1,r&&Qi(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&r(a.sourceEvent),e.usedRightMouseButton=!1,o(!1),i&&(l=e.prevViewport,c=a.transform,l.x!==c.x||l.y!==c.y||l.zoom!==c.k))){const t=Gi(a.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout((()=>{null==i||i(a.sourceEvent,t)}),n?150:0)}}}({zoomPanValues:d,panOnDrag:r,panOnScroll:i,onPaneContextMenu:n,onPanZoomEnd:l,onDraggingChange:c});p.on("end",o)}const k=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:i,zoomOnDoubleClick:r,userSelectionActive:a,noWheelClassName:s,noPanClassName:l,lib:c}){return d=>{var u;const p=e||t,h=n&&d.ctrlKey;if(1===d.button&&"mousedown"===d.type&&(Ui(d,`${c}-flow__node`)||Ui(d,`${c}-flow__edge`)))return!0;if(!(o||p||i||r||n))return!1;if(a)return!1;if(Ui(d,s)&&"wheel"===d.type)return!1;if(Ui(d,l)&&("wheel"!==d.type||i&&"wheel"===d.type&&!e))return!1;if(!n&&d.ctrlKey&&"wheel"===d.type)return!1;if(!n&&"touchstart"===d.type&&(null==(u=d.touches)?void 0:u.length)>1)return d.preventDefault(),!1;if(!p&&!i&&!h&&"wheel"===d.type)return!1;if(!o&&("mousedown"===d.type||"touchstart"===d.type))return!1;if(Array.isArray(o)&&!o.includes(d.button)&&"mousedown"===d.type)return!1;const f=Array.isArray(o)&&o.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||"wheel"===d.type)&&f}}({zoomActivationKeyPressed:S,panOnDrag:r,zoomOnScroll:b,panOnScroll:i,zoomOnDoubleClick:w,zoomOnPinch:v,userSelectionActive:o,noPanClassName:t,noWheelClassName:e,lib:N});p.filter(k),w?h.on("dblclick.zoom",g):h.on("dblclick.zoom",null)},destroy:x,setViewport:async function(e,t){const n=qi(e);return await m(n,t),new Promise((e=>e(n)))},setViewportConstrained:y,getViewport:function(){const e=h?Bn(h.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return h?new Promise((n=>{null==p||p.scaleTo(Ji(h,null==t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},scaleBy:function(e,t){return h?new Promise((n=>{null==p||p.scaleBy(Ji(h,null==t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},setScaleExtent:function(e){null==p||p.scaleExtent(e)},setTranslateExtent:function(e){null==p||p.translateExtent(e)},syncViewport:function(e){if(h){const t=qi(e),n=h.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||null==p||p.transform(h,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Yo(e)||e<0?0:e;null==p||p.clickDistance(t)}}}var nr,or;function ir(e,t){return Math.max(0,t-e)}function rr(e,t){return Math.max(0,e-t)}function ar(e,t,n){return Math.max(0,t-e,e-n)}function sr(e,t){return e?!t:t}(or=nr||(nr={})).Line="line",or.Handle="handle";const lr={width:0,height:0,x:0,y:0},cr={...lr,pointerX:0,pointerY:0,aspectRatio:1};function dr(e,t,n){const o=t.position.x+e.position.x,i=t.position.y+e.position.y,r=e.measured.width??0,a=e.measured.height??0,s=n[0]*r,l=n[1]*a;return[[o-s,i-l],[o+r-s,i+a-l]]}function ur({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:i}){const r=_e(e);return{update:function({controlPosition:e,boundaries:a,keepAspectRatio:s,resizeDirection:l,onResizeStart:c,onResize:d,onResizeEnd:u,shouldResize:p}){let h={...lr},f={...cr};const g=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(e);let m,x,y,v,b=null,w=[];const S=He().on("start",(e=>{const{nodeLookup:o,transform:i,snapGrid:r,snapToGrid:a,nodeOrigin:s,paneDomNode:l}=n();if(m=o.get(t),!m)return;b=(null==l?void 0:l.getBoundingClientRect())??null;const{xSnapped:d,ySnapped:u}=ii(e.sourceEvent,{transform:i,snapGrid:r,snapToGrid:a,containerBounds:b});h={width:m.measured.width??0,height:m.measured.height??0,x:m.position.x??0,y:m.position.y??0},f={...h,pointerX:d,pointerY:u,aspectRatio:h.width/h.height},x=void 0,m.parentId&&("parent"===m.extent||m.expandParent)&&(x=o.get(m.parentId),y=x&&"parent"===m.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(x):void 0),w=[],v=void 0;for(const[n,c]of o)if(c.parentId===t&&(w.push({id:n,position:{...c.position},extent:c.extent}),"parent"===c.extent||c.expandParent)){const e=dr(c,m,c.origin??s);v=v?[[Math.min(e[0][0],v[0][0]),Math.min(e[0][1],v[0][1])],[Math.max(e[1][0],v[1][0]),Math.max(e[1][1],v[1][1])]]:e}null==c||c(e,{...h})})).on("drag",(e=>{const{transform:t,snapGrid:i,snapToGrid:r,nodeOrigin:c}=n(),u=ii(e.sourceEvent,{transform:t,snapGrid:i,snapToGrid:r,containerBounds:b}),S=[];if(!m)return;const{x:N,y:C,width:E,height:k}=h,M={},_=m.origin??c,{width:P,height:j,x:A,y:I}=function(e,t,n,o,i,r,a,s){let{affectsX:l,affectsY:c}=t;const{isHorizontal:d,isVertical:u}=t,p=d&&u,{xSnapped:h,ySnapped:f}=n,{minWidth:g,maxWidth:m,minHeight:x,maxHeight:y}=o,{x:v,y:b,width:w,height:S,aspectRatio:N}=e;let C=Math.floor(d?h-e.pointerX:0),E=Math.floor(u?f-e.pointerY:0);const k=w+(l?-C:C),M=S+(c?-E:E),_=-r[0]*w,P=-r[1]*S;let j=ar(k,g,m),A=ar(M,x,y);if(a){let e=0,t=0;l&&C<0?e=ir(v+C+_,a[0][0]):!l&&C>0&&(e=rr(v+k+_,a[1][0])),c&&E<0?t=ir(b+E+P,a[0][1]):!c&&E>0&&(t=rr(b+M+P,a[1][1])),j=Math.max(j,e),A=Math.max(A,t)}if(s){let e=0,t=0;l&&C>0?e=rr(v+C,s[0][0]):!l&&C<0&&(e=ir(v+k,s[1][0])),c&&E>0?t=rr(b+E,s[0][1]):!c&&E<0&&(t=ir(b+M,s[1][1])),j=Math.max(j,e),A=Math.max(A,t)}if(i){if(d){const e=ar(k/N,x,y)*N;if(j=Math.max(j,e),a){let e=0;e=!l&&!c||l&&!c&&p?rr(b+P+k/N,a[1][1])*N:ir(b+P+(l?C:-C)/N,a[0][1])*N,j=Math.max(j,e)}if(s){let e=0;e=!l&&!c||l&&!c&&p?ir(b+k/N,s[1][1])*N:rr(b+(l?C:-C)/N,s[0][1])*N,j=Math.max(j,e)}}if(u){const e=ar(M*N,g,m)/N;if(A=Math.max(A,e),a){let e=0;e=!l&&!c||c&&!l&&p?rr(v+M*N+_,a[1][0])/N:ir(v+(c?E:-E)*N+_,a[0][0])/N,A=Math.max(A,e)}if(s){let e=0;e=!l&&!c||c&&!l&&p?ir(v+M*N,s[1][0])/N:rr(v+(c?E:-E)*N,s[0][0])/N,A=Math.max(A,e)}}}E+=E<0?A:-A,C+=C<0?j:-j,i&&(p?k>M*N?E=(sr(l,c)?-C:C)/N:C=(sr(l,c)?-E:E)*N:d?(E=C/N,c=l):(C=E*N,l=c));const I=l?v+C:v,D=c?b+E:b;return{width:w+(l?-C:C),height:S+(c?-E:E),x:r[0]*C*(l?-1:1)+I,y:r[1]*E*(c?-1:1)+D}}(f,g,u,a,s,_,y,v),D=P!==E,O=j!==k,z=A!==N&&D,$=I!==C&&O;if(!(z||$||D||O))return;if((z||$||1===_[0]||1===_[1])&&(M.x=z?A:h.x,M.y=$?I:h.y,h.x=M.x,h.y=M.y,w.length>0)){const e=A-N,t=I-C;for(const n of w)n.position={x:n.position.x-e+_[0]*(P-E),y:n.position.y-t+_[1]*(j-k)},S.push(n)}if((D||O)&&(M.width=!D||l&&"horizontal"!==l?h.width:P,M.height=!O||l&&"vertical"!==l?h.height:j,h.width=M.width,h.height=M.height),x&&m.expandParent){const e=_[0]*(M.width??0);M.x&&M.x<e&&(h.x=e,f.x=f.x-(M.x-e));const t=_[1]*(M.height??0);M.y&&M.y<t&&(h.y=t,f.y=f.y-(M.y-t))}const R=function({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:i,affectsY:r}){const a=e-t,s=n-o,l=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&i&&(l[0]=-1*l[0]),s&&r&&(l[1]=-1*l[1]),l}({width:h.width,prevWidth:E,height:h.height,prevHeight:k,affectsX:g.affectsX,affectsY:g.affectsY}),V={...h,direction:R};!1!==(null==p?void 0:p(e,V))&&(null==d||d(e,V),o(M,S))})).on("end",(e=>{null==u||u(e,{...h}),null==i||i({...h})}));r.call(S)},destroy:function(){r.on(".drag",null)}}}var pr={exports:{}},hr={},fr={exports:{}},gr={},mr=n;var xr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},yr=mr.useState,vr=mr.useEffect,br=mr.useLayoutEffect,wr=mr.useDebugValue;function Sr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xr(e,n)}catch(o){return!0}}var Nr="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),o=yr({inst:{value:n,getSnapshot:t}}),i=o[0].inst,r=o[1];return br((function(){i.value=n,i.getSnapshot=t,Sr(i)&&r({inst:i})}),[e,n,t]),vr((function(){return Sr(i)&&r({inst:i}),e((function(){Sr(i)&&r({inst:i})}))}),[e]),wr(n),n};gr.useSyncExternalStore=void 0!==mr.useSyncExternalStore?mr.useSyncExternalStore:Nr,fr.exports=gr;var Cr=fr.exports,Er=n,kr=Cr;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},_r=kr.useSyncExternalStore,Pr=Er.useRef,jr=Er.useEffect,Ar=Er.useMemo,Ir=Er.useDebugValue;hr.useSyncExternalStoreWithSelector=function(e,t,n,o,i){var r=Pr(null);if(null===r.current){var a={hasValue:!1,value:null};r.current=a}else a=r.current;r=Ar((function(){function e(e){if(!l){if(l=!0,r=e,e=o(e),void 0!==i&&a.hasValue){var t=a.value;if(i(t,e))return s=t}return s=e}if(t=s,Mr(r,e))return t;var n=o(e);return void 0!==i&&i(t,n)?(r=e,t):(r=e,s=n)}var r,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,o,i]);var s=_r(e,r[0],r[1]);return jr((function(){a.hasValue=!0,a.value=s}),[s]),Ir(s),s},pr.exports=hr;const Dr=o(pr.exports),Or=e=>{let t;const n=new Set,o=(e,o)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=o?o:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,r={setState:o,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{n.clear()}},a=t=e(o,i,r);return r},{useDebugValue:zr}=i,{useSyncExternalStoreWithSelector:$r}=Dr,Rr=e=>e;function Vr(e,t=Rr,n){const o=$r(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return zr(o),o}const Tr=(e,t)=>{const n=(e=>e?Or(e):Or)(e),o=(e,o=t)=>Vr(n,e,o);return Object.assign(o,n),o};function Br(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const Lr=n.createContext(null),Hr=Lr.Provider,Zr=qn();function Xr(e,t){const o=n.useContext(Lr);if(null===o)throw new Error(Zr);return Vr(o,e,t)}function Yr(){const e=n.useContext(Lr);if(null===e)throw new Error(Zr);return n.useMemo((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe})),[e])}const Wr={display:"none"},Fr={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Kr="react-flow__node-desc",Gr="react-flow__edge-desc",qr=e=>e.ariaLiveMessage;function Ur({rfId:e}){const t=Xr(qr);return r.jsx("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Fr,children:t})}function Qr({rfId:e,disableKeyboardA11y:t}){return r.jsxs(r.Fragment,{children:[r.jsxs("div",{id:`${Kr}-${e}`,style:Wr,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),r.jsx("div",{id:`${Gr}-${e}`,style:Wr,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&r.jsx(Ur,{rfId:e})]})}const Jr=e=>e.userSelectionActive?"none":"all",ea=n.forwardRef((({position:e="top-left",children:t,className:n,style:o,...i},a)=>{const s=Xr(Jr),l=`${e}`.split("-");return r.jsx("div",{className:d(["react-flow__panel",n,...l]),style:{...o,pointerEvents:s},ref:a,...i,children:t})}));function ta({proOptions:e,position:t="bottom-right"}){return(null==e?void 0:e.hideAttribution)?null:r.jsx(ea,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:r.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}ea.displayName="Panel";const na=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},oa=e=>e.id;function ia(e,t){return Br(e.selectedNodes.map(oa),t.selectedNodes.map(oa))&&Br(e.selectedEdges.map(oa),t.selectedEdges.map(oa))}function ra({onSelectionChange:e}){const t=Yr(),{selectedNodes:o,selectedEdges:i}=Xr(na,ia);return n.useEffect((()=>{const n={nodes:o,edges:i};null==e||e(n),t.getState().onSelectionChangeHandlers.forEach((e=>e(n)))}),[o,i,e]),null}const aa=e=>!!e.onSelectionChangeHandlers;function sa({onSelectionChange:e}){const t=Xr(aa);return e||t?r.jsx(ra,{onSelectionChange:e}):null}const la=[0,0],ca={x:0,y:0,zoom:1},da=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],ua=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),pa={translateExtent:ao,nodeOrigin:la,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function ha(e){const{setNodes:t,setEdges:o,setMinZoom:i,setMaxZoom:r,setTranslateExtent:a,setNodeExtent:s,reset:l,setDefaultNodesAndEdges:c,setPaneClickDistance:d}=Xr(ua,Br),u=Yr();n.useEffect((()=>(c(e.defaultNodes,e.defaultEdges),()=>{p.current=pa,l()})),[]);const p=n.useRef(pa);return n.useEffect((()=>{for(const n of da){const l=e[n];l!==p.current[n]&&(void 0!==e[n]&&("nodes"===n?t(l):"edges"===n?o(l):"minZoom"===n?i(l):"maxZoom"===n?r(l):"translateExtent"===n?a(l):"nodeExtent"===n?s(l):"paneClickDistance"===n?d(l):"fitView"===n?u.setState({fitViewQueued:l}):"fitViewOptions"===n?u.setState({fitViewOptions:l}):u.setState({[n]:l})))}p.current=e}),da.map((t=>e[t]))),null}function fa(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const ga="undefined"!=typeof document?document:null;function ma(e=null,t={target:ga,actInsideInputWithModifier:!0}){const[o,i]=n.useState(!1),r=n.useRef(!1),a=n.useRef(new Set([])),[s,l]=n.useMemo((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"==typeof e)).map((e=>e.replace("+","\n").replace("\n\n","\n+").split("\n"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return n.useEffect((()=>{const n=(null==t?void 0:t.target)||ga;if(null!==e){const e=e=>{var n,o;r.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey;if((!r.current||r.current&&!t.actInsideInputWithModifier)&&li(e))return!1;const c=ya(e.code,l);if(a.current.add(e[c]),xa(s,a.current,!1)){const a=(null==(o=null==(n=e.composedPath)?void 0:n.call(e))?void 0:o[0])||e.target,s="BUTTON"===(null==a?void 0:a.nodeName)||"A"===(null==a?void 0:a.nodeName);!1===t.preventDefault||!r.current&&s||e.preventDefault(),i(!0)}},o=e=>{const t=ya(e.code,l);xa(s,a.current,!0)?(i(!1),a.current.clear()):a.current.delete(e[t]),"Meta"===e.key&&a.current.clear(),r.current=!1},c=()=>{a.current.clear(),i(!1)};return null==n||n.addEventListener("keydown",e),null==n||n.addEventListener("keyup",o),window.addEventListener("blur",c),window.addEventListener("contextmenu",c),()=>{null==n||n.removeEventListener("keydown",e),null==n||n.removeEventListener("keyup",o),window.removeEventListener("blur",c),window.removeEventListener("contextmenu",c)}}}),[e,i]),o}function xa(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function ya(e,t){return t.includes(e)?"code":"key"}function va(e,t){const n=[],o=new Map,i=[];for(const r of e)if("add"!==r.type)if("remove"===r.type||"replace"===r.type)o.set(r.id,[r]);else{const e=o.get(r.id);e?e.push(r):o.set(r.id,[r])}else i.push(r);for(const r of t){const e=o.get(r.id);if(!e){n.push(r);continue}if("remove"===e[0].type)continue;if("replace"===e[0].type){n.push({...e[0].item});continue}const t={...r};for(const n of e)ba(n,t);n.push(t)}return i.length&&i.forEach((e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})})),n}function ba(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(!0!==e.setAttributes&&"width"!==e.setAttributes||(t.width=e.dimensions.width),!0!==e.setAttributes&&"height"!==e.setAttributes||(t.height=e.dimensions.height))),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}function wa(e,t){return va(e,t)}function Sa(e,t){return va(e,t)}function Na(e,t){return{id:e,type:"select",selected:t}}function Ca(e,t=new Set,n=!1){const o=[];for(const[i,r]of e){const e=t.has(i);void 0===r.selected&&!e||r.selected===e||(n&&(r.selected=e),o.push(Na(r.id,e)))}return o}function Ea({items:e=[],lookup:t}){var n;const o=[],i=new Map(e.map((e=>[e.id,e])));for(const[r,a]of e.entries()){const e=t.get(a.id),i=(null==(n=null==e?void 0:e.internals)?void 0:n.userNode)??e;void 0!==i&&i!==a&&o.push({id:a.id,item:a,type:"replace"}),void 0===i&&o.push({item:a,type:"add",index:r})}for(const[r]of t){void 0===i.get(r)&&o.push({id:r,type:"remove"})}return o}function ka(e){return{id:e.id,type:"remove"}}const Ma=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function _a(e){return n.forwardRef(e)}const Pa="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;function ja(e){const[t,o]=n.useState(BigInt(0)),[i]=n.useState((()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}((()=>o((e=>e+BigInt(1)))))));return Pa((()=>{const t=i.get();t.length&&(e(t),i.reset())}),[t]),i}const Aa=n.createContext(null);function Ia({children:e}){const t=Yr(),o=ja(n.useCallback((e=>{const{nodes:n=[],setNodes:o,hasDefaultNodes:i,onNodesChange:r,nodeLookup:a,fitViewQueued:s}=t.getState();let l=n;for(const t of e)l="function"==typeof t?t(l):t;if(i)o(l);else{const e=Ea({items:l,lookup:a});e.length>0?null==r||r(e):s&&window.requestAnimationFrame((()=>{const{fitViewQueued:e,nodes:n,setNodes:o}=t.getState();e&&o(n)}))}}),[])),i=ja(n.useCallback((e=>{const{edges:n=[],setEdges:o,hasDefaultEdges:i,onEdgesChange:r,edgeLookup:a}=t.getState();let s=n;for(const t of e)s="function"==typeof t?t(s):t;i?o(s):r&&r(Ea({items:s,lookup:a}))}),[])),a=n.useMemo((()=>({nodeQueue:o,edgeQueue:i})),[]);return r.jsx(Aa.Provider,{value:a,children:e})}const Da=e=>!!e.panZoom;function Oa(){const e=(()=>{const e=Yr();return n.useMemo((()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:null==t?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:null==t?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:null==n?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,i,r],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??o,y:t.y??i,zoom:t.zoom??r},{duration:null==n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>{const{width:i,height:r,maxZoom:a,panZoom:s}=e.getState(),l=void 0!==(null==o?void 0:o.zoom)?o.zoom:a,c=i/2-t*l,d=r/2-n*l;return s?(await s.setViewport({x:c,y:d,zoom:l},{duration:null==o?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:i,minZoom:r,maxZoom:a,panZoom:s}=e.getState(),l=Uo(t,o,i,r,a,(null==n?void 0:n.padding)??.1);return s?(await s.setViewport(l,{duration:null==n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:o,snapGrid:i,snapToGrid:r,domNode:a}=e.getState();if(!a)return t;const{x:s,y:l}=a.getBoundingClientRect(),c={x:t.x-s,y:t.y-l},d=n.snapGrid??i,u=n.snapToGrid??r;return Ko(c,o,u,d)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:i,y:r}=o.getBoundingClientRect(),a=Go(t,n);return{x:a.x+i,y:a.y+r}}})),[])})(),t=Yr(),o=function(){const e=n.useContext(Aa);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),i=Xr(Da),r=n.useMemo((()=>{const e=e=>t.getState().nodeLookup.get(e),n=e=>{o.nodeQueue.push(e)},i=e=>{o.edgeQueue.push(e)},r=e=>{var n,o;const{nodeLookup:i,nodeOrigin:r}=t.getState(),a=Ma(e)?e:i.get(e.id),s=a.parentId?ni(a.position,a.measured,a.parentId,i,r):a.position,l={...a,position:s,width:(null==(n=a.measured)?void 0:n.width)??a.width,height:(null==(o=a.measured)?void 0:o.height)??a.height};return Bo(l)},a=(e,t,o={replace:!1})=>{n((n=>n.map((n=>{if(n.id===e){const e="function"==typeof t?t(n):t;return o.replace&&Ma(e)?e:{...n,...e}}return n}))))},s=(e,t,n={replace:!1})=>{i((o=>o.map((o=>{if(o.id===e){const e="function"==typeof t?t(o):t;return n.replace&&Co(e)?e:{...o,...e}}return o}))))};return{getNodes:()=>t.getState().nodes.map((e=>({...e}))),getNode:t=>{var n;return null==(n=e(t))?void 0:n.internals.userNode},getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map((e=>({...e})))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:n,setEdges:i,addNodes:e=>{const t=Array.isArray(e)?e:[e];o.nodeQueue.push((e=>[...e,...t]))},addEdges:e=>{const t=Array.isArray(e)?e:[e];o.edgeQueue.push((e=>[...e,...t]))},toObject:()=>{const{nodes:e=[],edges:n=[],transform:o}=t.getState(),[i,r,a]=o;return{nodes:e.map((e=>({...e}))),edges:n.map((e=>({...e}))),viewport:{x:i,y:r,zoom:a}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{const{nodes:o,edges:i,onNodesDelete:r,onEdgesDelete:a,triggerNodeChanges:s,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:d}=t.getState(),{nodes:u,edges:p}=await Ao({nodesToRemove:e,edgesToRemove:n,nodes:o,edges:i,onBeforeDelete:d}),h=p.length>0,f=u.length>0;if(h){const e=p.map(ka);null==a||a(p),l(e)}if(f){const e=u.map(ka);null==r||r(u),s(e)}return(f||h)&&(null==c||c({nodes:u,edges:p})),{deletedNodes:u,deletedEdges:p}},getIntersectingNodes:(e,n=!0,o)=>{const i=Xo(e),a=i?e:r(e),s=void 0!==o;return a?(o||t.getState().nodes).filter((o=>{const r=t.getState().nodeLookup.get(o.id);if(r&&!i&&(o.id===e.id||!r.internals.positionAbsolute))return!1;const l=Bo(s?o:r),c=Zo(l,a);return n&&c>0||c>=a.width*a.height})):[]},isNodeIntersecting:(e,t,n=!0)=>{const o=Xo(e)?e:r(e);if(!o)return!1;const i=Zo(o,t);return n&&i>0||i>=o.width*o.height},updateNode:a,updateNodeData:(e,t,n={replace:!1})=>{a(e,(e=>{const o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),n)},updateEdge:s,updateEdgeData:(e,t,n={replace:!1})=>{s(e,(e=>{const o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:o}=t.getState();return((e,t={nodeOrigin:[0,0]})=>{if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce(((e,n)=>{const o="string"==typeof n;let i=t.nodeLookup||o?void 0:n;t.nodeLookup&&(i=o?t.nodeLookup.get(n):Eo(n)?n:t.nodeLookup.get(n.id));const r=i?Lo(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ro(e,r)}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return To(n)})(e,{nodeLookup:n,nodeOrigin:o})},getHandleConnections:({type:e,id:n,nodeId:o})=>{var i;return Array.from((null==(i=t.getState().connectionLookup.get(`${o}-${e}${n?`-${n}`:""}`))?void 0:i.values())??[])},getNodeConnections:({type:e,handleId:n,nodeId:o})=>{var i;return Array.from((null==(i=t.getState().connectionLookup.get(`${o}${e?n?`-${e}-${n}`:`-${e}`:""}`))?void 0:i.values())??[])},fitView:async e=>{const n=t.getState().fitViewResolver??function(){let e,t;return{promise:new Promise(((n,o)=>{e=n,t=o})),resolve:e,reject:t}}();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:n}),o.nodeQueue.push((e=>[...e])),n.promise}}}),[]);return n.useMemo((()=>({...r,...e,viewportInitialized:i})),[i])}const za=e=>e.selected,$a={actInsideInputWithModifier:!1},Ra="undefined"!=typeof window?window:void 0;const Va={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ta=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function Ba({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:s=uo.Free,zoomOnDoubleClick:l=!0,panOnDrag:c=!0,defaultViewport:d,translateExtent:u,minZoom:p,maxZoom:h,zoomActivationKeyCode:f,preventScrolling:g=!0,children:m,noWheelClassName:x,noPanClassName:y,onViewportChange:v,isControlledViewport:b,paneClickDistance:w}){const S=Yr(),N=n.useRef(null),{userSelectionActive:C,lib:E}=Xr(Ta,Br),k=ma(f),M=n.useRef();!function(e){const t=Yr();n.useEffect((()=>{const n=()=>{var n,o;if(!e.current)return!1;const i=ri(e.current);0!==i.height&&0!==i.width||null==(o=(n=t.getState()).onError)||o.call(n,"004",Qn()),t.setState({width:i.width||500,height:i.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver((()=>n()));return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}}),[])}(N);const _=n.useCallback((e=>{null==v||v({x:e[0],y:e[1],zoom:e[2]}),b||S.setState({transform:e})}),[v,b]);return n.useEffect((()=>{if(N.current){M.current=tr({domNode:N.current,minZoom:p,maxZoom:h,translateExtent:u,viewport:d,paneClickDistance:w,onDraggingChange:e=>S.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:o}=S.getState();null==o||o(e,t),null==n||n(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:o}=S.getState();null==o||o(e,t),null==n||n(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:o}=S.getState();null==o||o(e,t),null==n||n(t)}});const{x:e,y:t,zoom:n}=M.current.getViewport();return S.setState({panZoom:M.current,transform:[e,t,n],domNode:N.current.closest(".react-flow")}),()=>{var e;null==(e=M.current)||e.destroy()}}}),[]),n.useEffect((()=>{var n;null==(n=M.current)||n.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:o,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:s,zoomOnDoubleClick:l,panOnDrag:c,zoomActivationKeyPressed:k,preventScrolling:g,noPanClassName:y,userSelectionActive:C,noWheelClassName:x,lib:E,onTransformChange:_})}),[e,t,o,i,a,s,l,c,k,g,y,C,x,E,_]),r.jsx("div",{className:"react-flow__renderer",ref:N,style:Va,children:m})}const La=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ha(){const{userSelectionActive:e,userSelectionRect:t}=Xr(La,Br);return e&&t?r.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Za=(e,t)=>n=>{n.target===t.current&&(null==e||e(n))},Xa=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Ya({isSelecting:e,selectionKeyPressed:t,selectionMode:o=ho.Full,panOnDrag:i,selectionOnDrag:a,onSelectionStart:s,onSelectionEnd:l,onPaneClick:c,onPaneContextMenu:u,onPaneScroll:p,onPaneMouseEnter:h,onPaneMouseMove:f,onPaneMouseLeave:g,children:m}){const x=Yr(),{userSelectionActive:y,elementsSelectable:v,dragging:b,connectionInProgress:w}=Xr(Xa,Br),S=v&&(e||y),N=n.useRef(null),C=n.useRef(),E=n.useRef(new Set),k=n.useRef(new Set),M=n.useRef(!1),_=n.useRef(!1),P=e=>{M.current||w?M.current=!1:(null==c||c(e),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1}))},j=p?e=>p(e):void 0,A=!0===i||Array.isArray(i)&&i.includes(0);return r.jsxs("div",{className:d(["react-flow__pane",{draggable:A,dragging:b,selection:e}]),onClick:S?void 0:Za(P,N),onContextMenu:Za((e=>{Array.isArray(i)&&(null==i?void 0:i.includes(2))?e.preventDefault():null==u||u(e)}),N),onWheel:Za(j,N),onPointerEnter:S?void 0:h,onPointerDown:S?t=>{var n,o;const{resetSelectedElements:i,domNode:r}=x.getState();if(C.current=null==r?void 0:r.getBoundingClientRect(),!v||!e||0!==t.button||t.target!==N.current||!C.current)return;null==(o=null==(n=t.target)?void 0:n.setPointerCapture)||o.call(n,t.pointerId),_.current=!0,M.current=!1;const{x:a,y:l}=di(t.nativeEvent,C.current);i(),x.setState({userSelectionRect:{width:0,height:0,startX:a,startY:l,x:a,y:l}}),null==s||s(t)}:f,onPointerMove:S?e=>{const{userSelectionRect:t,transform:n,nodeLookup:i,edgeLookup:r,connectionLookup:a,triggerNodeChanges:s,triggerEdgeChanges:l,defaultEdgeOptions:c}=x.getState();if(!C.current||!t)return;M.current=!0;const{x:d,y:u}=di(e.nativeEvent,C.current),{startX:p,startY:h}=t,f={startX:p,startY:h,x:d<p?d:p,y:u<h?u:h,width:Math.abs(d-p),height:Math.abs(u-h)},g=E.current,m=k.current;E.current=new Set(_o(i,f,n,o===ho.Partial,!0).map((e=>e.id))),k.current=new Set;const y=(null==c?void 0:c.selectable)??!0;for(const o of E.current){const e=a.get(o);if(e)for(const{edgeId:t}of e.values()){const e=r.get(t);e&&(e.selectable??y)&&k.current.add(t)}}if(!oi(g,E.current)){s(Ca(i,E.current,!0))}if(!oi(m,k.current)){l(Ca(r,k.current))}x.setState({userSelectionRect:f,userSelectionActive:!0,nodesSelectionActive:!1})}:f,onPointerUp:S?e=>{var n,o;if(0!==e.button||!_.current)return;null==(o=null==(n=e.target)?void 0:n.releasePointerCapture)||o.call(n,e.pointerId);const{userSelectionRect:i}=x.getState();!y&&i&&e.target===N.current&&(null==P||P(e)),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:E.current.size>0}),null==l||l(e),(t||a)&&(M.current=!1),_.current=!1}:void 0,onPointerLeave:g,ref:N,style:Va,children:[m,r.jsx(Ha,{})]})}function Wa({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:i,unselectNodesAndEdges:r,multiSelectionActive:a,nodeLookup:s,onError:l}=t.getState(),c=s.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&a)&&(r({nodes:[c],edges:[]}),requestAnimationFrame((()=>{var e;return null==(e=null==o?void 0:o.current)?void 0:e.blur()}))):i([e])):null==l||l("012",io(e))}function Fa({nodeRef:e,disabled:t=!1,noDragClassName:o,handleSelector:i,nodeId:r,isSelectable:a,nodeClickDistance:s}){const l=Yr(),[c,d]=n.useState(!1),u=n.useRef();return n.useEffect((()=>{u.current=Hi({getStoreItems:()=>l.getState(),onNodeMouseDown:t=>{Wa({id:t,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})}),[]),n.useEffect((()=>{var n,l;if(t)null==(n=u.current)||n.destroy();else if(e.current)return null==(l=u.current)||l.update({noDragClassName:o,handleSelector:i,domNode:e.current,isSelectable:a,nodeId:r,nodeClickDistance:s}),()=>{var e;null==(e=u.current)||e.destroy()}}),[o,i,t,a,e,r]),c}function Ka(){const e=Yr();return n.useCallback((t=>{const{nodeExtent:n,snapToGrid:o,snapGrid:i,nodesDraggable:r,onError:a,updateNodePositions:s,nodeLookup:l,nodeOrigin:c}=e.getState(),d=new Map,u=(e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable))(r),p=o?i[0]:5,h=o?i[1]:5,f=t.direction.x*p*t.factor,g=t.direction.y*h*t.factor;for(const[,e]of l){if(!u(e))continue;let t={x:e.internals.positionAbsolute.x+f,y:e.internals.positionAbsolute.y+g};o&&(t=Fo(t,i));const{position:r,positionAbsolute:s}=jo({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:a});e.position=r,e.internals.positionAbsolute=s,d.set(e.id,e)}s(d)}),[])}const Ga=n.createContext(null),qa=Ga.Provider;Ga.Consumer;const Ua=()=>n.useContext(Ga),Qa=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const Ja=n.memo(_a((function({type:e="source",position:t=bo.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:s,onConnect:l,children:c,className:u,onMouseDown:p,onTouchStart:h,...f},g){var m,x;const y=s||null,v="target"===e,b=Yr(),w=Ua(),{connectOnClick:S,noPanClassName:N,rfId:C}=Xr(Qa,Br),{connectingFrom:E,connectingTo:k,clickConnecting:M,isPossibleEndHandle:_,connectionInProcess:P,clickConnectionInProcess:j,valid:A}=Xr(((e,t,n)=>o=>{const{connectionClickStartHandle:i,connectionMode:r,connection:a}=o,{fromHandle:s,toHandle:l,isValid:c}=a,d=(null==l?void 0:l.nodeId)===e&&(null==l?void 0:l.id)===t&&(null==l?void 0:l.type)===n;return{connectingFrom:(null==s?void 0:s.nodeId)===e&&(null==s?void 0:s.id)===t&&(null==s?void 0:s.type)===n,connectingTo:d,clickConnecting:(null==i?void 0:i.nodeId)===e&&(null==i?void 0:i.id)===t&&(null==i?void 0:i.type)===n,isPossibleEndHandle:r===lo.Strict?(null==s?void 0:s.type)!==n:e!==(null==s?void 0:s.nodeId)||t!==(null==s?void 0:s.id),connectionInProcess:!!s,clickConnectionInProcess:!!i,valid:d&&c}})(w,y,e),Br);w||null==(x=(m=b.getState()).onError)||x.call(m,"010",no());const I=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=b.getState(),i={...t,...e};if(o){const{edges:e,setEdges:t}=b.getState();t(vi(i,e))}null==n||n(i),null==l||l(i)},D=e=>{if(!w)return;const t=ci(e.nativeEvent);if(i&&(t&&0===e.button||!t)){const t=b.getState();Ki.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:v,handleId:y,nodeId:w,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:I,isValidConnection:n||t.isValidConnection,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?null==p||p(e):null==h||h(e)};return r.jsx("div",{"data-handleid":y,"data-nodeid":w,"data-handlepos":t,"data-id":`${C}-${w}-${y}-${e}`,className:d(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,u,{source:!v,target:v,connectable:o,connectablestart:i,connectableend:a,clickconnecting:M,connectingfrom:E,connectingto:k,valid:A,connectionindicator:o&&(!P||_)&&(P||j?a:i)}]),onMouseDown:D,onTouchStart:D,onClick:S?t=>{const{onClickConnectStart:o,onClickConnectEnd:r,connectionClickStartHandle:a,connectionMode:s,isValidConnection:l,lib:c,rfId:d,nodeLookup:u,connection:p}=b.getState();if(!w||!a&&!i)return;if(!a)return null==o||o(t.nativeEvent,{nodeId:w,handleId:y,handleType:e}),void b.setState({connectionClickStartHandle:{nodeId:w,type:e,id:y}});const h=ai(t.target),f=n||l,{connection:g,isValid:m}=Ki.isValid(t.nativeEvent,{handle:{nodeId:w,id:y,type:e},connectionMode:s,fromNodeId:a.nodeId,fromHandleId:a.id||null,fromType:a.type,isValidConnection:f,flowId:d,doc:h,lib:c,nodeLookup:u});m&&g&&I(g);const x=structuredClone(p);delete x.inProgress,x.toPosition=x.toHandle?x.toHandle.position:null,null==r||r(t,x),b.setState({connectionClickStartHandle:null})}:void 0,ref:g,...f,children:c})})));const es={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ts={input:function({data:e,isConnectable:t,sourcePosition:n=bo.Bottom}){return r.jsxs(r.Fragment,{children:[null==e?void 0:e.label,r.jsx(Ja,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=bo.Top,sourcePosition:o=bo.Bottom}){return r.jsxs(r.Fragment,{children:[r.jsx(Ja,{type:"target",position:n,isConnectable:t}),null==e?void 0:e.label,r.jsx(Ja,{type:"source",position:o,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=bo.Top}){return r.jsxs(r.Fragment,{children:[r.jsx(Ja,{type:"target",position:n,isConnectable:t}),null==e?void 0:e.label]})},group:function(){return null}};const ns=e=>{const{width:t,height:n,x:o,y:i}=Mo(e.nodeLookup,{filter:e=>!!e.selected});return{width:Yo(t)?t:null,height:Yo(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${i}px)`}};function os({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:o}){const i=Yr(),{width:a,height:s,transformString:l,userSelectionActive:c}=Xr(ns,Br),u=Ka(),p=n.useRef(null);if(n.useEffect((()=>{var e;o||null==(e=p.current)||e.focus({preventScroll:!0})}),[o]),Fa({nodeRef:p}),c||!a||!s)return null;const h=e?t=>{const n=i.getState().nodes.filter((e=>e.selected));e(t,n)}:void 0;return r.jsx("div",{className:d(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:r.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:o?void 0:-1,onKeyDown:o?void 0:e=>{Object.prototype.hasOwnProperty.call(es,e.key)&&(e.preventDefault(),u({direction:es[e.key],factor:e.shiftKey?4:1}))},style:{width:a,height:s}})})}const is="undefined"!=typeof window?window:void 0,rs=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function as({children:e,onPaneClick:t,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:l,paneClickDistance:c,deleteKeyCode:d,selectionKeyCode:u,selectionOnDrag:p,selectionMode:h,onSelectionStart:f,onSelectionEnd:g,multiSelectionKeyCode:m,panActivationKeyCode:x,zoomActivationKeyCode:y,elementsSelectable:v,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:S,panOnScrollSpeed:N,panOnScrollMode:C,zoomOnDoubleClick:E,panOnDrag:k,defaultViewport:M,translateExtent:_,minZoom:P,maxZoom:j,preventScrolling:A,onSelectionContextMenu:I,noWheelClassName:D,noPanClassName:O,disableKeyboardA11y:z,onViewportChange:$,isControlledViewport:R}){const{nodesSelectionActive:V,userSelectionActive:T}=Xr(rs),B=ma(u,{target:is}),L=ma(x,{target:is}),H=L||k,Z=L||S,X=p&&!0!==H,Y=B||T||X;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){const o=Yr(),{deleteElements:i}=Oa(),r=ma(e,$a),a=ma(t,{target:Ra});n.useEffect((()=>{if(r){const{edges:e,nodes:t}=o.getState();i({nodes:t.filter(za),edges:e.filter(za)}),o.setState({nodesSelectionActive:!1})}}),[r]),n.useEffect((()=>{o.setState({multiSelectionActive:a})}),[a])}({deleteKeyCode:d,multiSelectionKeyCode:m}),r.jsx(Ba,{onPaneContextMenu:s,elementsSelectable:v,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:Z,panOnScrollSpeed:N,panOnScrollMode:C,zoomOnDoubleClick:E,panOnDrag:!B&&H,defaultViewport:M,translateExtent:_,minZoom:P,maxZoom:j,zoomActivationKeyCode:y,preventScrolling:A,noWheelClassName:D,noPanClassName:O,onViewportChange:$,isControlledViewport:R,paneClickDistance:c,children:r.jsxs(Ya,{onSelectionStart:f,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:l,panOnDrag:H,isSelecting:!!Y,selectionMode:h,selectionKeyPressed:B,selectionOnDrag:X,children:[e,V&&r.jsx(os,{onSelectionContextMenu:I,noPanClassName:O,disableKeyboardA11y:z})]})})}as.displayName="FlowRenderer";const ss=n.memo(as);function ls(e){return Xr(n.useCallback((e=>t=>e?_o(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map((e=>e.id)):Array.from(t.nodeLookup.keys()))(e),[e]),Br)}const cs=e=>e.updateNodeInternals;function ds({id:e,onClick:t,onMouseEnter:o,onMouseMove:i,onMouseLeave:a,onContextMenu:s,onDoubleClick:l,nodesDraggable:c,elementsSelectable:u,nodesConnectable:p,nodesFocusable:h,resizeObserver:f,noDragClassName:g,noPanClassName:m,disableKeyboardA11y:x,rfId:y,nodeTypes:v,nodeClickDistance:b,onError:w}){const{node:S,internals:N,isParent:C}=Xr((t=>{const n=t.nodeLookup.get(e),o=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:o}}),Br);let E=S.type||"default",k=(null==v?void 0:v[E])||ts[E];void 0===k&&(null==w||w("003",Un(E)),E="default",k=ts.default);const M=!!(S.draggable||c&&void 0===S.draggable),_=!!(S.selectable||u&&void 0===S.selectable),P=!!(S.connectable||p&&void 0===S.connectable),j=!!(S.focusable||h&&void 0===S.focusable),A=Yr(),I=ti(S),D=function({node:e,nodeType:t,hasDimensions:o,resizeObserver:i}){const r=Yr(),a=n.useRef(null),s=n.useRef(null),l=n.useRef(e.sourcePosition),c=n.useRef(e.targetPosition),d=n.useRef(t),u=o&&!!e.internals.handleBounds;return n.useEffect((()=>{!a.current||e.hidden||u&&s.current===a.current||(s.current&&(null==i||i.unobserve(s.current)),null==i||i.observe(a.current),s.current=a.current)}),[u,e.hidden]),n.useEffect((()=>()=>{s.current&&(null==i||i.unobserve(s.current),s.current=null)}),[]),n.useEffect((()=>{if(a.current){const n=d.current!==t,o=l.current!==e.sourcePosition,i=c.current!==e.targetPosition;(n||o||i)&&(d.current=t,l.current=e.sourcePosition,c.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}}),[e.id,t,e.sourcePosition,e.targetPosition]),a}({node:S,nodeType:E,hasDimensions:I,resizeObserver:f}),O=Fa({nodeRef:D,disabled:S.hidden||!M,noDragClassName:g,handleSelector:S.dragHandle,nodeId:e,isSelectable:_,nodeClickDistance:b}),z=Ka();if(S.hidden)return null;const $=ei(S),R=function(e){var t,n,o,i;return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??(null==(t=e.style)?void 0:t.width),height:e.height??e.initialHeight??(null==(n=e.style)?void 0:n.height)}:{width:e.width??(null==(o=e.style)?void 0:o.width),height:e.height??(null==(i=e.style)?void 0:i.height)}}(S),V=_||M||t||o||i||a,T=o?e=>o(e,{...N.userNode}):void 0,B=i?e=>i(e,{...N.userNode}):void 0,L=a?e=>a(e,{...N.userNode}):void 0,H=s?e=>s(e,{...N.userNode}):void 0,Z=l?e=>l(e,{...N.userNode}):void 0;return r.jsx("div",{className:d(["react-flow__node",`react-flow__node-${E}`,{[m]:M},S.className,{selected:S.selected,selectable:_,parent:C,draggable:M,dragging:O}]),ref:D,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:V?"all":"none",visibility:I?"visible":"hidden",...S.style,...R},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:T,onMouseMove:B,onMouseLeave:L,onContextMenu:H,onClick:n=>{const{selectNodesOnDrag:o,nodeDragThreshold:i}=A.getState();_&&(!o||!M||i>0)&&Wa({id:e,store:A,nodeRef:D}),t&&t(n,{...N.userNode})},onDoubleClick:Z,onKeyDown:j?t=>{if(!li(t.nativeEvent)&&!x)if(so.includes(t.key)&&_){const n="Escape"===t.key;Wa({id:e,store:A,unselect:n,nodeRef:D})}else M&&S.selected&&Object.prototype.hasOwnProperty.call(es,t.key)&&(t.preventDefault(),A.setState({ariaLiveMessage:`Moved selected node ${t.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~N.positionAbsolute.x}, y: ${~~N.positionAbsolute.y}`}),z({direction:es[t.key],factor:t.shiftKey?4:1}))}:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":x?void 0:`${Kr}-${y}`,"aria-label":S.ariaLabel,children:r.jsx(qa,{value:e,children:r.jsx(k,{id:e,data:S.data,type:E,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:S.selected??!1,selectable:_,draggable:M,deletable:S.deletable??!0,isConnectable:P,sourcePosition:S.sourcePosition,targetPosition:S.targetPosition,dragging:O,dragHandle:S.dragHandle,zIndex:N.z,parentId:S.parentId,...$})})})}const us=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function ps(e){const{nodesDraggable:t,nodesConnectable:o,nodesFocusable:i,elementsSelectable:a,onError:s}=Xr(us,Br),l=ls(e.onlyRenderVisibleElements),c=function(){const e=Xr(cs),[t]=n.useState((()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver((t=>{const n=new Map;t.forEach((e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})})),e(n)}))));return n.useEffect((()=>()=>{null==t||t.disconnect()}),[t]),t}();return r.jsx("div",{className:"react-flow__nodes",style:Va,children:l.map((n=>r.jsx(ds,{id:n,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:o,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:s},n)))})}ps.displayName="NodeRenderer";const hs=n.memo(ps);const fs={[yo.Arrow]:({color:e="none",strokeWidth:t=1})=>r.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[yo.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>r.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};const gs=({id:e,type:t,color:o,width:i=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const d=function(e){const t=Yr();return n.useMemo((()=>{var n,o;return Object.prototype.hasOwnProperty.call(fs,e)?fs[e]:(null==(o=(n=t.getState()).onError)||o.call(n,"009",eo(e)),null)}),[e])}(t);return d?r.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:c,refX:"0",refY:"0",children:r.jsx(d,{color:o,strokeWidth:l})}):null},ms=({defaultColor:e,rfId:t})=>{const o=Xr((e=>e.edges)),i=Xr((e=>e.defaultEdgeOptions)),a=n.useMemo((()=>{const n=function(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:i}){const r=new Set;return e.reduce(((e,a)=>([a.markerStart||o,a.markerEnd||i].forEach((o=>{if(o&&"object"==typeof o){const i=Pi(o,t);r.has(i)||(e.push({id:i,color:o.color||n,...o}),r.add(i))}})),e)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))}(o,{id:t,defaultColor:e,defaultMarkerStart:null==i?void 0:i.markerStart,defaultMarkerEnd:null==i?void 0:i.markerEnd});return n}),[o,i,t,e]);return a.length?r.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:r.jsx("defs",{children:a.map((e=>r.jsx(gs,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)))})}):null};ms.displayName="MarkerDefinitions";var xs=n.memo(ms);function ys({x:e,y:t,label:o,labelStyle:i,labelShowBg:a=!0,labelBgStyle:s,labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:u,className:p,...h}){const[f,g]=n.useState({x:1,y:0,width:0,height:0}),m=d(["react-flow__edge-textwrapper",p]),x=n.useRef(null);return n.useEffect((()=>{if(x.current){const e=x.current.getBBox();g({x:e.x,y:e.y,width:e.width,height:e.height})}}),[o]),o?r.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:m,visibility:f.width?"visible":"hidden",...h,children:[a&&r.jsx("rect",{width:f.width+2*l[0],x:-l[0],y:-l[1],height:f.height+2*l[1],className:"react-flow__edge-textbg",style:s,rx:c,ry:c}),r.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:x,style:i,children:o}),u]}):null}ys.displayName="EdgeText";const vs=n.memo(ys);function bs({path:e,labelX:t,labelY:n,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,interactionWidth:u=20,...p}){return r.jsxs(r.Fragment,{children:[r.jsx("path",{...p,d:e,fill:"none",className:d(["react-flow__edge-path",p.className])}),u&&r.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),o&&Yo(t)&&Yo(n)?r.jsx(vs,{x:t,y:n,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c}):null]})}function ws({pos:e,x1:t,y1:n,x2:o,y2:i}){return e===bo.Left||e===bo.Right?[.5*(t+o),n]:[t,.5*(n+i)]}function Ss({sourceX:e,sourceY:t,sourcePosition:n=bo.Bottom,targetX:o,targetY:i,targetPosition:r=bo.Top}){const[a,s]=ws({pos:n,x1:e,y1:t,x2:o,y2:i}),[l,c]=ws({pos:r,x1:o,y1:i,x2:e,y2:t}),[d,u,p,h]=pi({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:l,targetControlY:c});return[`M${e},${t} C${a},${s} ${l},${c} ${o},${i}`,d,u,p,h]}function Ns(e){return n.memo((({id:t,sourceX:n,sourceY:o,targetX:i,targetY:a,sourcePosition:s,targetPosition:l,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:f,style:g,markerEnd:m,markerStart:x,interactionWidth:y})=>{const[v,b,w]=Ss({sourceX:n,sourceY:o,sourcePosition:s,targetX:i,targetY:a,targetPosition:l}),S=e.isInternal?void 0:t;return r.jsx(bs,{id:S,path:v,labelX:b,labelY:w,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:f,style:g,markerEnd:m,markerStart:x,interactionWidth:y})}))}const Cs=Ns({isInternal:!1}),Es=Ns({isInternal:!0});function ks(e){return n.memo((({id:t,sourceX:n,sourceY:o,targetX:i,targetY:a,label:s,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:p,style:h,sourcePosition:f=bo.Bottom,targetPosition:g=bo.Top,markerEnd:m,markerStart:x,pathOptions:y,interactionWidth:v})=>{const[b,w,S]=Ci({sourceX:n,sourceY:o,sourcePosition:f,targetX:i,targetY:a,targetPosition:g,borderRadius:null==y?void 0:y.borderRadius,offset:null==y?void 0:y.offset}),N=e.isInternal?void 0:t;return r.jsx(bs,{id:N,path:b,labelX:w,labelY:S,label:s,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:x,interactionWidth:v})}))}Cs.displayName="SimpleBezierEdge",Es.displayName="SimpleBezierEdgeInternal";const Ms=ks({isInternal:!1}),_s=ks({isInternal:!0});function Ps(e){return n.memo((({id:t,...o})=>{var i;const a=e.isInternal?void 0:t;return r.jsx(Ms,{...o,id:a,pathOptions:n.useMemo((()=>{var e;return{borderRadius:0,offset:null==(e=o.pathOptions)?void 0:e.offset}}),[null==(i=o.pathOptions)?void 0:i.offset])})}))}Ms.displayName="SmoothStepEdge",_s.displayName="SmoothStepEdgeInternal";const js=Ps({isInternal:!1}),As=Ps({isInternal:!0});function Is(e){return n.memo((({id:t,sourceX:n,sourceY:o,targetX:i,targetY:a,label:s,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:p,style:h,markerEnd:f,markerStart:g,interactionWidth:m})=>{const[x,y,v]=bi({sourceX:n,sourceY:o,targetX:i,targetY:a}),b=e.isInternal?void 0:t;return r.jsx(bs,{id:b,path:x,labelX:y,labelY:v,label:s,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:p,style:h,markerEnd:f,markerStart:g,interactionWidth:m})}))}js.displayName="StepEdge",As.displayName="StepEdgeInternal";const Ds=Is({isInternal:!1}),Os=Is({isInternal:!0});function zs(e){return n.memo((({id:t,sourceX:n,sourceY:o,targetX:i,targetY:a,sourcePosition:s=bo.Bottom,targetPosition:l=bo.Top,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:f,style:g,markerEnd:m,markerStart:x,pathOptions:y,interactionWidth:v})=>{const[b,w,S]=gi({sourceX:n,sourceY:o,sourcePosition:s,targetX:i,targetY:a,targetPosition:l,curvature:null==y?void 0:y.curvature}),N=e.isInternal?void 0:t;return r.jsx(bs,{id:N,path:b,labelX:w,labelY:S,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:f,style:g,markerEnd:m,markerStart:x,interactionWidth:v})}))}Ds.displayName="StraightEdge",Os.displayName="StraightEdgeInternal";const $s=zs({isInternal:!1}),Rs=zs({isInternal:!0});$s.displayName="BezierEdge",Rs.displayName="BezierEdgeInternal";const Vs={default:Rs,straight:Os,step:As,smoothstep:_s,simplebezier:Es},Ts={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Bs=(e,t,n)=>n===bo.Left?e-t:n===bo.Right?e+t:e,Ls=(e,t,n)=>n===bo.Top?e-t:n===bo.Bottom?e+t:e,Hs="react-flow__edgeupdater";function Zs({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:i,onMouseEnter:a,onMouseOut:s,type:l}){return r.jsx("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:s,className:d([Hs,`${Hs}-${l}`]),cx:Bs(t,o,e),cy:Ls(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function Xs({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:i,targetX:a,targetY:s,sourcePosition:l,targetPosition:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:p,setReconnecting:h,setUpdateHover:f}){const g=Yr(),m=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:o,domNode:i,isValidConnection:r,connectionMode:a,connectionRadius:s,lib:l,onConnectStart:c,onConnectEnd:f,cancelConnection:m,nodeLookup:x,rfId:y,panBy:v,updateConnection:b}=g.getState(),w="target"===t.type;h(!0),null==u||u(e,n,t.type);Ki.onPointerDown(e.nativeEvent,{autoPanOnConnect:o,connectionMode:a,connectionRadius:s,domNode:i,handleId:t.id,nodeId:t.nodeId,nodeLookup:x,isTarget:w,edgeUpdaterType:t.type,lib:l,flowId:y,cancelConnection:m,panBy:v,isValidConnection:r,onConnect:e=>null==d?void 0:d(n,e),onConnectStart:c,onConnectEnd:f,onReconnectEnd:(e,o)=>{h(!1),null==p||p(e,n,t.type,o)},updateConnection:b,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle})},x=()=>f(!0),y=()=>f(!1);return r.jsxs(r.Fragment,{children:[(!0===e||"source"===e)&&r.jsx(Zs,{position:l,centerX:o,centerY:i,radius:t,onMouseDown:e=>m(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:x,onMouseOut:y,type:"source"}),(!0===e||"target"===e)&&r.jsx(Zs,{position:c,centerX:a,centerY:s,radius:t,onMouseDown:e=>m(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:x,onMouseOut:y,type:"target"})]})}function Ys({id:e,edgesFocusable:t,edgesReconnectable:o,elementsSelectable:i,onClick:a,onDoubleClick:s,onContextMenu:l,onMouseEnter:c,onMouseMove:u,onMouseLeave:p,reconnectRadius:h,onReconnect:f,onReconnectStart:g,onReconnectEnd:m,rfId:x,edgeTypes:y,noPanClassName:v,onError:b,disableKeyboardA11y:w}){let S=Xr((t=>t.edgeLookup.get(e)));const N=Xr((e=>e.defaultEdgeOptions));S=N?{...N,...S}:S;let C=S.type||"default",E=(null==y?void 0:y[C])||Vs[C];void 0===E&&(null==b||b("011",oo(C)),C="default",E=Vs.default);const k=!!(S.focusable||t&&void 0===S.focusable),M=void 0!==f&&(S.reconnectable||o&&void 0===S.reconnectable),_=!!(S.selectable||i&&void 0===S.selectable),P=n.useRef(null),[j,A]=n.useState(!1),[I,D]=n.useState(!1),O=Yr(),{zIndex:z,sourceX:$,sourceY:R,targetX:V,targetY:T,sourcePosition:B,targetPosition:L}=Xr(n.useCallback((t=>{const n=t.nodeLookup.get(S.source),o=t.nodeLookup.get(S.target);if(!n||!o)return{zIndex:S.zIndex,...Ts};const i=function(e){var t;const{sourceNode:n,targetNode:o}=e;if(!Ei(n)||!Ei(o))return null;const i=n.internals.handleBounds||ki(n.handles),r=o.internals.handleBounds||ki(o.handles),a=_i((null==i?void 0:i.source)??[],e.sourceHandle),s=_i(e.connectionMode===lo.Strict?(null==r?void 0:r.target)??[]:((null==r?void 0:r.target)??[]).concat((null==r?void 0:r.source)??[]),e.targetHandle);if(!a||!s)return null==(t=e.onError)||t.call(e,"008",to(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(null==a?void 0:a.position)||bo.Bottom,c=(null==s?void 0:s.position)||bo.Top,d=Mi(n,a,l),u=Mi(o,s,c);return{sourceX:d.x,sourceY:d.y,targetX:u.x,targetY:u.y,sourcePosition:l,targetPosition:c}}({id:e,sourceNode:n,targetNode:o,sourceHandle:S.sourceHandle||null,targetHandle:S.targetHandle||null,connectionMode:t.connectionMode,onError:b}),r=function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:i=!1}){if(!i)return o;const r=n||t.selected||e.selected,a=Math.max(e.internals.z||0,t.internals.z||0,1e3);return o+(r?a:0)}({selected:S.selected,zIndex:S.zIndex,sourceNode:n,targetNode:o,elevateOnSelect:t.elevateEdgesOnSelect});return{zIndex:r,...i||Ts}}),[S.source,S.target,S.sourceHandle,S.targetHandle,S.selected,S.zIndex]),Br),H=n.useMemo((()=>S.markerStart?`url('#${Pi(S.markerStart,x)}')`:void 0),[S.markerStart,x]),Z=n.useMemo((()=>S.markerEnd?`url('#${Pi(S.markerEnd,x)}')`:void 0),[S.markerEnd,x]);if(S.hidden||null===$||null===R||null===V||null===T)return null;const X=s?e=>{s(e,{...S})}:void 0,Y=l?e=>{l(e,{...S})}:void 0,W=c?e=>{c(e,{...S})}:void 0,F=u?e=>{u(e,{...S})}:void 0,K=p?e=>{p(e,{...S})}:void 0;return r.jsx("svg",{style:{zIndex:z},children:r.jsxs("g",{className:d(["react-flow__edge",`react-flow__edge-${C}`,S.className,v,{selected:S.selected,animated:S.animated,inactive:!_&&!a,updating:j,selectable:_}]),onClick:t=>{var n;const{addSelectedEdges:o,unselectNodesAndEdges:i,multiSelectionActive:r}=O.getState();_&&(O.setState({nodesSelectionActive:!1}),S.selected&&r?(i({nodes:[],edges:[S]}),null==(n=P.current)||n.blur()):o([e])),a&&a(t,S)},onDoubleClick:X,onContextMenu:Y,onMouseEnter:W,onMouseMove:F,onMouseLeave:K,onKeyDown:k?t=>{var n;if(!w&&so.includes(t.key)&&_){const{unselectNodesAndEdges:o,addSelectedEdges:i}=O.getState();"Escape"===t.key?(null==(n=P.current)||n.blur(),o({edges:[S]})):i([e])}}:void 0,tabIndex:k?0:void 0,role:k?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===S.ariaLabel?void 0:S.ariaLabel||`Edge from ${S.source} to ${S.target}`,"aria-describedby":k?`${Gr}-${x}`:void 0,ref:P,children:[!I&&r.jsx(E,{id:e,source:S.source,target:S.target,type:S.type,selected:S.selected,animated:S.animated,selectable:_,deletable:S.deletable??!0,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,sourceX:$,sourceY:R,targetX:V,targetY:T,sourcePosition:B,targetPosition:L,data:S.data,style:S.style,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerStart:H,markerEnd:Z,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth}),M&&r.jsx(Xs,{edge:S,isReconnectable:M,reconnectRadius:h,onReconnect:f,onReconnectStart:g,onReconnectEnd:m,sourceX:$,sourceY:R,targetX:V,targetY:T,sourcePosition:B,targetPosition:L,setUpdateHover:A,setReconnecting:D})]})})}const Ws=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Fs({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:o,edgeTypes:i,noPanClassName:a,onReconnect:s,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:d,onEdgeMouseLeave:u,onEdgeClick:p,reconnectRadius:h,onEdgeDoubleClick:f,onReconnectStart:g,onReconnectEnd:m,disableKeyboardA11y:x}){const{edgesFocusable:y,edgesReconnectable:v,elementsSelectable:b,onError:w}=Xr(Ws,Br),S=(N=t,Xr(n.useCallback((e=>{if(!N)return e.edges.map((e=>e.id));const t=[];if(e.width&&e.height)for(const n of e.edges){const o=e.nodeLookup.get(n.source),i=e.nodeLookup.get(n.target);o&&i&&xi({sourceNode:o,targetNode:i,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t}),[N]),Br));var N;return r.jsxs("div",{className:"react-flow__edges",children:[r.jsx(xs,{defaultColor:e,rfId:o}),S.map((e=>r.jsx(Ys,{id:e,edgesFocusable:y,edgesReconnectable:v,elementsSelectable:b,noPanClassName:a,onReconnect:s,onContextMenu:l,onMouseEnter:c,onMouseMove:d,onMouseLeave:u,onClick:p,reconnectRadius:h,onDoubleClick:f,onReconnectStart:g,onReconnectEnd:m,rfId:o,onError:w,edgeTypes:i,disableKeyboardA11y:x},e)))]})}Fs.displayName="EdgeRenderer";const Ks=n.memo(Fs),Gs=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function qs({children:e}){const t=Xr(Gs);return r.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}const Us=e=>{var t;return null==(t=e.panZoom)?void 0:t.syncViewport};function Qs(e){return e.connection.inProgress?{...e.connection,to:Ko(e.connection.to,e.transform)}:{...e.connection}}function Js(e){return Xr(Qs,Br)}const el=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function tl({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:i,width:a,height:s,isValid:l,inProgress:c}=Xr(el,Br);return!!(a&&i&&c)?r.jsx("svg",{style:e,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:r.jsx("g",{className:d(["react-flow__connection",No(l)]),children:r.jsx(nl,{style:t,type:n,CustomComponent:o,isValid:l})})}):null}const nl=({style:e,type:t=mo.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:i,from:a,fromNode:s,fromHandle:l,fromPosition:c,to:d,toNode:u,toHandle:p,toPosition:h}=Js();if(!i)return;if(n)return r.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:l,fromX:a.x,fromY:a.y,toX:d.x,toY:d.y,fromPosition:c,toPosition:h,connectionStatus:No(o),toNode:u,toHandle:p});let f="";const g={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:d.x,targetY:d.y,targetPosition:h};switch(t){case mo.Bezier:[f]=gi(g);break;case mo.SimpleBezier:[f]=Ss(g);break;case mo.Step:[f]=Ci({...g,borderRadius:0});break;case mo.SmoothStep:[f]=Ci(g);break;default:[f]=bi(g)}return r.jsx("path",{d:f,fill:"none",className:"react-flow__connection-path",style:e})};nl.displayName="ConnectionLine";const ol={};function il(e=ol){n.useRef(e),Yr(),n.useEffect((()=>{}),[e])}function rl({nodeTypes:e,edgeTypes:t,onInit:o,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:u,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:f,onSelectionEnd:g,connectionLineType:m,connectionLineStyle:x,connectionLineComponent:y,connectionLineContainerStyle:v,selectionKeyCode:b,selectionOnDrag:w,selectionMode:S,multiSelectionKeyCode:N,panActivationKeyCode:C,zoomActivationKeyCode:E,deleteKeyCode:k,onlyRenderVisibleElements:M,elementsSelectable:_,defaultViewport:P,translateExtent:j,minZoom:A,maxZoom:I,preventScrolling:D,defaultMarkerColor:O,zoomOnScroll:z,zoomOnPinch:$,panOnScroll:R,panOnScrollSpeed:V,panOnScrollMode:T,zoomOnDoubleClick:B,panOnDrag:L,onPaneClick:H,onPaneMouseEnter:Z,onPaneMouseMove:X,onPaneMouseLeave:Y,onPaneScroll:W,onPaneContextMenu:F,paneClickDistance:K,nodeClickDistance:G,onEdgeContextMenu:q,onEdgeMouseEnter:U,onEdgeMouseMove:Q,onEdgeMouseLeave:J,reconnectRadius:ee,onReconnect:te,onReconnectStart:ne,onReconnectEnd:oe,noDragClassName:ie,noWheelClassName:re,noPanClassName:ae,disableKeyboardA11y:se,nodeExtent:le,rfId:ce,viewport:de,onViewportChange:ue}){return il(e),il(t),Yr(),n.useRef(!1),n.useEffect((()=>{}),[]),function(e){const t=Oa(),o=n.useRef(!1);n.useEffect((()=>{!o.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),o.current=!0)}),[e,t.viewportInitialized])}(o),function(e){const t=Xr(Us),o=Yr();n.useEffect((()=>{e&&(null==t||t(e),o.setState({transform:[e.x,e.y,e.zoom]}))}),[e,t])}(de),r.jsx(ss,{onPaneClick:H,onPaneMouseEnter:Z,onPaneMouseMove:X,onPaneMouseLeave:Y,onPaneContextMenu:F,onPaneScroll:W,paneClickDistance:K,deleteKeyCode:k,selectionKeyCode:b,selectionOnDrag:w,selectionMode:S,onSelectionStart:f,onSelectionEnd:g,multiSelectionKeyCode:N,panActivationKeyCode:C,zoomActivationKeyCode:E,elementsSelectable:_,zoomOnScroll:z,zoomOnPinch:$,zoomOnDoubleClick:B,panOnScroll:R,panOnScrollSpeed:V,panOnScrollMode:T,panOnDrag:L,defaultViewport:P,translateExtent:j,minZoom:A,maxZoom:I,onSelectionContextMenu:h,preventScrolling:D,noDragClassName:ie,noWheelClassName:re,noPanClassName:ae,disableKeyboardA11y:se,onViewportChange:ue,isControlledViewport:!!de,children:r.jsxs(qs,{children:[r.jsx(Ks,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:l,onReconnect:te,onReconnectStart:ne,onReconnectEnd:oe,onlyRenderVisibleElements:M,onEdgeContextMenu:q,onEdgeMouseEnter:U,onEdgeMouseMove:Q,onEdgeMouseLeave:J,reconnectRadius:ee,defaultMarkerColor:O,noPanClassName:ae,disableKeyboardA11y:se,rfId:ce}),r.jsx(tl,{style:x,type:m,component:y,containerStyle:v}),r.jsx("div",{className:"react-flow__edgelabel-renderer"}),r.jsx(hs,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:u,onNodeContextMenu:p,nodeClickDistance:G,onlyRenderVisibleElements:M,noPanClassName:ae,noDragClassName:ie,disableKeyboardA11y:se,nodeExtent:le,rfId:ce}),r.jsx("div",{className:"react-flow__viewport-portal"})]})})}rl.displayName="GraphView";const al=n.memo(rl),sl=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:i,height:r,fitView:a,fitViewOptions:s,minZoom:l=.5,maxZoom:c=2,nodeOrigin:d,nodeExtent:u}={})=>{const p=new Map,h=new Map,f=new Map,g=new Map,m=o??t??[],x=n??e??[],y=d??[0,0],v=u??ao;Vi(f,g,m);const b=Di(x,p,h,{nodeOrigin:y,nodeExtent:v,elevateNodesOnSelect:!1});let w=[0,0,1];if(a&&i&&r){const e=Mo(p,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:o}=Uo(e,i,r,l,c,(null==s?void 0:s.padding)??.1);w=[t,n,o]}return{rfId:"1",width:0,height:0,transform:w,nodes:x,nodesInitialized:b,nodeLookup:p,parentLookup:h,edges:m,edgeLookup:g,connectionLookup:f,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==o,panZoom:null,minZoom:l,maxZoom:c,translateExtent:ao,nodeExtent:v,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:lo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:y,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:s,fitViewResolver:null,connection:{...go},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Wo,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},ll=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:i,height:r,fitView:a,fitViewOptions:s,minZoom:l,maxZoom:c,nodeOrigin:d,nodeExtent:u})=>{return p=(p,h)=>{async function f(){const{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:o,width:i,height:r,minZoom:a,maxZoom:s}=h();t&&(await Po({nodes:e,width:i,height:r,panZoom:t,minZoom:a,maxZoom:s},n),null==o||o.resolve(!0),p({fitViewResolver:null}))}return{...sl({nodes:e,edges:t,width:i,height:r,fitView:a,fitViewOptions:s,minZoom:l,maxZoom:c,nodeOrigin:d,nodeExtent:u,defaultNodes:n,defaultEdges:o}),setNodes:e=>{const{nodeLookup:t,parentLookup:n,nodeOrigin:o,elevateNodesOnSelect:i,fitViewQueued:r}=h(),a=Di(e,t,n,{nodeOrigin:o,nodeExtent:u,elevateNodesOnSelect:i,checkEquality:!0});r&&a?(f(),p({nodes:e,nodesInitialized:a,fitViewQueued:!1,fitViewOptions:void 0})):p({nodes:e,nodesInitialized:a})},setEdges:e=>{const{connectionLookup:t,edgeLookup:n}=h();Vi(t,n,e),p({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){const{setNodes:t}=h();t(e),p({hasDefaultNodes:!0})}if(t){const{setEdges:e}=h();e(t),p({hasDefaultEdges:!0})}},updateNodeInternals:e=>{const{triggerNodeChanges:t,nodeLookup:n,parentLookup:o,domNode:i,nodeOrigin:r,nodeExtent:a,debug:s,fitViewQueued:l}=h(),{changes:c,updatedInternals:d}=function(e,t,n,o,i,r){const a=null==o?void 0:o.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const l=[],c=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(c.transform),u=[];for(const p of e.values()){const e=t.get(p.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),s=!0;continue}const o=ri(p.nodeElement),a=e.measured.width!==o.width||e.measured.height!==o.height;if(o.width&&o.height&&(a||!e.internals.handleBounds||p.force)){const c=p.nodeElement.getBoundingClientRect(),h=Jo(e.extent)?e.extent:r;let{positionAbsolute:f}=e.internals;e.parentId&&"parent"===e.extent?f=Oo(f,o,t.get(e.parentId)):h&&(f=Do(f,h,o));const g={...e,measured:o,internals:{...e.internals,positionAbsolute:f,handleBounds:{source:ui("source",p.nodeElement,c,d,e.id),target:ui("target",p.nodeElement,c,d,e.id)}}};t.set(e.id,g),e.parentId&&Oi(g,t,n,{nodeOrigin:i}),s=!0,a&&(l.push({id:e.id,type:"dimensions",dimensions:o}),e.expandParent&&e.parentId&&u.push({id:e.id,parentId:e.parentId,rect:Bo(g,i)}))}}if(u.length>0){const e=$i(u,t,n,i);l.push(...e)}return{changes:l,updatedInternals:s}}(e,n,o,i,r,a);d&&(function(e,t,n){const o=Ii(ji,n);for(const i of e.values())if(i.parentId)Oi(i,e,t,o);else{const e=ko(i,o.nodeOrigin),t=Jo(i.extent)?i.extent:o.nodeExtent,n=Do(e,t,ei(i));i.internals.positionAbsolute=n}}(n,o,{nodeOrigin:r,nodeExtent:a}),l?(f(),p({fitViewQueued:!1,fitViewOptions:void 0})):p({}),(null==c?void 0:c.length)>0&&(null==t||t(c)))},updateNodePositions:(e,t=!1)=>{const n=[],o=[],{nodeLookup:i,triggerNodeChanges:r}=h();for(const[a,s]of e){const e=i.get(a),r=!!((null==e?void 0:e.expandParent)&&(null==e?void 0:e.parentId)&&(null==s?void 0:s.position)),l={id:a,type:"position",position:r?{x:Math.max(0,s.position.x),y:Math.max(0,s.position.y)}:s.position,dragging:t};r&&e.parentId&&n.push({id:a,parentId:e.parentId,rect:{...s.internals.positionAbsolute,width:s.measured.width??0,height:s.measured.height??0}}),o.push(l)}if(n.length>0){const{parentLookup:e,nodeOrigin:t}=h(),r=$i(n,i,e,t);o.push(...r)}r(o)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:o,hasDefaultNodes:i,debug:r}=h();(null==e?void 0:e.length)&&(i&&n(wa(e,o)),null==t||t(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:o,hasDefaultEdges:i,debug:r}=h();(null==e?void 0:e.length)&&(i&&n(Sa(e,o)),null==t||t(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:i,triggerEdgeChanges:r}=h();t?i(e.map((e=>Na(e,!0)))):(i(Ca(o,new Set([...e]),!0)),r(Ca(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:i,triggerEdgeChanges:r}=h();t?r(e.map((e=>Na(e,!0)))):(r(Ca(n,new Set([...e]))),i(Ca(o,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{const{edges:n,nodes:o,nodeLookup:i,triggerNodeChanges:r,triggerEdgeChanges:a}=h(),s=t||n,l=(e||o).map((e=>{const t=i.get(e.id);return t&&(t.selected=!1),Na(e.id,!1)})),c=s.map((e=>Na(e.id,!1)));r(l),a(c)},setMinZoom:e=>{const{panZoom:t,maxZoom:n}=h();null==t||t.setScaleExtent([e,n]),p({minZoom:e})},setMaxZoom:e=>{const{panZoom:t,minZoom:n}=h();null==t||t.setScaleExtent([n,e]),p({maxZoom:e})},setTranslateExtent:e=>{var t;null==(t=h().panZoom)||t.setTranslateExtent(e),p({translateExtent:e})},setPaneClickDistance:e=>{var t;null==(t=h().panZoom)||t.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:o,elementsSelectable:i}=h();if(!i)return;const r=t.reduce(((e,t)=>t.selected?[...e,Na(t.id,!1)]:e),[]),a=e.reduce(((e,t)=>t.selected?[...e,Na(t.id,!1)]:e),[]);n(r),o(a)},setNodeExtent:e=>{const{nodes:t,nodeLookup:n,parentLookup:o,nodeOrigin:i,elevateNodesOnSelect:r,nodeExtent:a}=h();e[0][0]===a[0][0]&&e[0][1]===a[0][1]&&e[1][0]===a[1][0]&&e[1][1]===a[1][1]||(Di(t,n,o,{nodeOrigin:i,nodeExtent:e,elevateNodesOnSelect:r,checkEquality:!1}),p({nodeExtent:e}))},panBy:e=>{const{transform:t,width:n,height:o,panZoom:i,translateExtent:r}=h();return async function({delta:e,panZoom:t,transform:n,translateExtent:o,width:i,height:r}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,r]],o),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}({delta:e,panZoom:i,transform:t,translateExtent:r,width:n,height:o})},cancelConnection:()=>{p({connection:{...go}})},updateConnection:e=>{p({connection:e})},reset:()=>p({...sl()})}},h=Object.is,p?Tr(p,h):Tr;var p,h};function cl({initialNodes:e,initialEdges:t,defaultNodes:o,defaultEdges:i,initialWidth:a,initialHeight:s,initialMinZoom:l,initialMaxZoom:c,initialFitViewOptions:d,fitView:u,nodeOrigin:p,nodeExtent:h,children:f}){const[g]=n.useState((()=>ll({nodes:e,edges:t,defaultNodes:o,defaultEdges:i,width:a,height:s,fitView:u,minZoom:l,maxZoom:c,fitViewOptions:d,nodeOrigin:p,nodeExtent:h})));return r.jsx(Hr,{value:g,children:r.jsx(Ia,{children:f})})}function dl({children:e,nodes:t,edges:o,defaultNodes:i,defaultEdges:a,width:s,height:l,fitView:c,fitViewOptions:d,minZoom:u,maxZoom:p,nodeOrigin:h,nodeExtent:f}){return n.useContext(Lr)?r.jsx(r.Fragment,{children:e}):r.jsx(cl,{initialNodes:t,initialEdges:o,defaultNodes:i,defaultEdges:a,initialWidth:s,initialHeight:l,fitView:c,initialFitViewOptions:d,initialMinZoom:u,initialMaxZoom:p,nodeOrigin:h,nodeExtent:f,children:e})}const ul={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var pl,hl,fl=_a((function({nodes:e,edges:t,defaultNodes:o,defaultEdges:i,className:a,nodeTypes:s,edgeTypes:l,onNodeClick:c,onEdgeClick:u,onInit:p,onMove:h,onMoveStart:f,onMoveEnd:g,onConnect:m,onConnectStart:x,onConnectEnd:y,onClickConnectStart:v,onClickConnectEnd:b,onNodeMouseEnter:w,onNodeMouseMove:S,onNodeMouseLeave:N,onNodeContextMenu:C,onNodeDoubleClick:E,onNodeDragStart:k,onNodeDrag:M,onNodeDragStop:_,onNodesDelete:P,onEdgesDelete:j,onDelete:A,onSelectionChange:I,onSelectionDragStart:D,onSelectionDrag:O,onSelectionDragStop:z,onSelectionContextMenu:$,onSelectionStart:R,onSelectionEnd:V,onBeforeDelete:T,connectionMode:B,connectionLineType:L=mo.Bezier,connectionLineStyle:H,connectionLineComponent:Z,connectionLineContainerStyle:X,deleteKeyCode:Y="Backspace",selectionKeyCode:W="Shift",selectionOnDrag:F=!1,selectionMode:K=ho.Full,panActivationKeyCode:G="Space",multiSelectionKeyCode:q=(Qo()?"Meta":"Control"),zoomActivationKeyCode:U=(Qo()?"Meta":"Control"),snapToGrid:Q,snapGrid:J,onlyRenderVisibleElements:ee=!1,selectNodesOnDrag:te,nodesDraggable:ne,nodesConnectable:oe,nodesFocusable:ie,nodeOrigin:re=la,edgesFocusable:ae,edgesReconnectable:se,elementsSelectable:le=!0,defaultViewport:ce=ca,minZoom:de=.5,maxZoom:ue=2,translateExtent:pe=ao,preventScrolling:he=!0,nodeExtent:fe,defaultMarkerColor:ge="#b1b1b7",zoomOnScroll:me=!0,zoomOnPinch:xe=!0,panOnScroll:ye=!1,panOnScrollSpeed:ve=.5,panOnScrollMode:be=uo.Free,zoomOnDoubleClick:we=!0,panOnDrag:Se=!0,onPaneClick:Ne,onPaneMouseEnter:Ce,onPaneMouseMove:Ee,onPaneMouseLeave:ke,onPaneScroll:Me,onPaneContextMenu:_e,paneClickDistance:Pe=0,nodeClickDistance:je=0,children:Ae,onReconnect:Ie,onReconnectStart:De,onReconnectEnd:Oe,onEdgeContextMenu:ze,onEdgeDoubleClick:$e,onEdgeMouseEnter:Re,onEdgeMouseMove:Ve,onEdgeMouseLeave:Te,reconnectRadius:Be=10,onNodesChange:Le,onEdgesChange:He,noDragClassName:Ze="nodrag",noWheelClassName:Xe="nowheel",noPanClassName:Ye="nopan",fitView:We,fitViewOptions:Fe,connectOnClick:Ke,attributionPosition:Ge,proOptions:qe,defaultEdgeOptions:Ue,elevateNodesOnSelect:Qe,elevateEdgesOnSelect:Je,disableKeyboardA11y:et=!1,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,autoPanSpeed:ot,connectionRadius:it,isValidConnection:rt,onError:at,style:st,id:lt,nodeDragThreshold:ct,viewport:dt,onViewportChange:ut,width:pt,height:ht,colorMode:ft="light",debug:gt,onScroll:mt,...xt},yt){const vt=lt||"1",bt=function(e){var t;const[o,i]=n.useState("system"===e?null:e);return n.useEffect((()=>{if("system"!==e)return void i(e);const t=fa(),n=()=>i((null==t?void 0:t.matches)?"dark":"light");return n(),null==t||t.addEventListener("change",n),()=>{null==t||t.removeEventListener("change",n)}}),[e]),null!==o?o:(null==(t=fa())?void 0:t.matches)?"dark":"light"}(ft),wt=n.useCallback((e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),null==mt||mt(e)}),[mt]);return r.jsx("div",{"data-testid":"rf__wrapper",...xt,onScroll:wt,style:{...st,...ul},ref:yt,className:d(["react-flow",a,bt]),id:lt,children:r.jsxs(dl,{nodes:e,edges:t,width:pt,height:ht,fitView:We,fitViewOptions:Fe,minZoom:de,maxZoom:ue,nodeOrigin:re,nodeExtent:fe,children:[r.jsx(al,{onInit:p,onNodeClick:c,onEdgeClick:u,onNodeMouseEnter:w,onNodeMouseMove:S,onNodeMouseLeave:N,onNodeContextMenu:C,onNodeDoubleClick:E,nodeTypes:s,edgeTypes:l,connectionLineType:L,connectionLineStyle:H,connectionLineComponent:Z,connectionLineContainerStyle:X,selectionKeyCode:W,selectionOnDrag:F,selectionMode:K,deleteKeyCode:Y,multiSelectionKeyCode:q,panActivationKeyCode:G,zoomActivationKeyCode:U,onlyRenderVisibleElements:ee,defaultViewport:ce,translateExtent:pe,minZoom:de,maxZoom:ue,preventScrolling:he,zoomOnScroll:me,zoomOnPinch:xe,zoomOnDoubleClick:we,panOnScroll:ye,panOnScrollSpeed:ve,panOnScrollMode:be,panOnDrag:Se,onPaneClick:Ne,onPaneMouseEnter:Ce,onPaneMouseMove:Ee,onPaneMouseLeave:ke,onPaneScroll:Me,onPaneContextMenu:_e,paneClickDistance:Pe,nodeClickDistance:je,onSelectionContextMenu:$,onSelectionStart:R,onSelectionEnd:V,onReconnect:Ie,onReconnectStart:De,onReconnectEnd:Oe,onEdgeContextMenu:ze,onEdgeDoubleClick:$e,onEdgeMouseEnter:Re,onEdgeMouseMove:Ve,onEdgeMouseLeave:Te,reconnectRadius:Be,defaultMarkerColor:ge,noDragClassName:Ze,noWheelClassName:Xe,noPanClassName:Ye,rfId:vt,disableKeyboardA11y:et,nodeExtent:fe,viewport:dt,onViewportChange:ut}),r.jsx(ha,{nodes:e,edges:t,defaultNodes:o,defaultEdges:i,onConnect:m,onConnectStart:x,onConnectEnd:y,onClickConnectStart:v,onClickConnectEnd:b,nodesDraggable:ne,nodesConnectable:oe,nodesFocusable:ie,edgesFocusable:ae,edgesReconnectable:se,elementsSelectable:le,elevateNodesOnSelect:Qe,elevateEdgesOnSelect:Je,minZoom:de,maxZoom:ue,nodeExtent:fe,onNodesChange:Le,onEdgesChange:He,snapToGrid:Q,snapGrid:J,connectionMode:B,translateExtent:pe,connectOnClick:Ke,defaultEdgeOptions:Ue,fitView:We,fitViewOptions:Fe,onNodesDelete:P,onEdgesDelete:j,onDelete:A,onNodeDragStart:k,onNodeDrag:M,onNodeDragStop:_,onSelectionDrag:O,onSelectionDragStart:D,onSelectionDragStop:z,onMove:h,onMoveStart:f,onMoveEnd:g,noPanClassName:Ye,nodeOrigin:re,rfId:vt,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,autoPanSpeed:ot,onError:at,connectionRadius:it,isValidConnection:rt,selectNodesOnDrag:te,nodeDragThreshold:ct,onBeforeDelete:T,paneClickDistance:Pe,debug:gt}),r.jsx(sa,{onSelectionChange:I}),Ae,r.jsx(ta,{proOptions:qe,position:Ge}),r.jsx(Qr,{rfId:vt,disableKeyboardA11y:et})]})})}));function gl({dimensions:e,lineWidth:t,variant:n,className:o}){return r.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:d(["react-flow__background-pattern",n,o])})}function ml({radius:e,className:t}){return r.jsx("circle",{cx:e,cy:e,r:e,className:d(["react-flow__background-pattern","dots",t])})}(hl=pl||(pl={})).Lines="lines",hl.Dots="dots",hl.Cross="cross";const xl={[pl.Dots]:1,[pl.Lines]:1,[pl.Cross]:6},yl=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function vl({id:e,variant:t=pl.Dots,gap:o=20,size:i,lineWidth:a=1,offset:s=0,color:l,bgColor:c,style:u,className:p,patternClassName:h}){const f=n.useRef(null),{transform:g,patternId:m}=Xr(yl,Br),x=i||xl[t],y=t===pl.Dots,v=t===pl.Cross,b=Array.isArray(o)?o:[o,o],w=[b[0]*g[2]||1,b[1]*g[2]||1],S=x*g[2],N=Array.isArray(s)?s:[s,s],C=v?[S,S]:w,E=[N[0]*g[2]||1+C[0]/2,N[1]*g[2]||1+C[1]/2],k=`${m}${e||""}`;return r.jsxs("svg",{className:d(["react-flow__background",p]),style:{...u,...Va,"--xy-background-color-props":c,"--xy-background-pattern-color-props":l},ref:f,"data-testid":"rf__background",children:[r.jsx("pattern",{id:k,x:g[0]%w[0],y:g[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:y?r.jsx(ml,{radius:S/2,className:h}):r.jsx(gl,{dimensions:C,lineWidth:a,variant:t,className:h})}),r.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}function bl(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:r.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function wl(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:r.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Sl(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:r.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Nl(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:r.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Cl(){return r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:r.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function El({children:e,className:t,...n}){return r.jsx("button",{type:"button",className:d(["react-flow__controls-button",t]),...n,children:e})}vl.displayName="Background",n.memo(vl);const kl=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Ml({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:s,onFitView:l,onInteractiveChange:c,className:u,children:p,position:h="bottom-left",orientation:f="vertical","aria-label":g="React Flow controls"}){const m=Yr(),{isInteractive:x,minZoomReached:y,maxZoomReached:v}=Xr(kl,Br),{zoomIn:b,zoomOut:w,fitView:S}=Oa(),N="horizontal"===f?"horizontal":"vertical";return r.jsxs(ea,{className:d(["react-flow__controls",N,u]),position:h,style:e,"data-testid":"rf__controls","aria-label":g,children:[t&&r.jsxs(r.Fragment,{children:[r.jsx(El,{onClick:()=>{b(),null==a||a()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v,children:r.jsx(bl,{})}),r.jsx(El,{onClick:()=>{w(),null==s||s()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y,children:r.jsx(wl,{})})]}),n&&r.jsx(El,{className:"react-flow__controls-fitview",onClick:()=>{S(i),null==l||l()},title:"fit view","aria-label":"fit view",children:r.jsx(Sl,{})}),o&&r.jsx(El,{className:"react-flow__controls-interactive",onClick:()=>{m.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),null==c||c(!x)},title:"toggle interactivity","aria-label":"toggle interactivity",children:x?r.jsx(Cl,{}):r.jsx(Nl,{})}),p]})}Ml.displayName="Controls";const _l=n.memo(Ml);const Pl=n.memo((function({id:e,x:t,y:n,width:o,height:i,style:a,color:s,strokeColor:l,strokeWidth:c,className:u,borderRadius:p,shapeRendering:h,selected:f,onClick:g}){const{background:m,backgroundColor:x}=a||{},y=s||m||x;return r.jsx("rect",{className:d(["react-flow__minimap-node",{selected:f},u]),x:t,y:n,rx:p,ry:p,width:o,height:i,style:{fill:y,stroke:l,strokeWidth:c},shapeRendering:h,onClick:g?t=>g(t,e):void 0})})),jl=e=>e.nodes.map((e=>e.id)),Al=e=>e instanceof Function?e:()=>e;const Il=n.memo((function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:l,onClick:c}){const{node:d,x:u,y:p,width:h,height:f}=Xr((t=>{const{internals:n}=t.nodeLookup.get(e),o=n.userNode,{x:i,y:r}=n.positionAbsolute,{width:a,height:s}=ei(o);return{node:o,x:i,y:r,width:a,height:s}}),Br);return d&&!d.hidden&&ti(d)?r.jsx(l,{x:u,y:p,width:h,height:f,style:d.style,selected:!!d.selected,className:o(d),color:t(d),borderRadius:i,strokeColor:n(d),strokeWidth:a,shapeRendering:s,onClick:c,id:d.id}):null}));var Dl=n.memo((function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:i,nodeComponent:a=Pl,onClick:s}){const l=Xr(jl,Br),c=Al(t),d=Al(e),u=Al(n),p="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return r.jsx(r.Fragment,{children:l.map((e=>r.jsx(Il,{id:e,nodeColorFunc:c,nodeStrokeColorFunc:d,nodeClassNameFunc:u,nodeBorderRadius:o,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:p},e)))})}));const Ol=e=>!e.hidden,zl=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Ho(Mo(e.nodeLookup,{filter:Ol}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function $l({style:e,className:t,nodeStrokeColor:o,nodeColor:i,nodeClassName:a="",nodeBorderRadius:s=5,nodeStrokeWidth:l,nodeComponent:c,bgColor:u,maskColor:p,maskStrokeColor:h,maskStrokeWidth:f,position:g="bottom-right",onClick:m,onNodeClick:x,pannable:y=!1,zoomable:v=!1,ariaLabel:b="React Flow mini map",inversePan:w,zoomStep:S=10,offsetScale:N=5}){const C=Yr(),E=n.useRef(null),{boundingRect:k,viewBB:M,rfId:_,panZoom:P,translateExtent:j,flowWidth:A,flowHeight:I}=Xr(zl,Br),D=(null==e?void 0:e.width)??200,O=(null==e?void 0:e.height)??150,z=k.width/D,$=k.height/O,R=Math.max(z,$),V=R*D,T=R*O,B=N*R,L=k.x-(V-k.width)/2-B,H=k.y-(T-k.height)/2-B,Z=V+2*B,X=T+2*B,Y=`react-flow__minimap-desc-${_}`,W=n.useRef(0),F=n.useRef();W.current=R,n.useEffect((()=>{if(E.current&&P)return F.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const i=_e(e);return{update:function({translateExtent:e,width:r,height:a,zoomStep:s=10,pannable:l=!0,zoomable:c=!0,inversePan:d=!1}){let u=[0,0];const p=Gn().on("start",(e=>{"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(u=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])})).on("zoom",l?i=>{const s=n();if("mousemove"!==i.sourceEvent.type&&"touchmove"!==i.sourceEvent.type||!t)return;const l=[i.sourceEvent.clientX??i.sourceEvent.touches[0].clientX,i.sourceEvent.clientY??i.sourceEvent.touches[0].clientY],c=[l[0]-u[0],l[1]-u[1]];u=l;const p=o()*Math.max(s[2],Math.log(s[2]))*(d?-1:1),h={x:s[0]-c[0]*p,y:s[1]-c[1]*p},f=[[0,0],[r,a]];t.setViewportConstrained({x:h.x,y:h.y,zoom:s[2]},f,e)}:null).on("zoom.wheel",c?e=>{const o=n();if("wheel"!==e.sourceEvent.type||!t)return;const i=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,r=o[2]*Math.pow(2,i);t.scaleTo(r)}:null);i.call(p,{})},destroy:function(){i.on("zoom",null)},pointer:Pe}}({domNode:E.current,panZoom:P,getTransform:()=>C.getState().transform,getViewScale:()=>W.current}),()=>{var e;null==(e=F.current)||e.destroy()}}),[P]),n.useEffect((()=>{var e;null==(e=F.current)||e.update({translateExtent:j,width:A,height:I,inversePan:w,pannable:y,zoomStep:S,zoomable:v})}),[y,v,w,S,j,A,I]);const K=m?e=>{var t;const[n,o]=(null==(t=F.current)?void 0:t.pointer(e))||[0,0];m(e,{x:n,y:o})}:void 0,G=x?n.useCallback(((e,t)=>{const n=C.getState().nodeLookup.get(t).internals.userNode;x(e,n)}),[]):void 0;return r.jsx(ea,{position:g,style:{...e,"--xy-minimap-background-color-props":"string"==typeof u?u:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof p?p:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof h?h:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof f?f*R:void 0,"--xy-minimap-node-background-color-props":"string"==typeof i?i:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof o?o:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof l?l:void 0},className:d(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:r.jsxs("svg",{width:D,height:O,viewBox:`${L} ${H} ${Z} ${X}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Y,ref:E,onClick:K,children:[b&&r.jsx("title",{id:Y,children:b}),r.jsx(Dl,{onClick:G,nodeColor:i,nodeStrokeColor:o,nodeBorderRadius:s,nodeClassName:a,nodeStrokeWidth:l,nodeComponent:c}),r.jsx("path",{className:"react-flow__minimap-mask",d:`M${L-B},${H-B}h${Z+2*B}v${X+2*B}h${-Z-2*B}z\n        M${M.x},${M.y}h${M.width}v${M.height}h${-M.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}$l.displayName="MiniMap";const Rl=n.memo($l);function Vl(e,t,n){var o,i,r,a;if(e.source===e.target)return{valid:!1,reason:"Cannot connect pins within the same node"};const s=(null==(o=e.sourceHandle)?void 0:o.includes("exec"))||!1;if(s!==((null==(i=e.targetHandle)?void 0:i.includes("exec"))||!1))return{valid:!1,reason:"Cannot connect execution pins to data pins"};const l=t.find((t=>t.id===e.source)),c=t.find((t=>t.id===e.target));if(!l||!c)return{valid:!1,reason:"Source or target node not found"};if(!s){const t=l.data,n=c.data,o=null==(r=t.outputs)?void 0:r.find((t=>t.id===e.sourceHandle)),i=null==(a=n.inputs)?void 0:a.find((t=>t.id===e.targetHandle));if(o&&i&&o.dataType!==i.dataType)return{valid:!1,reason:`Data type mismatch: ${o.dataType} cannot connect to ${i.dataType}`}}const d=(o,i=new Set)=>{if(i.has(o.id))return!1;i.add(o.id);for(const r of((e,t,n)=>{if(!e.id)return[];const o=new Set;return n.forEach((t=>{t.source===e.id&&o.add(t.target)})),t.filter((e=>o.has(e.id)))})(o,t,n)){if(r.id===e.source)return!0;if(d(r,i))return!0}return!1};return d(c)?{valid:!1,reason:"Connection would create a cycle"}:{valid:!0}}n.memo((function({nodeId:e,position:t,variant:o=nr.Handle,className:i,style:a={},children:s,color:l,minWidth:c=10,minHeight:u=10,maxWidth:p=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:g,shouldResize:m,onResizeStart:x,onResize:y,onResizeEnd:v}){const b=Ua(),w="string"==typeof e?e:b,S=Yr(),N=n.useRef(null),C=o===nr.Line?"right":"bottom-right",E=t??C,k=n.useRef(null);n.useEffect((()=>{if(N.current&&w)return k.current||(k.current=ur({domNode:N.current,nodeId:w,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:i,domNode:r}=S.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:i,paneDomNode:r}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:o,parentLookup:i,nodeOrigin:r}=S.getState(),a=[],s={x:e.x,y:e.y},l=o.get(w);if(l&&l.expandParent&&l.parentId){const t=l.origin??r,n=e.width??l.measured.width??0,c=e.height??l.measured.height??0,d=$i([{id:l.id,parentId:l.parentId,rect:{width:n,height:c,...ni({x:e.x??l.position.x,y:e.y??l.position.y},{width:n,height:c},l.parentId,o,t)}}],o,i,r);a.push(...d),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*c,e.y):void 0}if(void 0!==s.x&&void 0!==s.y){const e={id:w,type:"position",position:{...s}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:w,type:"dimensions",resizing:!0,setAttributes:!g||("horizontal"===g?"width":"height"),dimensions:{width:e.width,height:e.height}};a.push(t)}for(const c of t){const e={...c,type:"position"};a.push(e)}n(a)},onEnd:({width:e,height:t})=>{const n={id:w,type:"dimensions",resizing:!1,dimensions:{width:e,height:t}};S.getState().triggerNodeChanges([n])}})),k.current.update({controlPosition:E,boundaries:{minWidth:c,minHeight:u,maxWidth:p,maxHeight:h},keepAspectRatio:f,resizeDirection:g,onResizeStart:x,onResize:y,onResizeEnd:v,shouldResize:m}),()=>{var e;null==(e=k.current)||e.destroy()}}),[E,c,u,p,h,f,x,y,v,m]);const M=E.split("-"),_=o===nr.Line?"borderColor":"backgroundColor",P=l?{...a,[_]:l}:a;return r.jsx("div",{className:d(["react-flow__resize-control","nodrag",...M,o,i]),ref:N,style:P,children:s})}));const Tl=class e{constructor(){t(this,"apiContext",null)}static getInstance(){return e.instance||(e.instance=new e),e.instance}setApiContext(e){this.apiContext=e}getApiComponents(){return this.apiContext?this.apiContext.getComponents():[]}getApiComponentsByApp(e){const t=this.getApiComponents(),n=t.filter((t=>t.path.includes(`/apps/${e}/`)||t.id===e));return n.length>0?n:t.filter((t=>{var n;return t.id===e||t.id.startsWith(`${e}-`)||t.id.startsWith(`${e}_`)||(null==(n=t.metadata)?void 0:n.appId)===e||"/components/textareas"===t.path&&"notepad"===e}))}getActionsForComponent(e){const t=this.getApiComponents().find((t=>t.id===e));return(null==t?void 0:t.actions)||[]}async executeAction(e,t,n){if(!this.apiContext)return{success:!1,error:"API context not initialized"};try{return await this.apiContext.executeAction(e,t,n)}catch(o){return{success:!1,error:o instanceof Error?o.message:String(o)}}}getAvailableApps(){const e=this.getApiComponents(),t=new Map;return e.forEach((e=>{const n=e.path.split("/");if(n.length>=3&&"api"===n[1]){const o=n[2],i=e.type||o;t.set(o,i)}if(n.length>=3&&"apps"===n[1]){const o=n[2],i=e.name||o;t.set(o,i)}if(n.length>=4&&"apps"===n[2]){const o=n[3],i=e.name||o;t.set(o,i)}"/components/textareas"===e.path&&t.set("notepad","Notepad")})),Array.from(t.entries()).map((([e,t])=>({id:e,name:"string"==typeof t?t.charAt(0).toUpperCase()+t.slice(1):String(t)})))}};t(Tl,"instance");let Bl=Tl;const Ll=({pin:e,position:t,nodeId:n,isConnectable:o})=>{const i=`${e.id}`;return r.jsxs("div",{className:"execution-pin flex items-center my-1 relative",children:[" ",r.jsx(Ja,{type:t===bo.Left?"target":"source",position:t,id:i,isConnectable:o,className:"execution-handle w-5 h-5 bg-white border-2 border-gray-300 rounded-full",style:{zIndex:100},"data-pin-type":"execution"}),r.jsx("div",{className:"execution-label text-xs text-primary font-mono font-bold "+(t===bo.Right?"mr-5 ml-5":"ml-5 mr-5"),children:e.label})]})},Hl=({pin:e,nodeId:t,isConnectable:n})=>{const o=`${e.id}`,i=(e=>{switch(e){case"string":return"bg-purple-500 border-purple-600";case"number":return"bg-orange-500 border-orange-600";case"boolean":return"bg-red-500 border-red-600";case"object":return"bg-blue-500 border-blue-600";case"array":return"bg-pink-500 border-pink-600";default:return"bg-gray-400 border-gray-500"}})(e.dataType);return r.jsxs("div",{className:"input-pin flex items-center my-1 relative",children:[r.jsx(Ja,{type:"target",position:bo.Left,id:o,isConnectable:n,className:`w-5 h-5 rounded-full border-2 ${i}`,style:{zIndex:100},"data-pin-type":e.type,"data-pin-data-type":e.dataType||"unknown"})," ",r.jsx("div",{className:"pin-label text-xs text-gray-300 font-mono ml-5",children:e.label})]})},Zl=({pin:e,nodeId:t,isConnectable:n})=>{const o=`${e.id}`,i=(e=>{switch(e){case"string":return"bg-purple-500 border-purple-600";case"number":return"bg-orange-500 border-orange-600";case"boolean":return"bg-red-500 border-red-600";case"object":return"bg-blue-500 border-blue-600";case"array":return"bg-pink-500 border-pink-600";default:return"bg-gray-400 border-gray-500"}})(e.dataType);return r.jsxs("div",{className:"output-pin flex items-center justify-end my-1 relative",children:[" ",r.jsx("div",{className:"pin-label text-xs text-gray-300 font-mono mr-5",children:e.label}),r.jsx(Ja,{type:"source",position:bo.Right,id:o,isConnectable:n,className:`w-5 h-5 rounded-full border-2 ${i}`,style:{zIndex:100},"data-pin-type":e.type,"data-pin-data-type":e.dataType||"unknown"})]})},Xl=n.memo((({id:e,data:t,isConnectable:o})=>{const[i,a]=n.useState(null),[l,c]=n.useState(null),[d,u]=n.useState(!t.actionId),[p,h]=n.useState(null),{setNodes:f}=Oa(),{pluginManager:g}=s();n.useEffect((()=>{const e=Bl.getInstance().getApiComponents().find((e=>e.id===t.componentId));if(e){if(a(e),t.actionId){const n=e.actions.find((e=>e.id===t.actionId));n&&c(n)}if(e.path){const t=e.path.split("/");if(t.length>=3&&"apps"===t[1]){const e=t[2],n=g.getPlugin(e);n&&n.manifest.icon&&h(n.manifest.icon)}}}}),[t.componentId,t.actionId,g]);const m=()=>{const e=(null==i?void 0:i.path)||"";return e.includes("calculator")?"bg-purple-700":e.includes("notepad")?"bg-green-700":e.includes("audioplayer")?"bg-red-700":e.includes("browser")?"bg-blue-700":"bg-gray-700"},x=()=>i?r.jsxs("div",{className:"p-3 bg-[#1A202C] rounded",children:[r.jsx("h3",{className:"text-sm font-bold mb-2 text-primary",children:"Configure Node"}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Select Action"}),r.jsxs("select",{className:"w-full p-1 bg-[#2D3748] border border-[#4A5568] rounded text-primary text-sm",onChange:t=>(t=>{var n;if(!i)return;const o=i.actions.find((e=>e.id===t));if(o){c(o);const t={},i=(null==(n=o.parameters)?void 0:n.map((e=>{const n=`input-${Date.now()}-${e.name}`;return t[n]=e.name,{id:n,type:"input",label:e.name,dataType:e.type}})))||[],r=`exec-success-${Date.now()}`,a=`exec-error-${Date.now()}`,s=[{id:r,type:"execution",label:"Success"},{id:a,type:"execution",label:"Error"}];f((n=>n.map((n=>{if(n.id===e){const e={...n.data,actionId:o.id,inputs:i,parameterMappings:t,executionOutputs:s,successPinId:r,errorPinId:a};return{...n,data:e}}return n})))),u(!1)}})(t.target.value),value:(null==l?void 0:l.id)||"",children:[r.jsx("option",{value:"",children:"Choose an action..."}),i.actions.map((e=>r.jsx("option",{value:e.id,children:e.name},e.id)))]})]}),r.jsx("div",{className:"text-right",children:r.jsx("button",{className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 text-primary rounded text-xs",onClick:()=>u(!1),disabled:!l,children:"Apply"})})]}):r.jsx("div",{children:"Loading component data..."});return d?r.jsxs("div",{className:"workflow-node-base",children:[r.jsxs("div",{className:`node-header ${m()}`,children:[r.jsx("span",{className:"text-sm truncate",children:(null==i?void 0:i.name)||(null==i?void 0:i.type)||"API Component"}),r.jsx("span",{className:"text-xs opacity-70",children:t.appId})]}),x()]}):r.jsxs("div",{className:"workflow-node-base",children:[r.jsxs("div",{className:`node-header ${m()}`,children:[r.jsx("span",{className:"text-sm truncate",children:(null==i?void 0:i.name)||t.label}),r.jsx("span",{className:"text-xs opacity-70 font-mono",children:t.endpoint})]}),r.jsxs("div",{className:"node-content",children:[r.jsxs("div",{className:"left-pins-container",children:[t.executionInputs.map((t=>r.jsx(Ll,{pin:t,position:bo.Left,nodeId:e,isConnectable:o},t.id))),t.inputs.map((t=>r.jsx(Hl,{pin:t,nodeId:e,isConnectable:o},t.id)))]}),r.jsx("div",{className:"node-center-content",children:p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex items-center justify-center mb-1 w-10 h-10 transform scale-90",children:p}),l&&r.jsx("div",{className:"text-xs text-indigo-300 text-center",children:l.name})]}):r.jsx("div",{className:"text-center text-sm text-gray-300",children:l&&r.jsx("div",{className:"text-xs mt-1 text-indigo-300",children:l.name})})}),r.jsxs("div",{className:"right-pins-container",children:[t.executionOutputs.map((t=>r.jsx(Ll,{pin:t,position:bo.Right,nodeId:e,isConnectable:o},t.id))),t.outputs.map((t=>r.jsx(Zl,{pin:t,nodeId:e,isConnectable:o},t.id)))]})]}),r.jsxs("div",{className:"node-footer",children:[r.jsx("span",{children:(null==i?void 0:i.type)||"API"}),r.jsx("span",{children:(null==l?void 0:l.name)||"No Action"})]})]})})),Yl=n.memo((({id:e,data:t,isConnectable:n})=>r.jsxs("div",{className:"api-node rounded-md overflow-hidden shadow-lg bg-[#2D3748] border-2 border-[#4A5568] min-w-[250px]",children:[r.jsxs("div",{className:"node-header px-3 py-2 bg-[#1A202C] text-primary font-bold flex items-center justify-between",children:[r.jsx("span",{className:"text-sm truncate",children:t.label}),r.jsx("span",{className:"text-xs opacity-70 font-mono",children:t.endpoint})]}),r.jsxs("div",{className:"node-content flex",children:[r.jsxs("div",{className:"left-pins-container flex flex-col gap-3 py-3 pl-0 pr-3 border-r border-[#4A5568]",children:[t.executionInputs.map((t=>r.jsx(Ll,{pin:t,position:bo.Left,nodeId:e,isConnectable:n},t.id))),t.inputs.map((t=>r.jsx(Hl,{pin:t,nodeId:e,isConnectable:n},t.id)))]}),r.jsx("div",{className:"node-center-content flex-1 px-3 py-2 flex flex-col items-center justify-center",children:r.jsx("div",{className:"text-center text-sm text-gray-300",children:"REST API"})}),r.jsxs("div",{className:"right-pins-container flex flex-col gap-3 py-3 pl-3 pr-0 border-l border-[#4A5568]",children:[t.executionOutputs.map((t=>r.jsx(Ll,{pin:t,position:bo.Right,nodeId:e,isConnectable:n},t.id))),t.outputs.map((t=>r.jsx(Zl,{pin:t,nodeId:e,isConnectable:n},t.id)))]})]}),t.description&&r.jsx("div",{className:"node-footer px-3 py-1 bg-[#1A202C] text-xs text-gray-400 border-t border-[#4A5568]",children:t.description})]}))),Wl=n.memo((({id:e,data:t,isConnectable:n})=>r.jsxs("div",{className:"workflow-node-base",children:[r.jsx("div",{className:"node-header",style:{background:"linear-gradient(to bottom, #16a34a, #15803d)",border:"1px solid #166534"},children:r.jsx("span",{className:"text-sm truncate",children:t.label||"Begin Workflow"})}),r.jsxs("div",{className:"node-content",children:[r.jsx("div",{className:"node-center-content text-center text-sm text-gray-300"}),r.jsx("div",{className:"right-pins-container",children:t.executionOutputs.map((t=>r.jsx(Ll,{pin:t,position:bo.Right,nodeId:e,isConnectable:n},t.id)))})]})]})));const Fl=n.memo((({id:e,data:t,isConnectable:n})=>r.jsxs("div",{className:"workflow-node-base",children:[r.jsx("div",{className:"node-header",style:{background:"linear-gradient(to bottom, #8B5CF6, #7C3AED)",border:"1px solid #6D28D9"},children:r.jsx("span",{className:"text-sm truncate",children:t.label})}),r.jsxs("div",{className:"node-content",children:[r.jsx("div",{className:"left-pins-container",children:t.inputs.map((t=>r.jsx(Hl,{pin:t,nodeId:e,isConnectable:n},t.id)))}),r.jsx("div",{className:"node-center-content text-center",children:r.jsxs("div",{className:"text-xs text-gray-300 mb-1",children:["Convert ",t.inputDataType," to ",t.outputDataType]})}),r.jsx("div",{className:"right-pins-container",children:t.outputs.map((t=>r.jsx(Zl,{pin:t,nodeId:e,isConnectable:n},t.id)))})]})]}))),Kl=n.memo((({id:e,data:t,isConnectable:n})=>{const{setNodes:o}=Oa();return r.jsxs("div",{className:"workflow-node-base",children:[r.jsx("div",{className:"node-header",style:{background:"linear-gradient(to bottom, #F97316, #EA580C)",border:"1px solid #C2410C"},children:r.jsx("span",{className:"text-sm truncate",children:t.label||"Number Value"})}),r.jsxs("div",{className:"node-content",children:[r.jsx("div",{className:"node-center-content",children:r.jsx("input",{type:"number",value:t.value,onChange:t=>{const n=parseFloat(t.target.value);isNaN(n)||o((t=>t.map((t=>t.id===e?{...t,data:{...t.data,value:n}}:t))))},onKeyDown:e=>{e.stopPropagation()},className:"w-full px-2 py-1 bg-[#1A202C] border border-[#4A5568] text-primary rounded",placeholder:"Enter number value...",step:"0.1"})}),r.jsx("div",{className:"right-pins-container",children:t.outputs.map((t=>r.jsx(Zl,{pin:t,nodeId:e,isConnectable:n},t.id)))})]})]})})),Gl=n.memo((({id:e,data:t,isConnectable:n})=>{const{setNodes:o}=Oa();return r.jsxs("div",{className:"workflow-node-base",children:[r.jsx("div",{className:"node-header",style:{background:"linear-gradient(to bottom, #8B5CF6, #7C3AED)",border:"1px solid #6D28D9"},children:r.jsx("span",{className:"text-sm truncate",children:t.label||"String Value"})}),r.jsxs("div",{className:"node-content",children:[r.jsx("div",{className:"node-center-content",children:r.jsx("input",{type:"text",value:t.value,onChange:t=>{const n=t.target.value;o((t=>t.map((t=>t.id===e?{...t,data:{...t.data,value:n}}:t))))},onKeyDown:e=>{e.stopPropagation()},className:"w-full px-2 py-1 bg-[#1A202C] border border-[#4A5568] text-primary rounded",placeholder:"Enter string value..."})}),r.jsx("div",{className:"right-pins-container",children:t.outputs.map((t=>r.jsx(Zl,{pin:t,nodeId:e,isConnectable:n},t.id)))})]})]})}));let ql=0;function Ul(e,t,n){return{id:`${e}-${Date.now()}-${++ql}`,type:e,dataType:t,label:n,acceptsMultipleConnections:"input"===e}}function Ql(e,t){return{id:`exec-${"in"===t?"in":"out"}-${Date.now()}-${++ql}`,type:"execution",label:e,acceptsMultipleConnections:!0}}const Jl={apiNode:Yl,apiAppNode:Xl,beginWorkflow:Wl,stringPrimitive:Gl,numberPrimitive:Kl,dataTypeConversion:Fl},ec={custom:function({id:e,sourceX:t,sourceY:n,targetX:o,targetY:i,sourcePosition:a,targetPosition:s,data:l,style:c={},markerEnd:d,selected:u}){const[p]=gi({sourceX:t,sourceY:n,sourcePosition:a,targetX:o,targetY:i,targetPosition:s}),h=null==l?void 0:l.isExecution,f=null==l?void 0:l.dataType;let g="#A78BFA",m=2,x="";if(u)g="#ffff00",m=5;else if(h)g="white",x="5, 5";else if(f){switch(f){case"string":g="#8B5CF6";break;case"number":case"integer":g="#F97316";break;case"float":g="#22C55E";break;case"boolean":g="#EF4444";break;case"object":g="#3B82F6";break;case"array":g="#EC4899";break;default:g="#A78BFA"}x=""}return r.jsxs(r.Fragment,{children:[r.jsx(bs,{path:p,markerEnd:d,style:{...c,stroke:g,strokeWidth:m,strokeDasharray:x,filter:u?"drop-shadow(0px 0px 8px #ffff00) drop-shadow(0px 2px 4px rgba(0,0,0,0.6))":"drop-shadow(0px 1px 2px rgba(0,0,0,0.8)) drop-shadow(0px 0px 3px rgba(255,255,255,0.2))",strokeLinecap:"round"}}),r.jsx("path",{id:e,className:"react-flow__edge-interaction",d:p,strokeWidth:12,stroke:"transparent",fill:"none"})]})}},tc=class e{constructor(){t(this,"apiService"),this.apiService=Bl.getInstance()}static getInstance(){return e.instance||(e.instance=new e),e.instance}async executeWorkflow(e,t,n,o,i={}){var r,a;o.addNodeScopedVariable||(o.addNodeScopedVariable=(e,t,n)=>{const i=`${e}:${t}`;o.addVariable(i,n)}),o.getNodeScopedVariable||(o.getNodeScopedVariable=(e,t)=>{const n=`${e}:${t}`;return o.getVariable(n)});const s=t.find((t=>t.id===e));if(!s)throw new Error(`Start node with ID ${e} not found`);try{await this.executeNode(s,t,n,o,i),null==(r=i.onWorkflowComplete)||r.call(i)}catch(l){const e=l instanceof Error?l:new Error(String(l));throw null==(a=i.onError)||a.call(i,e),e}}async executeNode(e,t,n,o,i){var r,a,s;o.currentNodeId=e.id,o.allEdges=n,null==(r=i.onNodeStart)||r.call(i,e.id);try{if(this.processDataConnections(e,t,n,o),"apiAppNode"===e.type?await this.executeApiAppNode(e,o):"apiNode"===e.type?await this.executeApiNode(e,o):"stringPrimitive"===e.type?await this.executeStringPrimitiveNode(e,o):"numberPrimitive"===e.type?await this.executeNumberPrimitiveNode(e,o):"beginWorkflow"===e.type?await this.executeBeginWorkflowNode(e,o):"dataTypeConversion"===e.type?await this.executeDataTypeConversionNode(e,o):o.setResult(e.id,{message:`Node ${e.id} executed`}),null==(a=i.onNodeComplete)||a.call(i,e.id,o.getResult(e.id)),("apiNode"===e.type||"apiAppNode"===e.type)&&e.data){const r=e.data,a=o.getResult(e.id),s=a&&"object"==typeof a&&(!("success"in a)||!0===a.success),l=r.executionOutputs||[],c=l.find((e=>"Success"===e.label)),d=l.find((e=>"Fail"===e.label));if(c&&d){const r=s?c.id:d.id,a=n.filter((t=>t.source===e.id&&t.sourceHandle===r));for(const e of a){const r=t.find((t=>t.id===e.target));r&&await this.executeNode(r,t,n,o,i)}return}}const r=n.filter((t=>{var n;return t.source===e.id&&(null==(n=t.sourceHandle)?void 0:n.includes("exec"))}));for(const e of r){const r=t.find((t=>t.id===e.target));r&&await this.executeNode(r,t,n,o,i)}}catch(l){const t=l instanceof Error?l:new Error(String(l));throw null==(s=i.onError)||s.call(i,t,e.id),t}}processDataConnections(e,t,n,o){this.debugLogContext(o,e.id,"Before processing data connections");const i=n.filter((t=>{var n,o;return t.target===e.id&&!(null==(n=t.targetHandle)?void 0:n.includes("exec"))&&!(null==(o=t.sourceHandle)?void 0:o.includes("exec"))}));i.forEach(((e,t)=>{}));for(const r of i){const n=t.find((e=>e.id===r.source));if(n){const t=r.sourceHandle,i=r.targetHandle;if(t&&i){let r=o.getNodeScopedVariable(n.id,t);if(void 0===r&&(r=o.getVariable(t)),void 0!==r)if("apiAppNode"===e.type||"apiAppNode"===n.type){const t="object"==typeof r&&null!==r?JSON.parse(JSON.stringify(r)):r;o.addNodeScopedVariable(e.id,i,t),o.addVariable(i,t)}else o.addVariable(i,r);else{const e=o.getResult(n.id);if(e&&"object"==typeof e){let t;if(t="data"in e&&void 0!==e.data?"object"==typeof e.data&&"value"in e.data?e.data.value:e.data:e,void 0!==t){o.addVariable(i,t);continue}}if("stringPrimitive"===n.type||"numberPrimitive"===n.type){"stringPrimitive"===n.type?this.executeStringPrimitiveNode(n,o):this.executeNumberPrimitiveNode(n,o);const e=o.getVariable(t);void 0!==e&&o.addVariable(i,e)}else if("dataTypeConversion"===n.type){this.executeDataTypeConversionNode(n,o);const e=o.getVariable(t);void 0!==e&&o.addVariable(i,e)}}}}}this.debugLogContext(o,e.id,"After processing data connections")}debugLogContext(e,t,n){}async executeApiAppNode(e,t){var n;if("apiAppNode"!==e.type||!e.data)throw new Error(`Node ${e.id} is not a valid API App Node`);const o=e.data;if(!o.componentId||!o.actionId)throw new Error(`Node ${e.id} is not properly configured with componentId and actionId`);this.debugLogContext(t,e.id,`Before executing ${o.componentId}.${o.actionId}`);const i={},r=o.actionId.includes("setValue");if(o.parameterMappings&&o.inputs)for(const l of o.inputs){const e=o.parameterMappings[l.id];if(e){const n=t.getVariable(l.id);if(void 0!==n)if(r&&"value"===e)if("object"==typeof n)try{i[e]=JSON.stringify(n)}catch(s){i[e]=String(n)}else i[e]=String(n);else i[e]=n}}!r||i.value&&"string"==typeof i.value||(void 0!==i.value?i.value=String(i.value):i.value="");const a=await this.apiService.executeAction(o.componentId,o.actionId,i);t.setResult(e.id,a);if("getValue"===o.actionId&&void 0!==a.data){let n;const i=a.data;if(n="object"==typeof i&&null!==i&&"value"in i?i.value:i,o.outputs)for(const r of o.outputs)t.addNodeScopedVariable(e.id,r.id,n),t.addVariable(r.id,n)}else{if("onEvent"===o.componentId&&"waitForEvent"===o.actionId&&o.outputs&&o.outputs.length>0){const n=o.outputs[0];let i;return i=a&&"object"==typeof a&&"data"in a?a.data:a,t.addNodeScopedVariable(e.id,n.id,i),void t.addVariable(n.id,i)}if(o.outputs&&o.outputs.length>0){const n=o.outputs.find((e=>e.label.toLowerCase().includes("result")))||o.outputs[0];if(n){const o=void 0!==a.data?a.data:a;t.addNodeScopedVariable(e.id,n.id,o),t.addVariable(n.id,o)}}if(o.resultMappings&&a.data)for(const[e,n]of Object.entries(o.resultMappings)){const o=this.getNestedValue(a.data,e);void 0!==o&&t.addVariable(n,o)}if(o.outputs&&o.outputs.length>0)for(const e of o.outputs)if(void 0===t.getVariable(e.id))if(a.data)if("object"===e.dataType)t.addVariable(e.id,a.data);else if("string"===e.dataType)try{const n="string"==typeof a.data?a.data:JSON.stringify(a.data);t.addVariable(e.id,n)}catch(s){t.addVariable(e.id,String(a.data))}else"boolean"===e.dataType?t.addVariable(e.id,!!a.success):t.addVariable(e.id,a);else"boolean"===e.dataType?t.addVariable(e.id,!!a.success):t.addVariable(e.id,a);if(this.debugLogContext(t,e.id,`After executing ${o.componentId}.${o.actionId}`),o.successPinId&&o.errorPinId){const i=(null==(n=t.allEdges)?void 0:n.filter((t=>{var n;return t.source===e.id&&(null==(n=t.sourceHandle)?void 0:n.includes("exec"))})))||[];i.filter((e=>e.sourceHandle===o.successPinId)),i.filter((e=>e.sourceHandle===o.errorPinId)),t.addVariable(o.successPinId,!!a.success||null),t.addVariable(o.errorPinId,!a.success||null)}else if(!a.success)throw new Error(a.error||`Action execution failed for node ${e.id}`)}}async executeApiNode(e,t){if("apiNode"!==e.type||!e.data)throw new Error(`Node ${e.id} is not a valid API Node`);const n=e.data;let o=1e4;if(n.inputs)for(const s of n.inputs){const e=t.getVariable(s.id);"maxTime"===s.label&&"number"==typeof e?o=e:s.label}const i=new AbortController,r=setTimeout((()=>i.abort()),o);try{const o=await fetch(n.endpoint,{method:"GET",headers:{"Content-Type":"application/json"},signal:i.signal});if(clearTimeout(r),!o.ok)throw new Error(`HTTP error: ${o.status} ${o.statusText}`);const a=await o.json();if(t.setResult(e.id,{success:!0,data:a,status:o.status}),n.outputs&&n.outputs.length>0){const e=n.outputs[0];t.addVariable(e.id,a)}}catch(a){clearTimeout(r),t.setResult(e.id,{success:!1,error:a instanceof Error?a.message:String(a)})}}async executeStringPrimitiveNode(e,t){if("stringPrimitive"!==e.type||!e.data)throw new Error(`Node ${e.id} is not a valid String Primitive Node`);const n=e.data,o=n.value;if(t.setResult(e.id,{success:!0,data:{value:o}}),n.outputs&&n.outputs.length>0)for(const i of n.outputs)t.addNodeScopedVariable(e.id,i.id,o),t.addVariable(i.id,o)}async executeNumberPrimitiveNode(e,t){if("numberPrimitive"!==e.type||!e.data)throw new Error(`Node ${e.id} is not a valid Number Primitive Node`);const n=e.data,o=n.value;if(t.setResult(e.id,{success:!0,data:{value:o}}),n.outputs&&n.outputs.length>0)for(const i of n.outputs)t.addNodeScopedVariable(e.id,i.id,o),t.addVariable(i.id,o)}async executeBeginWorkflowNode(e,t){if(e.data&&e.data.executionOutputs&&Array.isArray(e.data.executionOutputs)){const n=e.data.executionOutputs;for(const e of n)t.addVariable(e.id,null)}}async executeDataTypeConversionNode(e,t){if("dataTypeConversion"!==e.type||!e.data)throw new Error(`Node ${e.id} is not a valid DataTypeConversion Node`);const n=e.data;this.debugLogContext(t,e.id,`Before conversion from ${n.inputDataType} to ${n.outputDataType}`);const o=n.inputs[0],i=n.outputs[0];if(!o)return;if(!i)return;const r=this.findValueForPin(o.id,t,e.id);if(void 0===r)return void("string"===n.outputDataType?(t.addVariable(i.id,""),t.setResult(e.id,{success:!0,data:{value:""}})):"number"===n.outputDataType?(t.addVariable(i.id,0),t.setResult(e.id,{success:!0,data:{value:0}})):"boolean"===n.outputDataType?(t.addVariable(i.id,!1),t.setResult(e.id,{success:!0,data:{value:!1}})):(t.addVariable(i.id,{}),t.setResult(e.id,{success:!0,data:{value:{}}})));let a;if("string"===n.outputDataType)if("object"==typeof r)try{a=JSON.stringify(r)}catch(s){a=String(r)}else a=String(r);else if("number"===n.outputDataType)a=Number(r),isNaN(a)&&(a=0);else if("boolean"===n.outputDataType)a=Boolean(r);else try{a="string"==typeof r?JSON.parse(r):r}catch(l){a=r}t.setResult(e.id,{success:!0,data:{value:a}}),t.addNodeScopedVariable(e.id,i.id,a),t.addVariable(i.id,a),this.debugLogContext(t,e.id,`After conversion from ${n.inputDataType} to ${n.outputDataType}`)}findValueForPin(e,t,n){if(n){const o=t.getNodeScopedVariable(n,e);if(void 0!==o)return o}const o=t.getVariable(e);if(void 0!==o)return o}getNestedValue(e,t){if(!e||"object"!=typeof e||!t)return;const n=t.split(".");let o=e;for(const i of n){if(null==o||"object"!=typeof o)return;o=o[i]}return o}};t(tc,"instance");let nc=tc;const oc=({onAddNode:e,hasBeginWorkflowNode:t})=>{const[o,i]=n.useState(!1),[s,c]=n.useState(""),[d,u]=n.useState(""),[p,h]=n.useState("basic"),[f,g]=n.useState("string"),[m,x]=n.useState(""),[y,v]=n.useState(0),[b,w]=n.useState([]),[S,N]=n.useState(""),[C,E]=n.useState([]),[k,M]=n.useState(""),[_,P]=n.useState("object"),[j,A]=n.useState("string"),I=l(),D=Ul("input","string","setParam"),O=Ul("input","number","maxTime"),z=Ul("output","object","result"),$=Ql("In","in"),R=Ql("Success","out"),V=Ql("Fail","out"),T=Ql("Next","out"),B=Ul("output","string","Value"),L=Ul("output","number","Value"),H=Ul("input",_,"Input"),Z=Ul("output",j,"Output");n.useEffect((()=>{const e=Bl.getInstance();e.setApiContext(I);const t=()=>{const t=e.getAvailableApps();w(t)};t();const n=a.subscribe("api:component:registered",t),o=a.subscribe("api:component:unregistered",t);return()=>{n(),o()}}),[I]),n.useEffect((()=>{if(!S)return E([]),void M("");const e=Bl.getInstance().getApiComponentsByApp(S);E(e)}),[S]),n.useEffect((()=>{const e=e=>{"Escape"===e.key&&o&&i(!1)};return o&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[o]);const X=()=>{if(!s.trim()||!d.trim())return;const t={id:`rest-node-${Date.now()}`,type:"apiNode",position:{x:300*Math.random()+50,y:300*Math.random()+50},data:{label:s,endpoint:d,description:"REST API Node",inputs:[D,O],outputs:[z],executionInputs:[$],executionOutputs:[R,V]}};e(t),c(""),u(""),i(!1)},Y=()=>{if(!S||!k)return;const t=C.find((e=>e.id===k));if(!t)return;const n=(e=>{var t,n;if(!e)return{inputs:[],outputs:[],executionInputs:[],executionOutputs:[]};const o=(null==(n=null==(t=e.actions[0])?void 0:t.parameters)?void 0:n.map((e=>({id:`input-${Date.now()}-${e.name}`,type:"input",label:e.name,dataType:e.type,acceptsMultipleConnections:!0}))))||[],i="onEvent"===e.id;return{inputs:o,outputs:[{id:`output-${Date.now()}-result`,type:"output",label:"Result",dataType:"object"}],executionInputs:[{id:`exec-in-${Date.now()}`,type:"execution",label:"In",acceptsMultipleConnections:!0}],executionOutputs:i?[{id:`exec-success-${Date.now()}`,type:"execution",label:"Success",acceptsMultipleConnections:!0},{id:`exec-error-${Date.now()}`,type:"execution",label:"Error",acceptsMultipleConnections:!0}]:[{id:`exec-out-${Date.now()}`,type:"execution",label:"Success",acceptsMultipleConnections:!0}]}})(t),o=(e=>({id:`app-node-${Date.now()}`,type:"apiAppNode",position:{x:300*Math.random()+50,y:300*Math.random()+50},data:e}))({label:t.type,endpoint:t.path,description:t.description,componentId:t.id,appId:S,inputs:n.inputs,outputs:n.outputs,executionInputs:n.executionInputs,executionOutputs:n.executionOutputs});e(o),N(""),M(""),i(!1)},W=()=>{const t={id:`string-primitive-${Date.now()}`,type:"stringPrimitive",position:{x:300*Math.random()+50,y:300*Math.random()+50},data:{label:"String Value",value:m,outputs:[B]}};e(t),x(""),i(!1)},F=()=>{const t={id:`number-primitive-${Date.now()}`,type:"numberPrimitive",position:{x:300*Math.random()+50,y:300*Math.random()+50},data:{label:"Number Value",value:y,outputs:[L]}};e(t),v(0),i(!1)},K=()=>{const t={label:`Convert ${_} to ${j}`,inputDataType:_,outputDataType:j,inputs:[H],outputs:[Z]},n={id:`data-convert-${Date.now()}`,type:"dataTypeConversion",position:{x:300*Math.random()+50,y:300*Math.random()+50},data:t};e(n),i(!1)};return r.jsx("div",{className:"node-creation-menu absolute top-4 left-4 z-10",children:o?r.jsxs("div",{className:"p-4 rounded-md shadow-xl w-64",style:{background:"linear-gradient(to bottom, #4a4a4a, #2a2a2a)",border:"2px solid #1a1a1a",boxShadow:"\n              inset 0 1px 0 rgba(255,255,255,0.2),\n              inset 0 -1px 0 rgba(0,0,0,0.3),\n              inset 1px 0 0 rgba(255,255,255,0.1),\n              inset -1px 0 0 rgba(0,0,0,0.2),\n              0 4px 8px rgba(0,0,0,0.4)\n            "},children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-white font-bold",style:{textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:"basic"===p?"Add REST API Node":"app"===p?"Add App API Node":"Add Primitive Node"}),r.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-white transition-colors p-1 rounded",style:{fontSize:"18px",lineHeight:"1",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Close menu",children:"✕"})]}),r.jsxs("div",{className:"flex mb-4 rounded overflow-hidden",style:{background:"linear-gradient(to bottom, #2a2a2a, #1a1a1a)",border:"1px solid #444",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.4)"},children:[r.jsx("button",{className:"flex-1 py-1 text-sm text-white transition-all",style:{background:"basic"===p?"linear-gradient(to bottom, #0ea5e9, #0284c7)":"transparent",textShadow:"0 1px 2px rgba(0,0,0,0.8)",opacity:"basic"===p?1:.7},onClick:()=>h("basic"),children:"REST API"}),r.jsx("button",{className:"flex-1 py-1 text-sm text-white transition-all",style:{background:"app"===p?"linear-gradient(to bottom, #16a34a, #15803d)":"transparent",textShadow:"0 1px 2px rgba(0,0,0,0.8)",opacity:"app"===p?1:.7},onClick:()=>h("app"),children:"App API"}),r.jsx("button",{className:"flex-1 py-1 text-sm text-white transition-all",style:{background:"primitive"===p?"linear-gradient(to bottom, #8B5CF6, #7C3AED)":"transparent",textShadow:"0 1px 2px rgba(0,0,0,0.8)",opacity:"primitive"===p?1:.7},onClick:()=>h("primitive"),children:"Primitive"})]}),"basic"===p?r.jsxs("div",{className:"menu-section",children:[r.jsx("h4",{className:"text-primary font-medium mb-3",children:"REST API Node"}),r.jsxs("div",{className:"mb-3 text-sm text-gray-300",children:[r.jsx("p",{children:"Creates a REST API call node with:"}),r.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[r.jsx("li",{children:"Execution pin for triggering the call"}),r.jsx("li",{children:'"Success" execution output for successful API calls'}),r.jsx("li",{children:'"Fail" execution output for failed or timed-out calls'}),r.jsx("li",{children:"maxTime input for setting timeout in milliseconds"}),r.jsx("li",{children:"Result output with the API response data"})]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-gray-300 text-sm mb-1",children:"Name"}),r.jsx("input",{type:"text",value:s,onChange:e=>c(e.target.value),className:"w-full px-2 py-1 bg-[#1A202C] border border-[#4A5568] rounded text-primary",placeholder:"Node name"})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-gray-300 text-sm mb-1",children:"Endpoint URL"}),r.jsx("input",{type:"text",value:d,onChange:e=>u(e.target.value),className:"w-full px-2 py-1 bg-[#1A202C] border border-[#4A5568] rounded text-primary",placeholder:"https://api.example.com/endpoint"})]}),r.jsx("button",{onClick:X,disabled:!s||!d,className:`w-full px-3 py-1 ${s&&d?"bg-blue-600 hover:bg-blue-700":"bg-gray-500 cursor-not-allowed"} text-primary rounded`,children:"Add REST API Node"})]}):"app"===p?r.jsxs("div",{className:"menu-section",children:[r.jsx("h4",{className:"text-primary font-medium mb-3",children:"API App Node"}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-gray-300 text-sm mb-1",children:"App"}),r.jsxs("select",{value:S,onChange:e=>N(e.target.value),className:"w-full px-2 py-1 bg-[#1A202C] border border-[#4A5568] rounded text-primary",children:[r.jsx("option",{value:"",children:"Select an app..."}),b.map((e=>r.jsx("option",{value:e.id,children:e.name},e.id)))]})]}),S&&r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-gray-300 text-sm mb-1",children:"Component"}),r.jsxs("select",{value:k,onChange:e=>M(e.target.value),className:"w-full px-2 py-1 bg-[#1A202C] border border-[#4A5568] rounded text-primary",children:[r.jsx("option",{value:"",children:"Select a component..."}),C.map((e=>r.jsx("option",{value:e.id,children:e.name||e.type},e.id)))]})]}),r.jsx("button",{onClick:Y,disabled:!S||!k,className:`w-full px-3 py-1 ${S&&k?"bg-green-600 hover:bg-green-700":"bg-gray-500 cursor-not-allowed"} text-primary rounded`,children:"Add API App Node"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"menu-section",children:[r.jsx("h4",{className:"text-primary font-medium mb-3",children:"string"===f?"String Primitive":"Number Primitive"}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-gray-300 text-sm mb-1",children:"Type"}),r.jsxs("select",{value:f,onChange:e=>g(e.target.value),className:"w-full px-2 py-1 bg-[#1A202C] border border-[#4A5568] rounded text-primary",children:[r.jsx("option",{value:"string",children:"String"}),r.jsx("option",{value:"number",children:"Number"})]})]}),"string"===f?r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-gray-300 text-sm mb-1",children:"Value"}),r.jsx("input",{type:"text",value:m,onChange:e=>x(e.target.value),className:"w-full px-2 py-1 bg-[#1A202C] border border-[#4A5568] rounded text-primary",placeholder:"Enter string value"})]}):r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-gray-300 text-sm mb-1",children:"Value"}),r.jsx("input",{type:"number",value:y,onChange:e=>v(Number(e.target.value)),className:"w-full px-2 py-1 bg-[#1A202C] border border-[#4A5568] rounded text-primary"})]}),r.jsxs("button",{onClick:"string"===f?W:F,className:"mt-2 w-full px-3 py-1 bg-purple-600 hover:bg-purple-700 text-primary rounded",children:["Add ","string"===f?"String":"Number"," Primitive"]})]}),r.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-600",children:[r.jsx("h4",{className:"text-primary font-medium mb-3",children:"Type Converter"}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-gray-300 text-sm mb-1",children:"Input Type"}),r.jsxs("select",{value:_,onChange:e=>P(e.target.value),className:"w-full px-2 py-1 bg-[#1A202C] border border-[#4A5568] rounded text-primary",children:[r.jsx("option",{value:"string",children:"String"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Boolean"}),r.jsx("option",{value:"object",children:"Object"}),r.jsx("option",{value:"array",children:"Array"})]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-gray-300 text-sm mb-1",children:"Output Type"}),r.jsxs("select",{value:j,onChange:e=>A(e.target.value),className:"w-full px-2 py-1 bg-[#1A202C] border border-[#4A5568] rounded text-primary",children:[r.jsx("option",{value:"string",children:"String"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Boolean"}),r.jsx("option",{value:"object",children:"Object"}),r.jsx("option",{value:"array",children:"Array"})]})]}),r.jsx("button",{onClick:K,className:"w-full px-3 py-1 bg-purple-600 hover:bg-purple-700 text-primary rounded",children:"Add Type Converter"})]})]}),"primitive"!==p&&r.jsx("div",{className:"menu-section mt-4",children:r.jsx("button",{onClick:()=>{const t={id:`begin-workflow-${Date.now()}`,type:"beginWorkflow",position:{x:300*Math.random()+50,y:300*Math.random()+50},data:{label:"Begin Workflow",executionInputs:[],executionOutputs:[T]}};e(t),i(!1)},disabled:t,className:`menu-button w-full px-3 py-1 ${t?"bg-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-primary rounded`,children:"Begin Workflow"})})]}):r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>{i(!0),h("basic")},className:"px-4 py-2 text-white rounded-md shadow-lg transition-all",style:{background:"linear-gradient(to bottom, #0ea5e9, #0284c7)",border:"1px solid #0369a1",textShadow:"0 1px 2px rgba(0,0,0,0.8)",boxShadow:"\n                inset 0 1px 0 rgba(255,255,255,0.3),\n                inset 0 -1px 0 rgba(0,0,0,0.3),\n                0 2px 4px rgba(0,0,0,0.3)\n              "},children:"Add REST API Node"}),r.jsx("button",{onClick:()=>{i(!0),h("app")},className:"px-4 py-2 text-white rounded-md shadow-lg transition-all",style:{background:"linear-gradient(to bottom, #16a34a, #15803d)",border:"1px solid #166534",textShadow:"0 1px 2px rgba(0,0,0,0.8)",boxShadow:"\n                inset 0 1px 0 rgba(255,255,255,0.3),\n                inset 0 -1px 0 rgba(0,0,0,0.3),\n                0 2px 4px rgba(0,0,0,0.3)\n              "},children:"Add App API Node"}),r.jsx("button",{onClick:()=>{i(!0),h("primitive")},className:"px-4 py-2 text-white rounded-md shadow-lg transition-all",style:{background:"linear-gradient(to bottom, #8B5CF6, #7C3AED)",border:"1px solid #6D28D9",textShadow:"0 1px 2px rgba(0,0,0,0.8)",boxShadow:"\n                inset 0 1px 0 rgba(255,255,255,0.3),\n                inset 0 -1px 0 rgba(0,0,0,0.3),\n                0 2px 4px rgba(0,0,0,0.3)\n              "},children:"Add Primitive"})]})})},ic=({className:e="",gridSize:t=20,gridOpacity:n=.08,textureOpacity:o=.02,textureSize:i=100})=>r.jsx("div",{className:`relative overflow-hidden ${e}`,style:{background:"linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%)",boxShadow:"inset 0 0 100px rgba(0,0,0,0.3)"},children:r.jsx("div",{className:"absolute inset-0",style:{opacity:.3,backgroundImage:`\n            linear-gradient(rgba(255,255,255,${n}) 1px, transparent 1px),\n            linear-gradient(90deg, rgba(255,255,255,${n}) 1px, transparent 1px),\n            radial-gradient(circle at 50% 50%, rgba(255,255,255,${o}) 0%, transparent 70%)\n          `,backgroundSize:`${t}px ${t}px, ${t}px ${t}px, ${i}px ${i}px`}})}),rc=()=>r.jsx("div",{className:"w-full h-screen",children:r.jsx(ic,{className:"w-full h-full",children:r.jsx("div",{className:"relative z-10 flex items-center justify-center h-full",children:r.jsx("div",{className:"text-white text-2xl font-bold",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:"Skeumorphic Grid Background"})})})}),ac=[],sc=[],lc=()=>{const e=l();n.useEffect((()=>{Bl.getInstance().setApiContext(e)}),[e]);const t=n.useRef({currentNodeId:"",variables:{},results:{},getVariable:function(e){return this.variables[e]},addVariable:function(e,t){this.variables[e]=t},addNodeScopedVariable:function(e,t,n){const o=`${e}:${t}`;this.variables[o]=n},getNodeScopedVariable:function(e,t){const n=`${e}:${t}`;return this.variables[n]},setResult:function(e,t){this.results[e]=t},getResult:function(e){return this.results[e]}}),[o,i,a]=function(e){const[t,o]=n.useState(e),i=n.useCallback((e=>o((t=>wa(e,t)))),[]);return[t,o,i]}(ac),[s,c,d]=function(e){const[t,o]=n.useState(e),i=n.useCallback((e=>o((t=>Sa(e,t)))),[]);return[t,o,i]}(sc),[u,p]=n.useState(!1),[h,f]=n.useState(null),[g,m]=n.useState(null),[x,y]=n.useState({}),{getNodes:v,getEdges:b}=Oa(),[w,S]=n.useState({width:0,height:0}),N=n.useRef(null),[C,E]=n.useState(!1),[k,M]=n.useState(!1);n.useEffect((()=>{N.current&&S({width:N.current.offsetWidth,height:N.current.offsetHeight});const e=()=>{N.current&&S({width:N.current.offsetWidth,height:N.current.offsetHeight})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),n.useEffect((()=>{var e,t;if(0===o.length){const n={id:`exec-out-${Date.now()}`,type:"execution",label:"Next",acceptsMultipleConnections:!0},o=(null==(e=N.current)?void 0:e.offsetWidth)||1e3,r=(null==(t=N.current)?void 0:t.offsetHeight)||800,a={id:`begin-workflow-${Date.now()}`,type:"beginWorkflow",position:{x:o/2-90,y:r/2-50},data:{label:"Begin Workflow",executionInputs:[],executionOutputs:[n]}};i([a])}}),[w,o.length,i]);const _=n.useCallback((e=>{Vl(e,v(),b())&&c((t=>vi(e,t)))}),[c,v,b]),[P,j]=n.useState(null),[A,I]=n.useState(null),D=n.useCallback(((e,t)=>{j(t.id),I(null)}),[]),O=n.useCallback(((e,t)=>{I(t.id),j(null)}),[]),z=n.useCallback((e=>{c((t=>t.filter((t=>t.id!==e))))}),[c]),$=n.useCallback((e=>{i((t=>[...t,e]))}),[i]),R=n.useCallback((e=>{i((t=>t.filter((t=>t.id!==e)))),c((t=>t.filter((t=>t.source!==e&&t.target!==e))))}),[i,c]),V=n.useCallback((e=>{"Delete"!==e.key&&"Backspace"!==e.key||(P?(R(P),j(null)):A&&(z(A),I(null)))}),[P,A,R,z]),T=n.useCallback((()=>{const e=o.filter((e=>"beginWorkflow"===e.type));return e.length>0?e[0]:null}),[o]);n.useCallback((e=>s.filter((t=>{var n;return t.source===e&&(null==(n=t.sourceHandle)?void 0:n.includes("exec"))})).map((e=>o.find((t=>t.id===e.target)))).filter((e=>!!e))),[o,s]);const B=n.useCallback((()=>o.some((e=>"beginWorkflow"===e.type))),[o]);return r.jsx("div",{className:"flex flex-col h-full w-full blueprints",style:{height:"100%"},tabIndex:0,onKeyDown:V,ref:N,children:r.jsxs("div",{className:"flow-container h-full w-full relative overflow-hidden",children:[r.jsx(oc,{onAddNode:$,hasBeginWorkflowNode:B()}),r.jsxs("div",{className:"flow-controls absolute top-4 right-4 z-10 flex gap-2",children:[r.jsx("button",{onClick:()=>E(!C),className:"px-4 py-2 text-white rounded-md shadow-lg transition-all",style:{background:C?"linear-gradient(to bottom, #3b82f6, #2563eb)":"linear-gradient(to bottom, #6b7280, #4b5563)",border:"1px solid #1a1a1a",textShadow:"0 1px 2px rgba(0,0,0,0.8)",boxShadow:"\n                inset 0 1px 0 rgba(255,255,255,0.3),\n                inset 0 -1px 0 rgba(0,0,0,0.3),\n                0 2px 4px rgba(0,0,0,0.3)\n              ",cursor:"pointer"},children:"Snap to Grid"}),r.jsx("button",{onClick:()=>M(!k),className:"px-4 py-2 text-white rounded-md shadow-lg transition-all",style:{background:k?"linear-gradient(to bottom, #3b82f6, #2563eb)":"linear-gradient(to bottom, #6b7280, #4b5563)",border:"1px solid #1a1a1a",textShadow:"0 1px 2px rgba(0,0,0,0.8)",boxShadow:"\n                inset 0 1px 0 rgba(255,255,255,0.3),\n                inset 0 -1px 0 rgba(0,0,0,0.3),\n                0 2px 4px rgba(0,0,0,0.3)\n              ",cursor:"pointer"},children:"Minimap"}),r.jsx("button",{onClick:async()=>{const e=T();if(e)try{p(!0),f(e.id),t.current.variables={},t.current.results={},y({});const n=nc.getInstance();await n.executeWorkflow(e.id,o,s,t.current)}catch(n){m(n instanceof Error?n.message:"An unknown error occurred during workflow execution.")}finally{p(!1),f(null)}else m("Unable to find a suitable starting node.")},disabled:u,className:"px-4 py-2 text-white rounded-md shadow-lg transition-all",style:{background:u?"linear-gradient(to bottom, #6b7280, #4b5563)":"linear-gradient(to bottom, #16a34a, #15803d)",border:"1px solid #166534",textShadow:"0 1px 2px rgba(0,0,0,0.8)",boxShadow:"\n                inset 0 1px 0 rgba(255,255,255,0.3),\n                inset 0 -1px 0 rgba(0,0,0,0.3),\n                0 2px 4px rgba(0,0,0,0.3)\n              ",opacity:u?.5:1,cursor:u?"not-allowed":"pointer"},children:u?"Executing...":"Execute Workflow"})]}),h&&r.jsxs("div",{className:"execution-indicator absolute bottom-4 right-4 z-10 text-white px-4 py-2 rounded-md shadow-lg",style:{background:"linear-gradient(to bottom, #0ea5e9, #0284c7)",border:"2px solid #1a1a1a",boxShadow:"\n                inset 0 1px 0 rgba(255,255,255,0.2),\n                inset 0 -1px 0 rgba(0,0,0,0.3),\n                inset 1px 0 0 rgba(255,255,255,0.1),\n                inset -1px 0 0 rgba(0,0,0,0.2),\n                0 4px 8px rgba(0,0,0,0.4)\n              ",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:["Executing node: ",h]}),g&&r.jsxs("div",{className:"execution-error absolute bottom-4 left-4 z-10 text-white p-4 max-w-md rounded-md shadow-lg",style:{background:"linear-gradient(to bottom, #dc2626, #b91c1c)",border:"2px solid #1a1a1a",boxShadow:"\n                inset 0 1px 0 rgba(255,255,255,0.2),\n                inset 0 -1px 0 rgba(0,0,0,0.3),\n                inset 1px 0 0 rgba(255,255,255,0.1),\n                inset -1px 0 0 rgba(0,0,0,0.2),\n                0 4px 8px rgba(0,0,0,0.4)\n              ",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:[r.jsx("h3",{className:"font-bold mb-2",children:"Execution Error"}),r.jsx("div",{className:"text-sm",children:g}),r.jsx("button",{onClick:()=>m(null),className:"absolute top-1 right-1 text-red-200 hover:text-white",children:"✕"})]}),r.jsx(fl,{nodes:o,edges:s,onNodesChange:a,onEdgesChange:d,onConnect:_,onNodeClick:D,onEdgeClick:O,nodeTypes:Jl,edgeTypes:ec,connectionMode:lo.Loose,defaultViewport:{x:0,y:0,zoom:1},minZoom:.2,maxZoom:4,panOnScroll:!0,panOnScrollMode:uo.Free,selectionOnDrag:!0,proOptions:{hideAttribution:!0},className:"h-full w-full",deleteKeyCode:["Backspace","Delete"],defaultEdgeOptions:{type:"custom",markerEnd:{type:yo.ArrowClosed,color:"white",width:20,height:20},style:{strokeWidth:2},animated:!0},fitView:!1,snapToGrid:C,snapGrid:[20,20],edgesFocusable:!0,selectNodesOnDrag:!1,children:r.jsx(rc,{className:"absolute inset-0"})}),r.jsx("div",{className:"controls-wrapper absolute bottom-4 left-4 z-20",children:r.jsx(_l,{className:"rounded-md",style:{background:"linear-gradient(to bottom, #4a4a4a, #2a2a2a)",border:"2px solid #1a1a1a",boxShadow:"\n                inset 0 1px 0 rgba(255,255,255,0.2),\n                inset 0 -1px 0 rgba(0,0,0,0.3),\n                inset 1px 0 0 rgba(255,255,255,0.1),\n                inset -1px 0 0 rgba(0,0,0,0.2),\n                0 4px 8px rgba(0,0,0,0.4)\n              "},showInteractive:!0,showZoom:!0,showFitView:!0})}),k&&r.jsx("div",{className:"minimap-wrapper absolute bottom-4 right-4 z-20",children:r.jsx(Rl,{nodeColor:e=>e.selected?"#ffff00":"#6b7280",maskColor:"rgba(26, 26, 26, 0.8)",className:"rounded-md",style:{background:"linear-gradient(to bottom, #4a4a4a, #2a2a2a)",border:"2px solid #1a1a1a",boxShadow:"\n                  inset 0 1px 0 rgba(255,255,255,0.2),\n                  inset 0 -1px 0 rgba(0,0,0,0.3),\n                  inset 1px 0 0 rgba(255,255,255,0.1),\n                  inset -1px 0 0 rgba(0,0,0,0.2),\n                  0 4px 8px rgba(0,0,0,0.4)\n                "},zoomable:!0,pannable:!0})})]})})},cc=()=>r.jsx(cl,{children:r.jsx(lc,{})}),dc=()=>r.jsx("div",{className:"h-full w-full overflow-hidden",children:r.jsx(cc,{})}),uc=()=>{const[e,t]=n.useState(!1);return n.useEffect((()=>()=>{}),[]),r.jsxs("div",{className:"blueprints h-full flex flex-col bg-[#1A1F2C] text-gray-200",children:[e&&r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-[#2D3748] rounded-lg p-6 max-w-2xl shadow-xl border border-[#4A5568]",children:[r.jsx("h2",{className:"text-xl font-bold text-primary mb-4",children:"API Flow Editor Help"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"Getting Started"}),r.jsxs("ul",{className:"list-disc pl-5 text-gray-300",children:[r.jsx("li",{className:"mb-1",children:'Click "Add API Node" to create a new node'}),r.jsx("li",{className:"mb-1",children:"Drag from a pin to connect nodes"}),r.jsx("li",{className:"mb-1",children:"Execution pins (white boxes) control flow"}),r.jsx("li",{className:"mb-1",children:"Input pins (left) accept data"}),r.jsx("li",{className:"mb-1",children:"Output pins (right) provide data"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-2",children:"Keyboard Shortcuts"}),r.jsxs("ul",{className:"grid grid-cols-2 gap-2 text-gray-300",children:[r.jsxs("li",{className:"mb-1",children:[r.jsx("span",{className:"text-primary font-mono",children:"Delete"}),": Remove selected node"]}),r.jsxs("li",{className:"mb-1",children:[r.jsx("span",{className:"text-primary font-mono",children:"Drag + Shift"}),": Select multiple nodes"]}),r.jsxs("li",{className:"mb-1",children:[r.jsx("span",{className:"text-primary font-mono",children:"Mousewheel"}),": Zoom in/out"]}),r.jsxs("li",{className:"mb-1",children:[r.jsx("span",{className:"text-primary font-mono",children:"Space + Drag"}),": Pan canvas"]})]})]}),r.jsx("button",{className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-primary rounded",onClick:()=>t(!1),children:"Close Help"})]})}),r.jsx("div",{className:"flex-grow overflow-hidden h-full",children:r.jsx(dc,{})})]})},pc={id:c.id,manifest:c,init:async()=>{},onOpen:()=>{},onClose:()=>{},render:()=>r.jsx(uc,{})};export{pc as default};
