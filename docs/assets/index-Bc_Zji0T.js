import{a as N,r as i,f as w,j as e,o as Z,w as be,n as je,l as G,v as ve,W as v,Q as H,T as Y,U as J,Y as X,Z as Q,_ as q,$ as we,a0 as ye,a1 as Ne,h as D,e as ke,a2 as Ce}from"./index-BoaiU1Cn.js";import{N as Se,O as Ie,Q as Te,S as Pe,U as Ee,V as z,u as K,X as Ae,Y as V}from"./MacroContext-0Kk54l6e.js";import{L as S}from"./label-BbbtUrKI.js";import"./monaco-editor-Dq6WuQlL.js";function Be({options:t,name:n,value:o,onChange:a,className:r,legend:x,fieldset:d=!0}){const{theme:m}=N(),u=m==="win98";i.useEffect(()=>{if(!u)return;const h="win98-fieldset-style";if(!document.getElementById(h)){const f=document.createElement("style");f.id=h;const c="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNSIgaGVpZ2h0PSI1IiB2aWV3Qm94PSIwIDAgNSA1IiBmaWxsPSJncmV5IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTAgMEg1VjVIMFYySDJWM0gzVjJIMCIgZmlsbD0id2hpdGUiIC8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCAwSDRWNEgwVjFIMVYzSDNWMUgwIiBmaWxsPSIjODA4MDgwIiAvPgo8L3N2Zz4=";f.textContent=`
        .win98-fieldset {
          border-image: url("${c}") 2;
          padding: calc(2 * var(--border-width, 1px) + var(--element-spacing, 8px));
          padding-block-start: var(--element-spacing, 8px);
          margin: 0;
          border-width: 2px;
          border-style: solid;
          border-color: transparent;
        }
      `,document.head.appendChild(f)}return()=>{}},[u]);const p=u?w("mb-4",r):w("mb-4 space-y-2",r);return d?e.jsxs("fieldset",{className:u?w("win98-fieldset",r):p,children:[x&&e.jsx("legend",{children:x}),t.map(({id:h,label:f,value:c})=>e.jsxs("div",{className:"field-row",children:[e.jsx("input",{id:h,type:"radio",name:n,value:c,checked:o===c,onChange:()=>a(c)}),e.jsx("label",{htmlFor:h,children:f})]},h))]}):e.jsx("div",{className:p,children:t.map(({id:h,label:f,value:c})=>e.jsxs("div",{className:"field-row",children:[e.jsx("input",{id:h,type:"radio",name:n,value:c,checked:o===c,onChange:()=>a(c)}),e.jsx("label",{htmlFor:h,children:f})]},h))})}var _="Switch",[De,ts]=je(_),[We,Ue]=De(_),ee=i.forwardRef((t,n)=>{const{__scopeSwitch:o,name:a,checked:r,defaultChecked:x,required:d,disabled:m,value:u="on",onCheckedChange:p,form:h,...f}=t,[c,l]=i.useState(null),I=Z(n,P=>l(P)),k=i.useRef(!1),E=c?h||!!c.closest("form"):!0,[C,T]=be({prop:r,defaultProp:x??!1,onChange:p,caller:_});return e.jsxs(We,{scope:o,checked:C,disabled:m,children:[e.jsx(G.button,{type:"button",role:"switch","aria-checked":C,"aria-required":d,"data-state":ne(C),"data-disabled":m?"":void 0,disabled:m,value:u,...f,ref:I,onClick:ve(t.onClick,P=>{T(B=>!B),E&&(k.current=P.isPropagationStopped(),k.current||P.stopPropagation())})}),E&&e.jsx(ae,{control:c,bubbles:!k.current,name:a,value:u,checked:C,required:d,disabled:m,form:h,style:{transform:"translateX(-100%)"}})]})});ee.displayName=_;var se="SwitchThumb",te=i.forwardRef((t,n)=>{const{__scopeSwitch:o,...a}=t,r=Ue(se,o);return e.jsx(G.span,{"data-state":ne(r.checked),"data-disabled":r.disabled?"":void 0,...a,ref:n})});te.displayName=se;var Me="SwitchBubbleInput",ae=i.forwardRef(({__scopeSwitch:t,control:n,checked:o,bubbles:a=!0,...r},x)=>{const d=i.useRef(null),m=Z(d,x),u=Se(o),p=Ie(n);return i.useEffect(()=>{const h=d.current;if(!h)return;const f=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==o&&l){const I=new Event("click",{bubbles:a});l.call(h,o),h.dispatchEvent(I)}},[u,o,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o,...r,tabIndex:-1,ref:m,style:{...r.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ae.displayName=Me;function ne(t){return t?"checked":"unchecked"}var Re=ee,Fe=te;function W({className:t,label:n,id:o,...a}){const{theme:r}=N(),x=i.useId(),d=o||x;return r==="win98"?e.jsxs("div",{className:w("flex items-center",t),children:[e.jsx("input",{type:"checkbox",id:d,className:"checkbox",checked:a.checked,defaultChecked:a.defaultChecked,onChange:m=>{var u;return(u=a.onCheckedChange)==null?void 0:u.call(a,m.target.checked)},disabled:a.disabled}),n&&e.jsx("label",{htmlFor:d,className:"ml-2 text-sm",children:n})]}):e.jsxs("div",{className:w("flex items-center",t),children:[e.jsx(Re,{id:d,className:w(r==="winxp"?"rounded border border-gray-400 bg-gray-200 w-10 h-5 relative":"inline-flex h-[24px] w-[44px] shrink-0 cursor-default items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...a,children:e.jsx(Fe,{className:w(r==="winxp"?"block w-4 h-4 rounded bg-white border border-gray-400 shadow-sm transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0":"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}),n&&e.jsx("label",{htmlFor:d,className:"ml-2 text-sm",children:n})]})}W.displayName="WindowsSwitch";const _e=Te,re=i.forwardRef(({className:t,children:n,...o},a)=>{const{theme:r}=N();return e.jsx(Pe,{ref:a,asChild:!0,...o,children:e.jsx("menu",{role:"tablist",className:w(r==="winxp"&&"xp-tabs",r==="win7"&&"tabs",t),children:n})})});re.displayName="WinTabsList";const U=i.forwardRef(({children:t,className:n,...o},a)=>{const{theme:r}=N();return e.jsx(Ee,{ref:a,asChild:!0,...o,children:r==="win98"?e.jsx("button",{className:w(n),children:t}):e.jsx("button",{className:w(r==="winxp"&&"xp-tab",r==="win7"&&"tab",n),children:t})})});U.displayName="WinTabsTrigger";const M=i.forwardRef(({children:t,className:n,...o},a)=>{const{theme:r}=N();return r==="win98"?e.jsx(z,{ref:a,asChild:!0,...o,children:e.jsx("div",{className:"window",role:"tabpanel",children:e.jsx("div",{className:"window-body",children:t})})}):e.jsx(z,{ref:a,className:n,...o,children:t})});M.displayName="WinTabsContent";const O=i.forwardRef(({className:t,orientation:n="horizontal",style:o,...a},r)=>{const{theme:x}=N(),d=n==="vertical",m=w(d?"is-vertical inline-block px-[16px]":"inline-block",t),u=w("appearance-none",d?"h-full w-5":"w-full h-5"),p=d?{orient:"vertical"}:{};return e.jsx("div",{className:m,style:o,children:e.jsx("input",{ref:r,type:"range",className:u,...p,...a})})});O.displayName="WindowSlider";const Oe=()=>{const{getDynamicPlugins:t,uninstallPlugin:n}=K(),o=t(),[a,r]=i.useState(!1),[x,d]=i.useState(null),[m,u]=i.useState(!1),[p,h]=i.useState(null);if(o.length===0)return e.jsxs("div",{className:"border rounded-md p-4 mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Installed Plugins"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No third-party plugins are currently installed."})]});const f=l=>{d(l),r(!0),h(null)},c=async()=>{if(x){u(!0);try{await n(x),r(!1)}catch(l){h(l instanceof Error?l.message:"Failed to uninstall plugin")}finally{u(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border rounded-md p-4 mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Installed Plugins"}),p&&e.jsx("div",{className:"bg-red-100 text-red-800 p-2 rounded mb-4 text-sm",children:p}),e.jsx("div",{className:"divide-y",children:o.map(l=>e.jsxs("div",{className:"py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 mr-3 flex-shrink-0",children:l.manifest.icon}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium",children:l.manifest.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["v",l.manifest.version," • ",l.manifest.author]})]})]})," ",e.jsx(v,{variant:"outline",size:"sm",onClick:()=>f(l.id),children:"Uninstall"})]},l.id))})]}),e.jsx(H,{open:a,onOpenChange:r,children:e.jsxs(Y,{children:[e.jsxs(J,{children:[e.jsx(X,{children:"Uninstall Plugin"}),e.jsxs(Q,{children:["Are you sure you want to uninstall this plugin? This will remove it completely from your system.",p&&e.jsx("div",{className:"bg-red-100 text-red-800 p-2 rounded mt-4 text-sm",children:p})]})]}),e.jsxs(q,{children:[e.jsx(we,{disabled:m,children:"Cancel"}),e.jsx(ye,{onClick:c,disabled:m,className:m?"opacity-50 cursor-not-allowed":"",children:m?"Uninstalling...":"Uninstall"})]})]})})]})},Le=({onClose:t})=>{const[n,o]=i.useState(""),[a,r]=i.useState(!1),[x,d]=i.useState(null),[m,u]=i.useState(null),{installRemoteApp:p}=K(),h=async f=>{f.preventDefault(),r(!0),d(null),u(null);try{if(!n.trim())throw new Error("Please enter a valid URL");await p(n),u("Plugin installed successfully!"),o(""),setTimeout(()=>{t()},1500)}catch(c){d(c instanceof Error?c.message:"Failed to install plugin")}finally{r(!1)}};return e.jsxs("div",{className:"plugin-installer",children:[e.jsxs("div",{className:"plugin-installer-header",children:[e.jsx("h2",{children:"Install Remote Plugin"}),e.jsx("button",{onClick:t,className:"close-button",children:"×"})]}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"plugin-url",children:"Plugin Manifest URL:"}),e.jsx("input",{type:"url",id:"plugin-url",value:n,onChange:f=>o(f.target.value),placeholder:"https://example.com/plugin-manifest.json",disabled:a,className:"url-input"})]}),x&&e.jsx("div",{className:"error-message",children:x}),m&&e.jsx("div",{className:"success-message",children:m}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:t,disabled:a,className:"cancel-button",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a||!n.trim(),className:"install-button",children:a?"Installing...":"Install Plugin"})]})]}),e.jsx("div",{className:"plugin-installer-info",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," Only install plugins from trusted sources. Third-party plugins have full access to the app and may contain malicious code."]})})]})},$e=()=>{const[t,n]=i.useState("cool-theme"),[o,a]=i.useState(!1),{loadTheme:r}=N(),x=async()=>{if(t.trim()){a(!0);try{const d=`/themes/${t}/manifest.json`;console.log(`Installing theme from: ${d}`);const m=await Ne(d);if(m.success){D.success(`Theme '${t}' installed successfully`);try{await r(t),D.success(`Theme '${t}' activated`)}catch(u){console.error("Error loading theme:",u),D.error("Theme installed but failed to activate")}}else D.error(m.error||"Failed to install theme")}catch(d){console.error("Error:",d),D.error(d instanceof Error?d.message:"Unknown error")}finally{a(!1)}}};return e.jsxs("div",{className:"p-4 border rounded-md mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Install Local Theme"}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:t,onChange:d=>n(d.target.value),className:"w-full p-2 border rounded",placeholder:"Theme ID (folder name)"})}),e.jsx("button",{onClick:x,disabled:o||!t.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded disabled:bg-gray-300",children:o?"Installing...":"Install"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enter the ID of a theme in the public/themes directory"})]})},ze=({onInstall:t,onCancel:n})=>{const[o,a]=i.useState(""),[r,x]=i.useState(!1),[d,m]=i.useState(null),[u,p]=i.useState(null),{installTheme:h}=N(),f=async c=>{c.preventDefault(),x(!0),m(null),p(null);try{if(!o.trim())throw new Error("Please enter a valid URL");const l=await h(o);l.success?(p("Theme installed successfully!"),a(""),setTimeout(()=>{t==null||t()},1500)):m(l.error||"Failed to install theme. The manifest may be invalid.")}catch(l){m(l instanceof Error?l.message:"Failed to install theme")}finally{x(!1)}};return e.jsxs("div",{className:"theme-installer border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-black dark:text-white p-4 rounded-lg shadow-lg w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-2 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Install Theme"}),e.jsx("button",{onClick:n,className:"text-muted-foreground hover:text-foreground","aria-label":"Close",children:"×"})]}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"theme-url",className:"block text-sm font-medium text-foreground mb-1",children:"Theme Manifest URL:"}),e.jsx("input",{type:"url",id:"theme-url",value:o,onChange:c=>a(c.target.value),placeholder:"https://example.com/theme-manifest.json",disabled:r,className:"w-full p-2 bg-background border border-border rounded-md text-foreground"})]}),d&&e.jsx("div",{className:"p-2 mb-4 bg-destructive/10 text-destructive rounded-md text-sm",children:d}),u&&e.jsx("div",{className:"p-2 mb-4 bg-green-100 text-green-800 rounded-md text-sm",children:u}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:n,disabled:r,className:"px-3 py-1.5 border border-border rounded-md text-foreground",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r||!o.trim(),className:"px-3 py-1.5 bg-primary text-primary-foreground rounded-md disabled:opacity-50",children:r?"Installing...":"Install Theme"})]})]}),e.jsx("div",{className:"mt-4 p-2 text-xs text-muted-foreground bg-muted rounded-md",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," Only install themes from trusted sources. External themes might include JavaScript that runs in your browser."]})})]})},Ve="_themeButton_1w961_3",Ze="_themeActivateButton_1w961_27",Ge="_removeButton_1w961_43",He="_themeCard_1w961_95",Ye="_themeButtonsContainer_1w961_109",y={themeButton:Ve,themeActivateButton:Ze,removeButton:Ge,themeCard:He,themeButtonsContainer:Ye},Je=()=>{const{themes:t,theme:n,setTheme:o,loadTheme:a,installTheme:r,uninstallTheme:x}=N(),[d,m]=i.useState(!1),[u,p]=i.useState(null),[h,f]=i.useState(!1),[c,l]=i.useState(null),[I,k]=i.useState(!1),E=async()=>{l(null);try{const s=await r("/themes/win7/manifest.json");if(!s.success){l(s.error||"Failed to install Windows 7 theme");return}setTimeout(async()=>{await a("win7")||l("Failed to activate Windows 7 theme after install")},100)}catch(s){l(s instanceof Error?s.message:"Error installing Windows 7 theme")}},C=Object.entries(t).filter(([s])=>s==="light"||s==="dark"||s==="beos"||s==="macos"||s==="windows"||s==="fluxbox"),T=Object.entries(t).filter(([s])=>s!=="light"&&s!=="dark"&&s!=="beos"&&s!=="macos"&&s!=="windows"&&s!=="fluxbox"),P=s=>{p(s),m(!0),l(null)},B=async()=>{if(u){f(!0);try{if(n===u&&await a("light"),!await x(u))throw new Error(`Failed to uninstall theme: ${u}`);m(!1)}catch(s){l(s instanceof Error?s.message:"Failed to uninstall theme")}finally{f(!1)}}};return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Themes"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{onClick:E,variant:"default",className:y.themeButton,children:"Install Windows 7"}),e.jsx(v,{onClick:()=>k(!0),variant:"outline",className:y.themeButton,children:"Install Theme"})]})]}),c&&e.jsx("div",{className:"bg-red-100 text-red-800 p-2 rounded mb-4 text-sm",children:c}),C.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Built-in Themes"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:C.map(([s,b])=>e.jsxs("div",{className:y.themeCard,style:{border:"2px solid var(--wm-border-color)",background:n===s?"var(--theme-card-active-bg, #e6f0ff)":"var(--background, #fff)",boxShadow:n===s?"0 0 0 2px var(--accent, #4096e3)":void 0,transition:"box-shadow 0.2s",cursor:n===s?"default":"pointer"},onClick:async()=>{if(n!==s){l(null);try{await a(s)||l(`Failed to load theme: ${s}`)}catch{l(`Error loading theme: ${s}`)}}},children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"font-semibold text-base mr-2",children:b.name||s}),n===s&&e.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-800",children:"Active"})]}),e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:b.description||""}),e.jsx("div",{className:y.themeButtonsContainer,children:n!==s&&e.jsx(v,{variant:"default",className:y.themeActivateButton,onClick:async j=>{j.stopPropagation(),l(null);try{await a(s)||l(`Failed to load theme: ${s}`)}catch{l(`Error loading theme: ${s}`)}},children:"Activate"})})]},s))})]}),T.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Installed Themes"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:T.map(([s,b])=>e.jsxs("div",{className:y.themeCard,style:{border:"2px solid var(--wm-border-color)",background:n===s?"var(--theme-card-active-bg, #e6f0ff)":"var(--background, #fff)",boxShadow:n===s?"0 0 0 2px var(--accent, #4096e3)":void 0,transition:"box-shadow 0.2s"},children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"font-semibold text-base mr-2",children:b.name||s}),n===s&&e.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-800",children:"Active"})]}),e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:b.description||""}),e.jsxs("div",{className:y.themeButtonsContainer,children:[n!==s&&e.jsx(v,{variant:"default",className:y.themeActivateButton,onClick:async()=>{l(null);try{await a(s)||l(`Failed to load theme: ${s}`)}catch{l(`Error loading theme: ${s}`)}},children:"Activate"}),e.jsx(v,{variant:"ghost",className:y.removeButton,onClick:()=>P(s),title:"Uninstall Theme",children:"Uninstall"})]}),b.author&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["By: ",b.author]})]},s))})]}),T.length===0&&e.jsx("div",{className:"border rounded-md p-4 mb-4",style:{borderColor:"var(--wm-border-color)"},children:e.jsx("span",{className:"text-muted-foreground text-sm",children:"No third-party themes are currently installed."})}),e.jsx($e,{}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-sm border",style:{borderColor:"var(--wm-border-color)"},children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Uninstall Theme"}),e.jsx("p",{className:"mb-4 text-sm",children:"Are you sure you want to uninstall this theme? This will remove it from your system."}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(v,{onClick:()=>m(!1),disabled:h,variant:"outline",className:y.themeButton,children:"Cancel"}),e.jsx(v,{onClick:B,disabled:h,variant:"destructive",className:y.themeButton,children:h?"Uninstalling...":"Uninstall"})]})]})}),I&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:e.jsx("div",{className:"w-full max-w-lg",children:e.jsx(ze,{onInstall:()=>{k(!1)},onCancel:()=>k(!1)})})})]})};function Xe(t=!1){localStorage.removeItem("desktop-window-state"),localStorage.removeItem(Ae),localStorage.removeItem("show-desktop-icons"),localStorage.removeItem("taskbar-autohide"),localStorage.removeItem("enable-animations"),localStorage.removeItem("os-theme"),localStorage.removeItem("window-content-padding"),localStorage.removeItem("os-wallpaper"),localStorage.removeItem("os-background-color"),localStorage.removeItem("os-primary-color"),window.history.replaceState({},document.title,window.location.pathname),ke.getState().reset(),t&&window.location.reload()}const Qe=()=>{const{theme:t,setTheme:n,themes:o,padding:a,setPadding:r,wallpaper:x,setWallpaper:d,backgroundColor:m,setBackgroundColor:u,primaryColor:p,setPrimaryColor:h,loadTheme:f}=N(),{isMobile:c,isEnforced:l,enforcedMode:I,enforceDesktopMode:k,enforceSmartphoneMode:E,disableEnforcedMode:C}=Ce(),[T,P]=i.useState(["/prometheos//wallpapers/background_01.avif","/prometheos//wallpapers/background_02.png"]),[B,s]=i.useState(!1),[b,j]=i.useState(null),[A,le]=i.useState(()=>localStorage.getItem("show-desktop-icons")!=="false"),[R,ie]=i.useState(()=>localStorage.getItem("taskbar-autohide")==="true"),[F,oe]=i.useState(()=>localStorage.getItem("enable-animations")!=="false"),de=[{name:"Indigo",value:"#3730A3"},{name:"Blue",value:"#1E40AF"},{name:"Cyan",value:"#155E75"},{name:"Teal",value:"#134E4A"},{name:"Green",value:"#166534"},{name:"Yellow",value:"#854D0E"},{name:"Orange",value:"#9A3412"},{name:"Red",value:"#991B1B"},{name:"Pink",value:"#9D174D"},{name:"Purple",value:"#6B21A8"},{name:"Gray",value:"#374151"},{name:"Slate",value:"#1E293B"}],[ce,L]=i.useState(!1);i.useEffect(()=>{localStorage.setItem("show-desktop-icons",A.toString()),localStorage.setItem("taskbar-autohide",R.toString()),localStorage.setItem("enable-animations",F.toString()),document.documentElement.style.setProperty("--desktop-icons-visibility",A?"visible":"hidden"),document.documentElement.style.setProperty("--taskbar-auto-hide",R?"true":"false"),document.documentElement.style.setProperty("--enable-animations",F?"true":"false"),document.documentElement.style.setProperty("--disable-windows-animations","true")},[A,R,F]);const $=g=>{r(g[0])},me=g=>{d(g)},ue=()=>{d(null)},he=()=>{b&&(b==="desktop"?k():b==="smartphone"?E():b==="disable"&&C(),j(null))},xe=g=>{g?(j(c?"smartphone":"desktop"),s(!0)):(j("disable"),s(!0))},pe=g=>{g==="desktop"&&!c||g==="smartphone"&&c||(j(g==="desktop"?"desktop":"smartphone"),s(!0))},ge=()=>b==="desktop"?"Switching to Desktop view will close all running applications and may disrupt your current workflow. Are you sure you want to continue?":b==="smartphone"?"Switching to Smartphone view will close all running applications and may disrupt your current workflow. Are you sure you want to continue?":"Disabling enforced view mode will revert to automatic detection based on screen size, which may change your current view and close all running applications. Are you sure you want to continue?";return e.jsxs("div",{className:"p-0",children:[e.jsx(H,{open:B,onOpenChange:s,children:e.jsxs(Y,{children:[e.jsxs(J,{children:[e.jsx(X,{children:"Change View Mode?"}),e.jsx(Q,{children:ge()})]})," ",e.jsxs(q,{children:[" ",e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(v,{variant:"outline",onClick:()=>j(null),children:"Cancel"}),e.jsx(v,{onClick:he,children:"Continue"})]})]})]})}),e.jsxs(_e,{defaultValue:"appearance",className:"w-full",children:[e.jsxs(re,{className:"mb-4",children:[e.jsx(U,{value:"appearance",children:"Appearance"}),e.jsx(U,{value:"display",children:"Display"}),e.jsx(U,{value:"plugins",children:"Plugins"}),e.jsx(U,{value:"about",children:"About"})]}),e.jsxs(M,{value:"appearance",className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Theme"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the visual style for your desktop environment"})]}),e.jsx(Je,{})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Window Padding"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Adjust the internal padding of window content"})]})," ",e.jsx(O,{id:"window-padding",defaultValue:a,onChange:g=>$([parseInt(g.target.value)]),min:0,max:24,step:4,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"None"}),e.jsx("span",{children:"Small"}),e.jsx("span",{children:"Medium"}),e.jsx("span",{children:"Large"}),e.jsx("span",{children:"Extra Large"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Changes to padding affect all windows"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Desktop Wallpaper"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customize your desktop background image"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 pt-2",children:[e.jsxs("div",{className:`relative group cursor-pointer ${x===null?"ring-2 ring-primary":""}`,onClick:ue,children:[e.jsx("div",{className:"rounded-md border border-border overflow-hidden aspect-video",children:e.jsx("div",{className:"h-full w-full",style:{background:m,borderColor:"var(--wm-border-color)"}})}),e.jsx("div",{className:"mt-1 text-xs text-center",children:"Solid Color"})]}),T.map((g,fe)=>e.jsxs("div",{className:`relative group cursor-pointer ${x===g?"ring-2 ring-primary":""}`,onClick:()=>me(g),children:[e.jsx("div",{className:"rounded-md border border-border overflow-hidden aspect-video",children:e.jsx("div",{className:"h-full w-full",style:{backgroundImage:`url(${g})`,backgroundSize:"cover",backgroundPosition:"center",borderColor:"var(--wm-border-color)"}})}),e.jsxs("div",{className:"mt-1 text-xs text-center",children:["Wallpaper ",fe+1]})]},g))]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Color Preferences"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customize the color scheme of your desktop"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Background Color"}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2 pt-1",children:de.map(g=>e.jsx("div",{className:`relative cursor-pointer ${m===g.value?"ring-2 ring-primary":""}`,onClick:()=>{d(null),u(g.value)},title:g.name,children:e.jsx("div",{className:"h-10 rounded-md",style:{backgroundColor:g.value}})},g.value))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a background color for Solid Color mode"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Primary Color"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{className:`h-12 rounded-md cursor-pointer border-2 border-transparent transition hover:border-primary ${p==="#a855f7"?"ring-2 ring-primary":""}`,style:{backgroundColor:"#a855f7"},onClick:()=>h("#a855f7"),title:"Purple"}),e.jsx("div",{className:`h-12 rounded-md cursor-pointer border-2 border-transparent transition hover:border-primary ${p==="#71717a"?"ring-2 ring-primary":""}`,style:{backgroundColor:"#71717a"},onClick:()=>h("#71717a"),title:"Gray"}),e.jsx("div",{className:`h-12 rounded-md cursor-pointer border-2 border-transparent transition hover:border-primary ${p==="#3b82f6"?"ring-2 ring-primary":""}`,style:{backgroundColor:"#3b82f6"},onClick:()=>h("#3b82f6"),title:"Blue"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t==="beos"?"Choose the color for focused window frames in BeOS theme":"Choose the primary accent color for the interface"})]})]})]}),e.jsxs(M,{value:"display",className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Desktop Preferences"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customize how your desktop appears and behaves"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`flex items-center justify-between ${c?"opacity-50":""}`,children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"show-desktop-icons",children:"Show desktop icons"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display application icons on the desktop"})]}),e.jsx(W,{id:"show-desktop-icons",checked:A,onCheckedChange:le,disabled:c,title:c?"This setting is only available in desktop mode":""})]}),e.jsxs("div",{className:`flex items-center justify-between ${c?"opacity-50":""}`,children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"taskbar-autohide",children:"Auto-hide taskbar"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Hide the taskbar when not in use"})]}),e.jsx(W,{id:"taskbar-autohide",checked:R,onCheckedChange:ie,disabled:c,title:c?"This setting is only available in desktop mode":""})]}),e.jsxs("div",{className:`flex items-center justify-between ${c?"opacity-50":""}`,children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"animations",children:"Enable animations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Show animations when opening and closing windows"})]}),e.jsx(W,{id:"animations",checked:F,onCheckedChange:oe,disabled:c,title:c?"This setting is only available in desktop mode":""})]})," ",["win98","winxp","win7"].includes(t)&&e.jsxs("div",{className:"border rounded p-3 bg-muted/30",style:{borderColor:"var(--wm-border-color)"},children:[e.jsx("p",{className:"text-sm font-medium",children:"Windows Animations"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Window animations are permanently disabled in Windows themes for better performance during resize and drag operations."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"View Mode Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Override the automatic detection of view mode"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"enforce-view-mode",children:"Enforce view mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Override automatic screen size detection"})]}),e.jsx(W,{id:"enforce-view-mode",checked:l,onCheckedChange:xe})]}),e.jsxs("div",{className:`space-y-2 ${l?"":"opacity-50"}`,children:[" ",e.jsx(S,{children:"Preferred view mode"}),e.jsx(Be,{name:"view-mode",value:I||"desktop",onChange:pe,options:[{id:"mode-desktop",label:"Desktop",value:"desktop"},{id:"mode-smartphone",label:"Smartphone",value:"smartphone"}],legend:"Display Mode",fieldset:!1,className:"mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Changes to view mode are applied after confirmation"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Window Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customize window appearance and behavior"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx(S,{htmlFor:"window-padding",children:"Window Content Padding"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a,"px"]})]})," ",e.jsx(O,{id:"window-padding",min:0,max:32,step:1,value:a,onChange:g=>$([parseInt(g.target.value)])}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Adjust the padding inside all application windows"})]})})]})]}),e.jsx(M,{value:"plugins",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Plugin Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Install and manage third-party plugins"})]}),e.jsxs("div",{className:"border rounded-md p-4 mb-4",style:{borderColor:"var(--wm-border-color)"},children:[e.jsx("h4",{className:"font-medium mb-2",children:"Install Plugin"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Install plugins from external sources to extend functionality"})," ",e.jsx(v,{variant:"default",onClick:()=>L(!0),children:"Install from URL"}),ce&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsx(Le,{onClose:()=>L(!1)})})]}),e.jsx(Oe,{}),e.jsxs("div",{className:"border rounded-md p-4",style:{borderColor:"var(--wm-border-color)"},children:[e.jsx("h4",{className:"font-medium mb-2",children:"Security Warning"}),e.jsx("p",{className:"text-sm text-red-500",children:"Third-party plugins can access your system and data. Only install plugins from trusted sources."})]})]})}),e.jsx(M,{value:"about",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"About"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"PrometheOS - A modular, customizable browser desktop environment"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Version: 1.0.0"})]}),e.jsx("div",{className:"mt-8 pt-6 border-t",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium text-destructive",children:"Reset System"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reset your desktop to a fresh state. This will clear all window positions, installed plugins, and customized settings."})," ",e.jsx("div",{className:"flex items-center justify-start pt-2",children:e.jsx(v,{variant:"destructive",onClick:()=>{window.confirm(`Are you sure you want to reset your desktop to its initial state?

This will remove all installed dynamic plugins, window positions, and custom settings.`)&&Xe(!0)},className:"mr-2",children:"Factory Reset"})})]})})]})})]})]})},as={id:V.id,manifest:V,init:async()=>{console.log("Settings plugin initialized")},render:()=>e.jsx("div",{className:"p-4",children:e.jsx(Qe,{})})};export{as as default};
